"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImportEntryPointTrimMigration = void 0;
const types_1 = require("../../../types");
const class_1 = require("../../../class");
class ImportEntryPointTrimMigration extends class_1.MigrationBase {
    run() {
        const importDeclarationList = this.getImportDeclarationList();
        const contentChangeList = [];
        for (const importDeclaration of importDeclarationList) {
            let tempImportDeclaration;
            const packagePathList = this.getImportDeclarationPackageName(importDeclaration)
                .split('/')
                .filter(item => item);
            if (packagePathList.length > 2) {
                tempImportDeclaration = this.updateImportDeclaration(importDeclaration, this.createStringLiteral(packagePathList.slice(0, 2).join('/')));
                contentChangeList.push(new types_1.ReplaceContentChange(importDeclaration.getStart(), importDeclaration.getWidth(), this.printNodeContent(tempImportDeclaration)));
            }
        }
        this.updateFileService.change(this.sourceFile.fileName, contentChangeList);
    }
}
exports.ImportEntryPointTrimMigration = ImportEntryPointTrimMigration;
