{"version":3,"file":"ngx-tethys-back-top.js","sources":["../../src/back-top/back-top.component.ts","../../src/back-top/back-top.module.ts","../../src/back-top/ngx-tethys-back-top.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    OnInit,\n    ChangeDetectionStrategy,\n    ViewEncapsulation,\n    Input,\n    TemplateRef,\n    EventEmitter,\n    Output,\n    HostBinding,\n    NgZone,\n    ChangeDetectorRef,\n    OnDestroy,\n    OnChanges,\n    Inject\n} from '@angular/core';\nimport { Subject, fromEvent } from 'rxjs';\nimport { Platform } from '@angular/cdk/platform';\nimport { throttleTime, takeUntil } from 'rxjs/operators';\nimport { DOCUMENT } from '@angular/common';\nimport { fadeMotion, ThyScrollService } from 'ngx-tethys/core';\n\n@Component({\n    selector: 'thy-back-top,[thyBackTop]',\n    templateUrl: './back-top.component.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    animations: [fadeMotion]\n})\nexport class ThyBackTopComponent implements OnInit, OnDestroy, OnChanges {\n    @HostBinding('class.thy-back-top-container') classNames = true;\n\n    @Input() thyTemplate?: TemplateRef<void>;\n\n    @Input() thyVisibilityHeight = 400;\n\n    @Input() thyContainer?: string | HTMLElement;\n\n    @Output() readonly thyClick: EventEmitter<boolean> = new EventEmitter();\n\n    @Output() public visibleChange: EventEmitter<boolean> = new EventEmitter();\n\n    public visible = false;\n\n    private scrollListenerDestroy$ = new Subject();\n\n    private target: HTMLElement | null = null;\n\n    constructor(\n        @Inject(DOCUMENT) private doc: any,\n        private thyScrollService: ThyScrollService,\n        private platform: Platform,\n        private cdr: ChangeDetectorRef,\n        private zone: NgZone\n    ) {}\n\n    ngOnInit(): void {\n        this.registerScrollEvent();\n    }\n\n    clickBackTop(): void {\n        this.thyScrollService.scrollTo(this.getTarget(), 0);\n        this.thyClick.emit(true);\n    }\n\n    private getTarget(): HTMLElement | Window {\n        return this.target || window;\n    }\n\n    private handleScroll(): void {\n        if (this.visible === this.thyScrollService.getScroll(this.getTarget()) > this.thyVisibilityHeight) {\n            return;\n        }\n        this.visible = !this.visible;\n        this.cdr.detectChanges();\n        this.zone.run(() => {\n            this.visibleChange.emit(this.visible);\n        });\n    }\n\n    private registerScrollEvent(): void {\n        if (!this.platform.isBrowser) {\n            return;\n        }\n        this.scrollListenerDestroy$.next();\n        this.handleScroll();\n        this.zone.runOutsideAngular(() => {\n            fromEvent(this.getTarget(), 'scroll')\n                .pipe(throttleTime(50), takeUntil(this.scrollListenerDestroy$))\n                .subscribe(() => this.handleScroll());\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.scrollListenerDestroy$.next();\n        this.scrollListenerDestroy$.complete();\n    }\n\n    ngOnChanges(changes: any): void {\n        const { thyContainer } = changes;\n        if (thyContainer) {\n            this.target = typeof this.thyContainer === 'string' ? this.doc.querySelector(this.thyContainer) : this.thyContainer;\n            this.registerScrollEvent();\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThyIconModule } from 'ngx-tethys/icon';\nimport { ThyBackTopComponent } from './back-top.component';\n\n@NgModule({\n    declarations: [ThyBackTopComponent],\n    imports: [CommonModule, ThyIconModule],\n    exports: [ThyBackTopComponent]\n})\nexport class ThyBackTopModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}