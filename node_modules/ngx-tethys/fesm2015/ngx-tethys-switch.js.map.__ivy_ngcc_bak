{"version":3,"file":"ngx-tethys-switch.js","sources":["../../src/switch/switch.component.ts","../../src/switch/switch.module.ts","../../src/switch/ngx-tethys-switch.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit, forwardRef, ElementRef, ViewChild, OnChanges, SimpleChanges } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { helpers } from 'ngx-tethys/util';\n\n@Component({\n    selector: 'thy-switch',\n    templateUrl: './switch.component.html',\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => ThySwitchComponent),\n            multi: true\n        }\n    ]\n})\nexport class ThySwitchComponent implements OnInit, ControlValueAccessor, OnChanges {\n    public model: boolean;\n\n    public type?: String = 'primary';\n\n    public size?: String = '';\n\n    public disabled?: Boolean = false;\n\n    public classNames: string[];\n\n    public typeArray: string[] = ['primary', 'info', 'warning', 'danger'];\n\n    public sizeArray: string[] = ['lg', '', 'sm'];\n\n    private initialized = false;\n\n    @ViewChild('switch', { static: true }) switchElementRef: ElementRef;\n\n    @Input()\n    set thyType(value: string) {\n        if (!this.typeArray.includes(value)) {\n            value = 'primary';\n        }\n        this.type = value;\n        if (this.initialized) {\n            this.setClassNames();\n        }\n    }\n\n    @Input()\n    set thySize(value: string) {\n        if (!this.sizeArray.includes(value)) {\n            value = '';\n        }\n        this.size = value;\n        if (this.initialized) {\n            this.setClassNames();\n        }\n    }\n\n    @Input() thyDisabled: boolean;\n\n    @Output() thyChange: EventEmitter<Event> = new EventEmitter<Event>();\n\n    constructor() {}\n\n    ngOnInit() {\n        this.setClassNames();\n        this.initialized = true;\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // 兼容降级后的Switch，使用onChanges\n        if (changes.thyDisabled) {\n            const value = changes.thyDisabled.currentValue;\n            this.disabled = helpers.isBoolean(value) ? Boolean(value) : value === 'true' || value === '1';\n            this.setClassNames();\n        }\n    }\n\n    public onModelChange: Function = () => {};\n\n    public onModelTouched: Function = () => {};\n\n    writeValue(value: boolean) {\n        this.model = value;\n        // this.setClassNames();\n    }\n\n    registerOnChange(fn: Function): void {\n        this.onModelChange = fn;\n    }\n\n    registerOnTouched(fn: Function): void {\n        this.onModelTouched = fn;\n    }\n\n    setDisabledState(isDisabled: Boolean) {\n        this.disabled = isDisabled;\n        this.setClassNames();\n    }\n\n    toggle(event: Event) {\n        this.model = !this.model;\n        this.onModelChange(this.model);\n        this.thyChange.emit(event);\n    }\n\n    setClassNames() {\n        this.classNames = [`thy-switch-${this.type}`];\n        if (this.size) {\n            this.classNames.push(`thy-switch-${this.size}`);\n        }\n        if (this.disabled) {\n            this.classNames.push(`thy-switch-disabled`);\n            if (this.model) {\n                this.classNames.push(`thy-switch-disabled-true`);\n            }\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThySwitchComponent } from './switch.component';\n\n@NgModule({\n    declarations: [\n        ThySwitchComponent\n    ],\n    entryComponents: [\n        ThySwitchComponent\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        ThySwitchComponent\n    ]\n})\nexport class ThySwitchModule {\n\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}