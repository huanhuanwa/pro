{"version":3,"file":"ngx-tethys-icon.js","sources":["../../src/icon/icon-registry.ts","../../src/icon/config.ts","../../src/icon/icon.component.ts","../../src/icon/icon.module.ts","../../src/icon/ngx-tethys-icon.ts"],"sourcesContent":["import { Injectable, SecurityContext, inject, Inject } from '@angular/core';\nimport { SafeResourceUrl, SafeHtml, DomSanitizer } from '@angular/platform-browser';\nimport { Observable, of, forkJoin, throwError } from 'rxjs';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { finalize, share, map, tap, catchError } from 'rxjs/operators';\nimport { DOCUMENT } from '@angular/common';\n\nclass SvgIconConfig {\n    url: SafeResourceUrl | null;\n    svgElement: SVGElement | null;\n\n    constructor(data: SafeResourceUrl | SVGElement) {\n        // Note that we can't use `instanceof SVGElement` here,\n        // because it'll break during server-side rendering.\n        if (!!(data as any).nodeName) {\n            this.svgElement = data as SVGElement;\n        } else {\n            this.url = data as SafeResourceUrl;\n        }\n    }\n}\n\nexport type IconMode = 'font' | 'svg';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ThyIconRegistry {\n    private defaultFontSetClass = 'wt-icon';\n    private internalIconMode: IconMode = 'svg';\n    private svgIconConfigs = new Map<string, SvgIconConfig>();\n    private svgIconSetConfigs = new Map<string, SvgIconConfig[]>();\n    private inProgressUrlFetches = new Map<string, Observable<string>>();\n\n    public get iconMode() {\n        return this.internalIconMode;\n    }\n\n    constructor(private sanitizer: DomSanitizer, private httpClient: HttpClient, @Inject(DOCUMENT) private document: any) {}\n\n    private getIconNameNotFoundError(iconName: string): Error {\n        return Error(`Unable to find icon with the name \"${iconName}\"`);\n    }\n\n    private getIconFailedToSanitizeLiteralError(literal: SafeHtml): Error {\n        return Error(\n            `The literal provided to MatIconRegistry was not trusted as safe HTML by ` +\n                `Angular's DomSanitizer. Attempted literal was \"${literal}\".`\n        );\n    }\n\n    private internalAddSvgIconSet(namespace: string, config: SvgIconConfig): this {\n        const configNamespace = this.svgIconSetConfigs.get(namespace);\n\n        if (configNamespace) {\n            configNamespace.push(config);\n        } else {\n            this.svgIconSetConfigs.set(namespace, [config]);\n        }\n\n        return this;\n    }\n\n    private cloneSvg(svg: SVGElement): SVGElement {\n        return svg.cloneNode(true) as SVGElement;\n    }\n\n    private fetchUrl(safeUrl: SafeResourceUrl | null): Observable<string> {\n        if (safeUrl == null) {\n            throw Error(`Cannot fetch icon from URL \"${safeUrl}\".`);\n        }\n\n        const url = this.sanitizer.sanitize(SecurityContext.RESOURCE_URL, safeUrl);\n\n        if (!url) {\n            throw new Error(\n                `The URL provided to ThyIconRegistry was not trusted as a resource URL ` +\n                    `via Angular's DomSanitizer. Attempted URL was \"${url}\".`\n            );\n        }\n\n        // Store in-progress fetches to avoid sending a duplicate request for a URL when there is\n        // already a request in progress for that URL. It's necessary to call share() on the\n        // Observable returned by http.get() so that multiple subscribers don't cause multiple XHRs.\n        const inProgressFetch = this.inProgressUrlFetches.get(url);\n\n        if (inProgressFetch) {\n            return inProgressFetch;\n        } else {\n            // TODO(jelbourn): for some reason, the `finalize` operator \"loses\" the generic type on the\n            // Observable. Figure out why and fix it.\n            const req = this.httpClient.get(url, { responseType: 'text' }).pipe(\n                finalize(() => this.inProgressUrlFetches.delete(url)),\n                share()\n            );\n\n            this.inProgressUrlFetches.set(url, req);\n            return req;\n        }\n    }\n\n    private toSvgElement(element: Element): SVGElement {\n        const svg = this.svgElementFromString('<svg></svg>');\n\n        for (let i = 0; i < element.childNodes.length; i++) {\n            if (element.childNodes[i].nodeType === this.document.ELEMENT_NODE) {\n                svg.appendChild(element.childNodes[i].cloneNode(true));\n            }\n        }\n\n        return svg;\n    }\n\n    private extractSvgIconFromIconSet(iconSet: SVGElement, iconName: string): SVGElement | null {\n        // Use the `id=\"iconName\"` syntax in order to escape special\n        // characters in the ID (versus using the #iconName syntax).\n        const iconSource = iconSet.querySelector(`[id=\"${iconName}\"]`);\n\n        if (!iconSource) {\n            return null;\n        }\n\n        // Clone the element and remove the ID to prevent multiple elements from being added\n        // to the page with the same ID.\n        const iconElement = iconSource.cloneNode(true) as Element;\n        iconElement.removeAttribute('id');\n\n        // If the icon node is itself an <svg> node, clone and return it directly. If not, set it as\n        // the content of a new <svg> node.\n        if (iconElement.nodeName.toLowerCase() === 'svg') {\n            return this.setSvgAttributes(iconElement as SVGElement);\n        }\n\n        // If the node is a <symbol>, it won't be rendered so we have to convert it into <svg>. Note\n        // that the same could be achieved by referring to it via <use href=\"#id\">, however the <use>\n        // tag is problematic on Firefox, because it needs to include the current page path.\n        if (iconElement.nodeName.toLowerCase() === 'symbol') {\n            return this.setSvgAttributes(this.toSvgElement(iconElement));\n        }\n\n        // createElement('SVG') doesn't work as expected; the DOM ends up with\n        // the correct nodes, but the SVG content doesn't render. Instead we\n        // have to create an empty SVG node using innerHTML and append its content.\n        // Elements created using DOMParser.parseFromString have the same problem.\n        // http://stackoverflow.com/questions/23003278/svg-innerhtml-in-firefox-can-not-display\n        const svg = this.svgElementFromString('<svg></svg>');\n        // Clone the node so we don't remove it from the parent icon set element.\n        svg.appendChild(iconElement);\n\n        return this.setSvgAttributes(svg);\n    }\n\n    private extractIconWithNameFromIconSetConfigs(iconName: string, iconSetConfigs: SvgIconConfig[]): SVGElement | null {\n        // Iterate backwards, so icon sets added later have precedence.\n        for (let i = iconSetConfigs.length - 1; i >= 0; i--) {\n            const config = iconSetConfigs[i];\n            if (config.svgElement) {\n                const foundIcon = this.extractSvgIconFromIconSet(config.svgElement, iconName);\n                if (foundIcon) {\n                    return foundIcon;\n                }\n            }\n        }\n        return null;\n    }\n\n    private svgElementFromString(str: string): SVGElement {\n        const div = this.document.createElement('DIV');\n        div.innerHTML = str;\n        const svg = div.querySelector('svg') as SVGElement;\n\n        if (!svg) {\n            throw Error('<svg> tag not found');\n        }\n\n        return svg;\n    }\n\n    private setSvgAttributes(svg: SVGElement): SVGElement {\n        svg.setAttribute('fit', '');\n        svg.setAttribute('height', '1em');\n        svg.setAttribute('width', '1em');\n        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');\n        svg.setAttribute('focusable', 'false'); // Disable IE11 default behavior to make SVGs focusable.\n        return svg;\n    }\n\n    private createSvgElementForSingleIcon(responseText: string): SVGElement {\n        const svg = this.svgElementFromString(responseText);\n        this.setSvgAttributes(svg);\n        return svg;\n    }\n\n    private loadSvgIconFromConfig(config: SvgIconConfig): Observable<SVGElement> {\n        return this.fetchUrl(config.url).pipe(map(svgText => this.createSvgElementForSingleIcon(svgText)));\n    }\n\n    private loadSvgIconSetFromConfig(config: SvgIconConfig): Observable<SVGElement> {\n        // If the SVG for this icon set has already been parsed, do nothing.\n        if (config.svgElement) {\n            return of(config.svgElement);\n        }\n\n        return this.fetchUrl(config.url).pipe(\n            map(svgText => {\n                // It is possible that the icon set was parsed and cached by an earlier request, so parsing\n                // only needs to occur if the cache is yet unset.\n                if (!config.svgElement) {\n                    config.svgElement = this.svgElementFromString(svgText);\n                }\n\n                return config.svgElement;\n            })\n        );\n    }\n\n    private getSvgFromConfig(config: SvgIconConfig): Observable<SVGElement> {\n        if (config.svgElement) {\n            // We already have the SVG element for this icon, return a copy.\n            return of(this.cloneSvg(config.svgElement));\n        } else {\n            // Fetch the icon from the config's URL, cache it, and return a copy.\n            return this.loadSvgIconFromConfig(config).pipe(\n                tap(svg => (config.svgElement = svg)),\n                map(svg => this.cloneSvg(svg))\n            );\n        }\n    }\n\n    private getSvgFromIconSetConfigs(name: string, iconSetConfigs: SvgIconConfig[]): Observable<SVGElement> {\n        // For all the icon set SVG elements we've fetched, see if any contain an icon with the\n        // requested name.\n        const namedIcon = this.extractIconWithNameFromIconSetConfigs(name, iconSetConfigs);\n\n        if (namedIcon) {\n            // We could cache namedIcon in svgIconConfigs, but since we have to make a copy every\n            // time anyway, there's probably not much advantage compared to just always extracting\n            // it from the icon set.\n            return of(namedIcon);\n        }\n\n        // Not found in any cached icon sets. If there are icon sets with URLs that we haven't\n        // fetched, fetch them now and look for iconName in the results.\n        const iconSetFetchRequests: Observable<SVGElement | null>[] = iconSetConfigs\n            .filter(iconSetConfig => !iconSetConfig.svgElement)\n            .map(iconSetConfig => {\n                return this.loadSvgIconSetFromConfig(iconSetConfig).pipe(\n                    catchError(\n                        (err: HttpErrorResponse): Observable<SVGElement | null> => {\n                            const url = this.sanitizer.sanitize(SecurityContext.RESOURCE_URL, iconSetConfig.url);\n\n                            // Swallow errors fetching individual URLs so the\n                            // combined Observable won't necessarily fail.\n                            console.error(`Loading icon set URL: ${url} failed: ${err.message}`);\n                            return of(null);\n                        }\n                    )\n                );\n            });\n\n        // Fetch all the icon set URLs. When the requests complete, every IconSet should have a\n        // cached SVG element (unless the request failed), and we can check again for the icon.\n        return forkJoin(iconSetFetchRequests).pipe(\n            map(() => {\n                const foundIcon = this.extractIconWithNameFromIconSetConfigs(name, iconSetConfigs);\n\n                if (!foundIcon) {\n                    throw this.getIconNameNotFoundError(name);\n                }\n\n                return foundIcon;\n            })\n        );\n    }\n\n    private internalAddSvgIconConfig(namespace: string, iconName: string, config: SvgIconConfig): this {\n        this.svgIconConfigs.set(this.buildIconKey(namespace, iconName), config);\n        return this;\n    }\n\n    buildIconKey(namespace: string, name: string) {\n        return namespace + ':' + name;\n    }\n\n    splitIconName(iconName: string): [string, string] {\n        if (!iconName) {\n            return ['', ''];\n        }\n        const parts = iconName.split(':');\n        switch (parts.length) {\n            case 1:\n                return ['', parts[0]]; // Use default namespace.\n            case 2:\n                return <[string, string]>parts;\n            default:\n                throw Error(`Invalid icon name: \"${iconName}\"`);\n        }\n    }\n\n    addSvgIconSetInNamespace(namespace: string, url: SafeResourceUrl): this {\n        return this.internalAddSvgIconSet(namespace, new SvgIconConfig(url));\n    }\n\n    addSvgIconSet(url: SafeResourceUrl): this {\n        return this.addSvgIconSetInNamespace('', url);\n    }\n\n    addSvgIconSetLiteralInNamespace(namespace: string, literal: SafeHtml): this {\n        const sanitizedLiteral = this.sanitizer.sanitize(SecurityContext.HTML, literal);\n\n        if (!sanitizedLiteral) {\n            throw this.getIconFailedToSanitizeLiteralError(literal);\n        }\n\n        const svgElement = this.svgElementFromString(sanitizedLiteral);\n        return this.internalAddSvgIconSet(namespace, new SvgIconConfig(svgElement));\n    }\n\n    addSvgIconSetLiteral(literal: SafeHtml): this {\n        return this.addSvgIconSetLiteralInNamespace('', literal);\n    }\n\n    /**\n     * Registers an icon by URL in the specified namespace.\n     * @param namespace Namespace in which the icon should be registered.\n     * @param iconName Name under which the icon should be registered.\n     * @param url\n     */\n    addSvgIconInNamespace(namespace: string, iconName: string, url: SafeResourceUrl): this {\n        return this.internalAddSvgIconConfig(namespace, iconName, new SvgIconConfig(url));\n    }\n\n    /**\n     * Registers an icon by URL in the default namespace.\n     * @param iconName Name under which the icon should be registered.\n     * @param url\n     */\n    addSvgIcon(iconName: string, url: SafeResourceUrl): this {\n        return this.addSvgIconInNamespace('', iconName, url);\n    }\n\n    /**\n     * Registers an icon using an HTML string in the default namespace.\n     * @param iconName Name under which the icon should be registered.\n     * @param literal SVG source of the icon.\n     */\n    addSvgIconLiteral(iconName: string, literal: SafeHtml): this {\n        return this.addSvgIconLiteralInNamespace('', iconName, literal);\n    }\n\n    /**\n     * Registers an icon using an HTML string in the specified namespace.\n     * @param namespace Namespace in which the icon should be registered.\n     * @param iconName Name under which the icon should be registered.\n     * @param literal SVG source of the icon.\n     */\n    addSvgIconLiteralInNamespace(namespace: string, iconName: string, literal: SafeHtml): this {\n        const sanitizedLiteral = this.sanitizer.sanitize(SecurityContext.HTML, literal);\n\n        if (!sanitizedLiteral) {\n            throw this.getIconFailedToSanitizeLiteralError(literal);\n        }\n\n        const svgElement = this.createSvgElementForSingleIcon(sanitizedLiteral);\n        return this.internalAddSvgIconConfig(namespace, iconName, new SvgIconConfig(svgElement));\n    }\n\n    getDefaultFontSetClass() {\n        return this.defaultFontSetClass;\n    }\n\n    getFontSetClassByAlias(fontSet: string) {\n        return fontSet;\n    }\n\n    getSvgIcon(name: string, namespace: string = ''): Observable<SVGElement> {\n        // Return (copy of) cached icon if possible.\n        const key = this.buildIconKey(namespace, name);\n        const config = this.svgIconConfigs.get(key);\n\n        if (config) {\n            return this.getSvgFromConfig(config);\n        }\n\n        // See if we have any icon sets registered for the namespace.\n        const iconSetConfigs = this.svgIconSetConfigs.get(namespace);\n\n        if (iconSetConfigs) {\n            return this.getSvgFromIconSetConfigs(name, iconSetConfigs);\n        }\n\n        return throwError(this.getIconNameNotFoundError(key));\n    }\n\n    setIconMode(mode: IconMode) {\n        this.internalIconMode = mode;\n    }\n}\n","let printErrorWhenNotFound = true;\n\nexport function setPrintErrorWhenIconNotFound(value: boolean) {\n    printErrorWhenNotFound = value;\n}\n\nexport function getWhetherPrintErrorWhenIconNotFound() {\n    return printErrorWhenNotFound;\n}\n","import {\n    Component,\n    OnInit,\n    ChangeDetectionStrategy,\n    ViewEncapsulation,\n    ElementRef,\n    Input,\n    HostBinding,\n    Renderer2,\n    SimpleChanges,\n    OnChanges\n} from '@angular/core';\n\nimport { UpdateHostClassService } from 'ngx-tethys/core';\nimport { ThyIconRegistry } from './icon-registry';\nimport { take, tap } from 'rxjs/operators';\nimport { Subject, noop, BehaviorSubject } from 'rxjs';\nimport { coerceArray, coerceBooleanProperty } from 'ngx-tethys/util';\nimport { getWhetherPrintErrorWhenIconNotFound } from './config';\n\nconst iconSuffixMap = {\n    fill: 'fill',\n    twotone: 'tt'\n};\n\n@Component({\n    selector: 'thy-icon',\n    template: '<ng-content></ng-content>',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    providers: [UpdateHostClassService]\n})\nexport class ThyIconComponent implements OnInit, OnChanges {\n    @HostBinding('class.thy-icon') className = true;\n\n    private isInitialized = false;\n\n    @Input('thyIconType') iconType: 'outline' | 'fill' | 'twotone' = 'outline';\n\n    @Input('thyTwotoneColor') iconTwotoneColor: string;\n\n    @Input('thyIconName') iconName: string;\n\n    @Input('thyIconRotate') iconRotate: number;\n\n    @Input('thyIconSet') iconSet: string;\n\n    @Input('thyIconLegging') iconLegging: boolean;\n\n    @Input('thyIconLinearGradient') iconLinearGradient: boolean;\n\n    constructor(\n        private updateHostClassService: UpdateHostClassService,\n        private render: Renderer2,\n        private elementRef: ElementRef,\n        private iconRegistry: ThyIconRegistry\n    ) {\n        updateHostClassService.initializeElement(elementRef.nativeElement);\n    }\n\n    ngOnInit() {\n        this.updateClasses();\n        this.isInitialized = true;\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.isInitialized) {\n            if (changes['iconName'] || changes['iconSet'] || changes['iconTwotoneColor'] || changes['iconType']) {\n                this.updateClasses();\n            } else if (changes['iconRotate']) {\n                this.setStyleRotate();\n            }\n        }\n        if (changes['iconLegging']) {\n            if (coerceBooleanProperty(this.iconLegging)) {\n                this.updateHostClassService.addClass('thy-icon-legging');\n            } else {\n                this.updateHostClassService.removeClass('thy-icon-legging');\n            }\n        }\n    }\n\n    private updateClasses() {\n        const [namespace, iconName] = this.iconRegistry.splitIconName(this.iconName);\n        if (iconName) {\n            if (this.iconRegistry.iconMode === 'svg') {\n                this.iconRegistry\n                    .getSvgIcon(this.buildIconNameByType(iconName), namespace)\n                    .pipe(take(1))\n                    .subscribe(\n                        svg => this.setSvgElement(svg),\n                        (error: Error) => {\n                            if (getWhetherPrintErrorWhenIconNotFound()) {\n                                console.error(`Error retrieving icon: ${error.message}`);\n                            }\n                        }\n                    );\n                this.updateHostClassService.updateClass([\n                    `thy-icon${namespace ? `-${namespace}` : ``}-${this.buildIconNameByType(iconName)}`\n                ]);\n            } else {\n                const fontSetClass = this.iconSet\n                    ? this.iconRegistry.getFontSetClassByAlias(this.iconSet)\n                    : this.iconRegistry.getDefaultFontSetClass();\n                this.updateHostClassService.updateClass([fontSetClass, `${fontSetClass}-${this.iconName}`]);\n            }\n        }\n    }\n\n    private setStyleRotate() {\n        if (this.iconRotate !== undefined) {\n            this.render.setStyle(this.elementRef.nativeElement.querySelector('svg'), 'transform', `rotate(${this.iconRotate}deg)`);\n        }\n    }\n\n    //#region svg element\n\n    private setSvgElement(svg: SVGElement) {\n        this.clearSvgElement();\n\n        // Workaround for IE11 and Edge ignoring `style` tags inside dynamically-created SVGs.\n        // See: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n        // Do this before inserting the element into the DOM, in order to avoid a style recalculation.\n        const styleTags = svg.querySelectorAll('style') as NodeListOf<HTMLStyleElement>;\n\n        for (let i = 0; i < styleTags.length; i++) {\n            styleTags[i].textContent += ' ';\n        }\n\n        if (this.iconType === 'twotone') {\n            const allPaths = svg.querySelectorAll('path');\n            if (allPaths.length > 1) {\n                allPaths.forEach((child, index: number) => {\n                    if (child.getAttribute('id').includes('secondary-color')) {\n                        child.setAttribute('fill', this.iconTwotoneColor);\n                    }\n                });\n            }\n        }\n\n        // Note: we do this fix here, rather than the icon registry, because the\n        // references have to point to the URL at the time that the icon was created.\n        // if (this._location) {\n        //     const path = this._location.getPathname();\n        //     this._previousPath = path;\n        //     this._cacheChildrenWithExternalReferences(svg);\n        //     this._prependPathToReferences(path);\n        // }\n        if (this.iconLinearGradient) {\n            this.setBaseUrl(svg);\n            this.clearTitleElement(svg);\n        }\n\n        this.elementRef.nativeElement.appendChild(svg);\n        this.setStyleRotate();\n    }\n\n    private clearSvgElement() {\n        const layoutElement: HTMLElement = this.elementRef.nativeElement;\n        let childCount = layoutElement.childNodes.length;\n\n        // if (this._elementsWithExternalReferences) {\n        //     this._elementsWithExternalReferences.clear();\n        // }\n\n        // Remove existing non-element child nodes and SVGs, and add the new SVG element. Note that\n        // we can't use innerHTML, because IE will throw if the element has a data binding.\n        while (childCount--) {\n            const child = layoutElement.childNodes[childCount];\n\n            // 1 corresponds to Node.ELEMENT_NODE. We remove all non-element nodes in order to get rid\n            // of any loose text nodes, as well as any SVG elements in order to remove any old icons.\n            if (child.nodeType !== 1 || child.nodeName.toLowerCase() === 'svg') {\n                layoutElement.removeChild(child);\n            }\n        }\n    }\n\n    //#endregion\n\n    private buildIconNameByType(iconName: string) {\n        if (this.iconType && ['fill', 'twotone'].indexOf(this.iconType) >= 0) {\n            const suffix = iconSuffixMap[this.iconType];\n            return iconName.includes(`-${suffix}`) ? iconName : `${iconName}-${suffix}`;\n        } else {\n            return iconName;\n        }\n    }\n\n    /**\n     * Support Safari SVG LinearGradient.\n     *\n     *\n     * @param svg\n     */\n    private setBaseUrl(svg: SVGElement) {\n        const styleElements = svg.querySelectorAll('[style]');\n        styleElements.forEach((n: any) => {\n            if (n.style.cssText.includes('url')) {\n                n.style.fill = n.style.fill.replace('url(\"', 'url(\"' + location.pathname);\n            }\n            if (n.style.cssText.includes('clip-path')) {\n                n.style.clipPath = n.style.clipPath.replace('url(\"', 'url(\"' + location.pathname);\n            }\n        });\n    }\n\n    private clearTitleElement(svg: SVGElement) {\n        svg.querySelector('title').remove();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { ThyIconComponent } from './icon.component';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n    declarations: [ThyIconComponent],\n    imports: [CommonModule, FormsModule, HttpClientModule],\n    exports: [ThyIconComponent]\n})\nexport class ThyIconModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}