{"version":3,"file":"ngx-tethys-empty.js","sources":["../../src/empty/empty.config.ts","../../src/empty/empty.component.ts","../../src/empty/empty.module.ts","../../src/empty/ngx-tethys-empty.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class ThyEmptyConfig {\n    noResultTranslateKey = 'common.tips.NO_RESULT';\n    noResultWithTargetTranslateKey = 'common.tips.NO_RESULT_TARGET';\n}\n\n","import { ThyTranslate } from 'ngx-tethys/core';\nimport { coerceBooleanProperty } from 'ngx-tethys/util';\n\nimport {\n    AfterViewInit,\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    Input,\n    NgZone,\n    OnInit,\n    Renderer2,\n    TemplateRef\n} from '@angular/core';\n\nimport { ThyEmptyConfig } from './empty.config';\n\nconst sizeClassMap: any = {\n    lg: ['thy-empty-state', 'thy-empty-state--lg'],\n    md: ['thy-empty-state'],\n    sm: ['thy-empty-state', 'thy-empty-state--sm']\n};\nconst sizeMap: any = {\n    lg: {\n        height: 168, // 空提示的高度\n        offsetTop: 30, // 空提示图标和大小之间的空白距离，需要除去，否则会不居中\n        defaultMarginTop: 120 // 不自动计算默认的 top 距离\n    },\n    md: {\n        height: 118,\n        offsetTop: 20,\n        defaultMarginTop: 10\n    },\n    sm: {\n        height: 78,\n        offsetTop: 10,\n        defaultMarginTop: 10\n    }\n};\n\n@Component({\n    selector: 'thy-empty',\n    templateUrl: './empty.component.html'\n})\nexport class ThyEmptyComponent implements OnInit, AfterViewInit {\n    @HostBinding('class') sizeClass = sizeClassMap['md'].join(' ');\n\n    // 显示的文本，优先级 100 最高\n    @Input() thyMessage: string;\n\n    // 显示文本的多语言 Key 优先级 99\n    @Input() thyTranslationKey: string;\n\n    @Input() thyTranslationValues: any;\n\n    // 显示默认提示信息，替换目标名称\n    @Input() thyEntityName: string;\n\n    // 显示默认提示信息，替换目标名称的 translateKey\n    @Input() thyEntityNameTranslateKey: string;\n\n    @Input() thyIconName: string;\n\n    @Input()\n    set thySize(value: string) {\n        const classList = sizeClassMap[value || 'md'];\n        if (classList) {\n            this.sizeClass = classList.join(' ');\n        }\n    }\n\n    @Input() thyMarginTop: number | string;\n\n    @Input() thyTopAuto: boolean;\n\n    @Input() thyContainer: ElementRef;\n\n    @Input() thyImageUrl: string;\n\n    @Input() thyDescription: string;\n\n    @ContentChild('extra') extraTemplateRef: TemplateRef<any>;\n\n    get displayText() {\n        if (this.thyMessage) {\n            return this.thyMessage;\n        } else if (this.thyTranslationKey) {\n            return this.thyTranslate.instant(this.thyTranslationKey, this.thyTranslationValues);\n        } else if (this.thyEntityName) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyEntityName\n            });\n        } else if (this.thyEntityNameTranslateKey) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyTranslate.instant(this.thyEntityNameTranslateKey)\n            });\n        } else {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultTranslateKey);\n        }\n    }\n\n    _calculatePosition() {\n        const sizeOptions = sizeMap[this.thySize || 'md'];\n        const topAuto = coerceBooleanProperty(this.thyTopAuto);\n        let marginTop = null;\n        if (topAuto) {\n            // 选择参考父容器居中\n            const containerElement = this.thyContainer ? this.thyContainer.nativeElement : this.elementRef.nativeElement.parentElement;\n            // containerElement.height;\n            let emptyStateHeight = this.elementRef.nativeElement.offsetHeight;\n            // 高度没有自动计算出来使用默认值\n            if (emptyStateHeight <= 10) {\n                emptyStateHeight = sizeOptions.height;\n            }\n            marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2 - sizeOptions.offsetTop;\n            // marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2;\n            if (marginTop < 0) {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        } else {\n            if (this.thyMarginTop) {\n                marginTop = this.thyMarginTop;\n            } else {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        }\n        if (marginTop) {\n            this.renderer.setStyle(this.elementRef.nativeElement, 'marginTop', marginTop + 'px');\n        }\n    }\n    constructor(\n        private thyTranslate: ThyTranslate,\n        private thyEmptyConfig: ThyEmptyConfig,\n        private elementRef: ElementRef,\n        private renderer: Renderer2,\n        private ngZone: NgZone\n    ) {}\n\n    ngOnInit() {}\n\n    ngAfterViewInit() {\n        this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                this._calculatePosition();\n            }, 50);\n        });\n    }\n}\n","import { ThyIconModule } from 'ngx-tethys/icon';\nimport { ThySharedModule } from 'ngx-tethys/shared';\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { ThyEmptyComponent } from './empty.component';\nimport { ThyEmptyConfig } from './empty.config';\n\n@NgModule({\n    declarations: [ThyEmptyComponent],\n    imports: [CommonModule, ThySharedModule, ThyIconModule],\n    exports: [ThyEmptyComponent],\n    providers: [ThyEmptyConfig]\n})\nexport class ThyEmptyModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}