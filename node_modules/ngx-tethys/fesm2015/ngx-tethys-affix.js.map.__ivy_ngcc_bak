{"version":3,"file":"ngx-tethys-affix.js","sources":["../../src/affix/respond-events.ts","../../src/affix/affix.component.ts","../../src/affix/affix.module.ts","../../src/affix/ngx-tethys-affix.ts"],"sourcesContent":["export enum AffixRespondEvents {\n    resize = 'resize',\n    scroll = 'scroll',\n    touchstart = 'touchstart',\n    touchmove = 'touchmove',\n    touchend = 'touchend',\n    pageshow = 'pageshow',\n    load = 'LOAD'\n}\n","import { Platform } from '@angular/cdk/platform';\nimport { DOCUMENT } from '@angular/common';\nimport {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Output,\n    Renderer2,\n    SimpleChanges,\n    ViewChild,\n    ViewEncapsulation\n} from '@angular/core';\n\nimport { fromEvent, merge, ReplaySubject, Subject, Subscription } from 'rxjs';\nimport { auditTime, map, takeUntil } from 'rxjs/operators';\n\nimport { AffixRespondEvents } from './respond-events';\nimport { ThyScrollService } from 'ngx-tethys/core';\nimport { dom, shallowEqual, SimpleRect } from 'ngx-tethys/util';\nconst THY_AFFIX_CLS_PREFIX = 'thy-affix';\nconst THY_AFFIX_DEFAULT_SCROLL_TIME = 20;\n\n@Component({\n    selector: 'thy-affix',\n    exportAs: 'thyAffix',\n    template: `\n        <div #fixedElement>\n            <ng-content></ng-content>\n        </div>\n    `,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None\n})\nexport class ThyAffixComponent implements AfterViewInit, OnChanges, OnDestroy {\n    @ViewChild('fixedElement', { static: true }) private fixedElement!: ElementRef<HTMLDivElement>;\n\n    @Input() thyContainer?: string | Element | Window;\n\n    @Input()\n    thyOffsetTop?: null | number;\n\n    @Input()\n    thyOffsetBottom?: null | number;\n\n    @Output() readonly thyChange = new EventEmitter<boolean>();\n\n    private readonly placeholderNode: HTMLElement;\n\n    private affixStyle?: any;\n    private placeholderStyle?: any;\n    private positionChangeSubscription: Subscription = Subscription.EMPTY;\n    private offsetChanged$ = new ReplaySubject(1);\n    private destroy$ = new Subject<void>();\n    private timeout?: number;\n    private document: any;\n\n    private get container(): Element | Window {\n        const el = this.thyContainer;\n        return (typeof el === 'string' ? this.document.querySelector(el) : el) || window;\n    }\n\n    constructor(\n        el: ElementRef,\n        @Inject(DOCUMENT) document: any,\n        private scrollService: ThyScrollService,\n        private ngZone: NgZone,\n        private platform: Platform,\n        private renderer: Renderer2\n    ) {\n        // The wrapper would stay at the original position as a placeholder.\n        this.placeholderNode = el.nativeElement;\n        this.document = document;\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        const { thyOffsetBottom, thyOffsetTop, thyContainer } = changes;\n\n        if (thyOffsetBottom || thyOffsetTop) {\n            this.offsetChanged$.next();\n        }\n        if (thyContainer) {\n            this.registerListeners();\n        }\n    }\n\n    ngAfterViewInit(): void {\n        this.registerListeners();\n    }\n\n    ngOnDestroy(): void {\n        this.removeListeners();\n    }\n\n    private registerListeners(): void {\n        this.removeListeners();\n        this.positionChangeSubscription = this.ngZone.runOutsideAngular(() => {\n            return merge(\n                ...Object.keys(AffixRespondEvents).map(evName => fromEvent(this.container, evName)),\n                this.offsetChanged$.pipe(\n                    takeUntil(this.destroy$),\n                    map(() => ({}))\n                )\n            )\n                .pipe(auditTime(THY_AFFIX_DEFAULT_SCROLL_TIME))\n                .subscribe(e => this.updatePosition(e as Event));\n        });\n        this.timeout = setTimeout(() => this.updatePosition({} as Event));\n    }\n\n    private removeListeners(): void {\n        clearTimeout(this.timeout);\n        this.positionChangeSubscription.unsubscribe();\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n\n    getOffset(element: Element, target: Element | Window | undefined): SimpleRect {\n        const elemRect = element.getBoundingClientRect();\n        const containerRect = dom.getContainerRect(target);\n\n        const scrollTop = this.scrollService.getScroll(target, true);\n        const scrollLeft = this.scrollService.getScroll(target, false);\n\n        const docElem = this.document.body;\n        const clientTop = docElem.clientTop || 0;\n        const clientLeft = docElem.clientLeft || 0;\n\n        return {\n            top: elemRect.top - containerRect.top + scrollTop - clientTop,\n            left: elemRect.left - containerRect.left + scrollLeft - clientLeft,\n            width: elemRect.width,\n            height: elemRect.height\n        };\n    }\n\n    private setAffixStyle(e: Event, affixStyle?: any): void {\n        const originalAffixStyle = this.affixStyle;\n        const isWindow = this.container === window;\n        if (e.type === 'scroll' && originalAffixStyle && affixStyle && isWindow) {\n            return;\n        }\n        if (shallowEqual(originalAffixStyle, affixStyle)) {\n            return;\n        }\n\n        const fixed = !!affixStyle;\n        const wrapElement = this.fixedElement.nativeElement;\n        this.renderer.setStyle(wrapElement, 'cssText', dom.getStyleAsText(affixStyle));\n        this.affixStyle = affixStyle;\n        if (fixed) {\n            wrapElement.classList.add(THY_AFFIX_CLS_PREFIX);\n        } else {\n            wrapElement.classList.remove(THY_AFFIX_CLS_PREFIX);\n        }\n\n        if ((affixStyle && !originalAffixStyle) || (!affixStyle && originalAffixStyle)) {\n            this.thyChange.emit(fixed);\n        }\n    }\n\n    private setPlaceholderStyle(placeholderStyle?: any): void {\n        const originalPlaceholderStyle = this.placeholderStyle;\n        if (shallowEqual(placeholderStyle, originalPlaceholderStyle)) {\n            return;\n        }\n        this.renderer.setStyle(this.placeholderNode, 'cssText', dom.getStyleAsText(placeholderStyle));\n        this.placeholderStyle = placeholderStyle;\n    }\n\n    private syncPlaceholderStyle(e: Event): void {\n        if (!this.affixStyle) {\n            return;\n        }\n        this.renderer.setStyle(this.placeholderNode, 'cssText', '');\n        this.placeholderStyle = undefined;\n        const styleObj = {\n            width: this.placeholderNode.offsetWidth,\n            height: this.fixedElement.nativeElement.offsetHeight\n        };\n        this.setAffixStyle(e, {\n            ...this.affixStyle,\n            ...styleObj\n        });\n        this.setPlaceholderStyle(styleObj);\n    }\n\n    updatePosition(e: Event): void {\n        if (!this.platform.isBrowser) {\n            return;\n        }\n\n        const containerNode = this.container;\n        let offsetTop = this.thyOffsetTop;\n        const scrollTop = this.scrollService.getScroll(containerNode, true);\n        const elementOffset = this.getOffset(this.placeholderNode, containerNode);\n        const fixedNode = this.fixedElement.nativeElement;\n        const elemSize = {\n            width: fixedNode.offsetWidth,\n            height: fixedNode.offsetHeight\n        };\n        const offsetMode = {\n            top: false,\n            bottom: false\n        };\n        // Default to `offsetTop=0`.\n        if (typeof offsetTop !== 'number' && typeof this.thyOffsetBottom !== 'number') {\n            offsetMode.top = true;\n            offsetTop = 0;\n        } else {\n            offsetMode.top = typeof offsetTop === 'number';\n            offsetMode.bottom = typeof this.thyOffsetBottom === 'number';\n        }\n        const containerRect = dom.getContainerRect(containerNode as Window);\n        const targetInnerHeight = (containerNode as Window).innerHeight || (containerNode as HTMLElement).clientHeight;\n        if (scrollTop >= elementOffset.top - (offsetTop as number) && offsetMode.top) {\n            const width = elementOffset.width;\n            const top = containerRect.top + (offsetTop as number);\n            this.setAffixStyle(e, {\n                position: 'fixed',\n                top,\n                left: containerRect.left + elementOffset.left,\n                width\n            });\n            this.setPlaceholderStyle({\n                width,\n                height: elemSize.height\n            });\n        } else if (\n            scrollTop <= elementOffset.top + elemSize.height + (this.thyOffsetBottom as number) - targetInnerHeight &&\n            offsetMode.bottom\n        ) {\n            const targetBottomOffset = containerNode === window ? 0 : window.innerHeight - containerRect.bottom;\n            const width = elementOffset.width;\n            this.setAffixStyle(e, {\n                position: 'fixed',\n                bottom: targetBottomOffset + (this.thyOffsetBottom as number),\n                left: containerRect.left + elementOffset.left,\n                width\n            });\n            this.setPlaceholderStyle({\n                width,\n                height: elementOffset.height\n            });\n        } else {\n            if (\n                e.type === AffixRespondEvents.resize &&\n                this.affixStyle &&\n                this.affixStyle.position === 'fixed' &&\n                this.placeholderNode.offsetWidth\n            ) {\n                this.setAffixStyle(e, {\n                    ...this.affixStyle,\n                    width: this.placeholderNode.offsetWidth\n                });\n            } else {\n                this.setAffixStyle(e);\n            }\n            this.setPlaceholderStyle();\n        }\n\n        if (e.type === 'resize') {\n            this.syncPlaceholderStyle(e);\n        }\n    }\n}\n","import { PlatformModule } from '@angular/cdk/platform';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { ThyAffixComponent } from './affix.component';\n\n@NgModule({\n    declarations: [ThyAffixComponent],\n    exports: [ThyAffixComponent],\n    imports: [CommonModule, PlatformModule]\n})\nexport class ThyAffixModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}