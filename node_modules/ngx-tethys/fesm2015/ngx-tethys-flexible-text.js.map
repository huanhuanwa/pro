{"version":3,"file":"ngx-tethys-flexible-text.js","sources":["../../src/flexible-text/flexible-text.component.ts","../../src/flexible-text/flexible-text.module.ts","../../src/flexible-text/ngx-tethys-flexible-text.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, TemplateRef, ElementRef, OnInit, ViewContainerRef, OnDestroy, AfterContentInit } from '@angular/core';\nimport { timer, Subject, Subscription } from 'rxjs';\nimport { TooltipService } from 'ngx-tethys/tooltip';\nimport { UpdateHostClassService } from 'ngx-tethys/core';\nimport { ContentObserver } from '@angular/cdk/observers';\nimport { debounceTime } from 'rxjs/operators';\nimport { ThyPlacement } from 'ngx-tethys/core';\nimport { isUndefinedOrNull } from 'ngx-tethys/util';\n\n@Component({\n    selector: 'thy-flexible-text,[thyFlexibleText]',\n    exportAs: 'thyFlexibleText',\n    templateUrl: './flexible-text.component.html',\n    providers: [TooltipService, UpdateHostClassService]\n})\nexport class ThyFlexibleTextComponent implements OnInit, AfterContentInit, OnDestroy {\n    isOverflow = false;\n\n    content: string | TemplateRef<HTMLElement>;\n\n    placement: ThyPlacement;\n\n    containerClass: string;\n\n    subscription: Subscription | null = null;\n\n    @Input('thyTooltipTrigger') trigger: 'hover' | 'focus' | 'click';\n\n    @Input('thyContainerClass')\n    get thyContainerClass(): string {\n        return this.containerClass;\n    }\n\n    set thyContainerClass(value: string) {\n        this.containerClass = value;\n        this.updateContainerClass();\n    }\n\n    @Input('thyTooltipContent') set thyContent(value: string | TemplateRef<HTMLElement>) {\n        this.content = value;\n        if (this.tooltipService.thyTooltipDirective) {\n            this.tooltipService.thyTooltipDirective.content = this.content;\n        }\n    }\n\n    @Input('thyTooltipPlacement') set thyPlacement(value: ThyPlacement) {\n        this.placement = value;\n        if (this.tooltipService.thyTooltipDirective) {\n            this.tooltipService.thyTooltipDirective.placement = this.placement;\n        }\n    }\n\n    constructor(\n        private elementRef: ElementRef,\n        private viewContainerRef: ViewContainerRef,\n        public tooltipService: TooltipService,\n        private updateHostClassService: UpdateHostClassService,\n        private contentObserver: ContentObserver\n    ) {\n        this.updateHostClassService.initializeElement(this.elementRef);\n    }\n\n    ngOnInit() {\n        this.updateContainerClass();\n        this.tooltipService.attach(this.elementRef, this.viewContainerRef, this.trigger);\n        if (this.placement) {\n            this.tooltipService.thyTooltipDirective.placement = this.placement;\n        }\n        this.tooltipService.thyTooltipDirective.content = this.content;\n        this.tooltipService.thyTooltipDirective.thyTooltipDisabled = true;\n    }\n\n    ngAfterContentInit() {\n        this.applyOverflow();\n        this.subscription = this.contentObserver\n            .observe(this.elementRef)\n            .pipe(debounceTime(100))\n            .subscribe((value: MutationRecord[]) => {\n                this.applyOverflow();\n            });\n    }\n\n    ngOnDestroy() {\n        this.tooltipService.detach();\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n\n    applyOverflow() {\n        const nativeElement = this.elementRef.nativeElement;\n        if (nativeElement.clientWidth < nativeElement.scrollWidth) {\n            this.isOverflow = true;\n        } else {\n            this.isOverflow = false;\n        }\n        this.tooltipService.thyTooltipDirective.thyTooltipDisabled = !this.isOverflow;\n    }\n\n    updateContainerClass() {\n        const containerClass = isUndefinedOrNull(this.containerClass) ? 'flexible-text-container' : this.containerClass;\n        const flexibleTextClass = {\n            'text-truncate': true,\n            [containerClass]: containerClass !== ''\n        };\n        this.updateHostClassService.updateClassByMap(flexibleTextClass);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThyFlexibleTextComponent } from './flexible-text.component';\nimport { ThyTooltipModule } from 'ngx-tethys/tooltip';\nimport { ObserversModule } from '@angular/cdk/observers';\n\n@NgModule({\n    declarations: [ThyFlexibleTextComponent],\n    imports: [CommonModule, ThyTooltipModule, ObserversModule],\n    exports: [ThyFlexibleTextComponent]\n})\nexport class ThyFlexibleTextModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}