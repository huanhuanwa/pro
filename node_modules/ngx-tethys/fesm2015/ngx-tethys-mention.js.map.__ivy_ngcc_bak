{"version":3,"file":"ngx-tethys-mention.js","sources":["../../src/mention/suggestions/suggestions.component.ts","../../src/mention/caret-positioner.ts","../../src/mention/adapter/adapter.ts","../../src/mention/adapter/textarea.adapter.ts","../../src/mention/adapter/editable.adapter.ts","../../src/mention/adapter/index.ts","../../src/mention/mention.directive.ts","../../src/mention/mention.module.ts","../../src/mention/ngx-tethys-mention.ts"],"sourcesContent":["import { Component, OnInit, OnDestroy, HostBinding, ElementRef, NgZone } from '@angular/core';\nimport { Subject, Observable, of } from 'rxjs';\nimport { ThySelectionListChange } from 'ngx-tethys/list';\nimport { MentionDefaultDataItem, Mention, MentionSuggestionSelectEvent } from '../interfaces';\nimport { debounceTime, switchMap, catchError, take } from 'rxjs/operators';\nimport { SeekQueryResult } from '../adapter/adapter';\nimport { ThyPopoverRef } from 'ngx-tethys/popover';\n\n@Component({\n    selector: 'thy-mention-suggestions',\n    templateUrl: './suggestions.component.html'\n})\nexport class ThyMentionSuggestionsComponent<TItem = MentionDefaultDataItem> implements OnInit, OnDestroy {\n    data: TItem[];\n\n    mention: Mention<TItem>;\n\n    suggestionSelect$ = new Subject<MentionSuggestionSelectEvent>();\n\n    debounce = 150;\n\n    loadingDone = true;\n\n    private search$ = new Subject<SeekQueryResult>();\n\n    @HostBinding('class.thy-mention-suggestions') suggestionsClass = true;\n\n    constructor(public elementRef: ElementRef<HTMLElement>, private ngZone: NgZone, private popoverRef: ThyPopoverRef<any>) {\n        this.search$\n            .pipe(\n                switchMap(query => {\n                    const data = this.mention.search(query.term, this.mention.data);\n                    if (data instanceof Observable) {\n                        this.loadingDone = false;\n                        return (data as Observable<TItem[]>).pipe(debounceTime(this.debounce));\n                    } else {\n                        return of(data as TItem[]);\n                    }\n                }),\n                catchError(() => {\n                    this.loadingDone = false;\n                    return [];\n                })\n            )\n            .subscribe(data => {\n                this.loadingDone = true;\n                this.data = data || [];\n\n                if (this.popoverRef) {\n                    if (this.mention.autoClose && this.data.length === 0) {\n                        this.popoverRef.close();\n                    }\n                    this.ngZone.onStable.pipe(take(1)).subscribe(() => {\n                        this.popoverRef.updatePosition();\n                    });\n                }\n            });\n    }\n\n    ngOnInit(): void {\n        if (this.mention.popoverClass) {\n            this.elementRef.nativeElement.classList.add(this.mention.popoverClass);\n        }\n    }\n\n    search(query: SeekQueryResult) {\n        this.search$.next(query);\n    }\n\n    select(item: TItem, event: Event) {\n        this.suggestionSelect$.next({\n            event,\n            item\n        });\n    }\n\n    selectionChange(event: ThySelectionListChange<TItem>) {\n        this.select(event.value, event.event);\n    }\n\n    ngOnDestroy() {\n        this.search$.next();\n        this.search$.complete();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { getElementOffset } from 'ngx-tethys/util';\n\nexport interface CaretCoordinates {\n    top: number;\n    left: number;\n    height: number;\n}\n\nexport interface CaretOptions {\n    debug: boolean;\n}\n\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\nconst properties = [\n    'direction', // RTL support\n    'boxSizing',\n    'width', // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n    'height',\n    'overflowX',\n    'overflowY', // copy the scrollbar for IE\n\n    'borderTopWidth',\n    'borderRightWidth',\n    'borderBottomWidth',\n    'borderLeftWidth',\n    'borderStyle',\n\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n    'fontStyle',\n    'fontVariant',\n    'fontWeight',\n    'fontStretch',\n    'fontSize',\n    'fontSizeAdjust',\n    'lineHeight',\n    'fontFamily',\n\n    'textAlign',\n    'textTransform',\n    'textIndent',\n    'textDecoration', // might not make a difference, but better be safe\n\n    'letterSpacing',\n    'wordSpacing',\n\n    'tabSize',\n    'MozTabSize'\n];\n\nconst isBrowser = typeof window !== 'undefined';\nconst isFirefox = isBrowser && window['mozInnerScreenX'] != null;\n\nexport type InputOrTextAreaElement = HTMLInputElement | HTMLTextAreaElement;\nexport type AllElement = InputOrTextAreaElement | HTMLElement;\n\nexport class CaretPositioner {\n    // get caret coordinates in input or textarea\n    // copy from repo: https://github.com/component/textarea-caret-position\n    static getTextareaCaretCoordinates(element: InputOrTextAreaElement, position: number, options?: CaretOptions): CaretCoordinates {\n        if (!isBrowser) {\n            throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n        }\n\n        const debug = (options && options.debug) || false;\n        if (debug) {\n            const el = document.querySelector('#input-textarea-caret-position-mirror-div');\n            if (el) {\n                el.parentNode.removeChild(el);\n            }\n        }\n\n        // The mirror div will replicate the textarea's style\n        const div = document.createElement('div');\n        div.id = 'input-textarea-caret-position-mirror-div';\n        document.body.appendChild(div);\n\n        const style = div.style;\n        const computed = window.getComputedStyle ? window.getComputedStyle(element) : element['currentStyle']; // currentStyle for IE < 9\n        const isInput = element.nodeName === 'INPUT';\n\n        // Default textarea styles\n        style.whiteSpace = 'pre-wrap';\n        if (!isInput) {\n            style.wordWrap = 'break-word'; // only for textarea-s\n        }\n\n        // Position off-screen\n        style.position = 'absolute'; // required to return coordinates properly\n        if (!debug) {\n            style.visibility = 'hidden'; // not 'display: none' because we want rendering\n        }\n        // Transfer the element's properties to the div\n        properties.forEach(function(prop) {\n            if (isInput && prop === 'lineHeight') {\n                // Special case for <input>s because text is rendered centered and line height may be != height\n                if (computed.boxSizing === 'border-box') {\n                    const height = parseInt(computed.height, 10);\n                    const outerHeight =\n                        parseInt(computed.paddingTop, 10) +\n                        parseInt(computed.paddingBottom, 10) +\n                        parseInt(computed.borderTopWidth, 10) +\n                        parseInt(computed.borderBottomWidth, 10);\n                    const targetHeight = outerHeight + parseInt(computed.lineHeight, 10);\n                    if (height > targetHeight) {\n                        style.lineHeight = height - outerHeight + 'px';\n                    } else if (height === targetHeight) {\n                        style.lineHeight = computed.lineHeight;\n                    } else {\n                        style.lineHeight = '0';\n                    }\n                } else {\n                    style.lineHeight = computed.height;\n                }\n            } else {\n                style[prop] = computed[prop];\n            }\n        });\n\n        if (isFirefox) {\n            // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n            if (element.scrollHeight > parseInt(computed.height, 10)) {\n                style.overflowY = 'scroll';\n            }\n        } else {\n            style.overflow = 'hidden'; // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n        }\n\n        div.textContent = element.value.substring(0, position);\n        // The second special handling for input type=\"text\" vs textarea:\n        // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n        if (isInput) {\n            div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n        }\n\n        const span = document.createElement('span');\n        // Wrapping must be replicated *exactly*, including when a long word gets\n        // onto the next line, with whitespace at the end of the line before (#7).\n        // The  *only* reliable way to do that is to copy the *entire* rest of the\n        // textarea's content into the <span> created at the caret position.\n        // For inputs, just '.' would be enough, but no need to bother.\n        span.textContent = element.value.substring(position) || '.'; // || because a completely empty faux span doesn't render at all\n        div.appendChild(span);\n\n        const coordinates = {\n            top: span.offsetTop + parseInt(computed['borderTopWidth'], 10),\n            left: span.offsetLeft + parseInt(computed['borderLeftWidth'], 10),\n            height: parseInt(computed['lineHeight'], 10)\n        };\n\n        if (debug) {\n            span.style.backgroundColor = '#aaa';\n        } else {\n            document.body.removeChild(div);\n        }\n\n        return coordinates;\n    }\n\n    static getEditableCaretCoordinates(element: HTMLElement): CaretCoordinates {\n        if (window.getSelection().rangeCount) {\n            const range = window.getSelection().getRangeAt(0);\n            const rect = range.getBoundingClientRect();\n            // using the start or endcontainer is... uhm yeah... difficult...? :D\n            let height: string | number =\n                range.startContainer.nodeType === 1\n                    ? getComputedStyle(range.startContainer as Element).lineHeight\n                    : getComputedStyle(range.startContainer.parentNode as Element).lineHeight;\n            if (isNaN(height as any)) {\n                let node = range.startContainer as HTMLElement;\n                if (range.startContainer.nodeType !== 1) {\n                    node = node.parentNode as HTMLElement;\n                }\n                const current = node.style.lineHeight;\n                node.style.lineHeight = '1em';\n                height = parseInt(getComputedStyle(node).lineHeight, 10);\n                node.style.lineHeight = current != null ? current : '';\n                if (!node.getAttribute('style').length) {\n                    // clean up if empty\n                    node.removeAttribute('style');\n                }\n            }\n            const editableRect = element.getBoundingClientRect();\n            return {\n                top: rect.top - editableRect.top,\n                left: rect.left - editableRect.left,\n                height: height as number\n            };\n        } else {\n            return {\n                top: 0,\n                left: 0,\n                height: 0\n            };\n        }\n    }\n\n    static getCaretCoordinates(element: AllElement, position: number, options?: CaretOptions) {\n        const isInput = ['INPUT', 'TEXTAREA'].indexOf(element.nodeName) >= 0;\n        if (isInput) {\n            return this.getTextareaCaretCoordinates(element as InputOrTextAreaElement, position, options);\n        } else {\n            return this.getEditableCaretCoordinates(element);\n        }\n    }\n\n    // get caret position in view window\n    static getCaretPosition(element: AllElement, position: number, options?: CaretOptions) {\n        const coordinates = CaretPositioner.getCaretCoordinates(element, position, options);\n        const elementOffset = getElementOffset(element);\n        return {\n            top: coordinates.top + elementOffset.top,\n            left: coordinates.left + elementOffset.left\n        };\n    }\n}\n","import { MentionDefaultDataItem, Mention } from '../interfaces';\n\nexport interface SeekQueryResult {\n    term: string;\n    start: number;\n    end: number;\n}\n\nexport interface MatchedMention<T = MentionDefaultDataItem> {\n    query: SeekQueryResult;\n    mention: Mention<T>;\n}\n\nexport type MentionInputorElement = HTMLTextAreaElement | HTMLInputElement;\nexport abstract class MentionAdapter {\n    inputor: MentionInputorElement;\n\n    matchedMention: MatchedMention;\n\n    constructor(inputor: MentionInputorElement) {\n        this.inputor = inputor;\n    }\n\n    abstract seekQuery(event: Event, mention: Mention): SeekQueryResult;\n\n    abstract insertMention(item: MentionDefaultDataItem): string;\n\n    lookup(event: Event, mentions: Mention[]) {\n        this.matchedMention = null;\n        for (const mention of mentions) {\n            const query = this.seekQuery(event, mention);\n            if (query) {\n                this.matchedMention = {\n                    query: query,\n                    mention: mention\n                };\n                break;\n            }\n        }\n        return this.matchedMention;\n    }\n}\n","import { MentionAdapter, MentionInputorElement, SeekQueryResult } from './adapter';\nimport { Mention, MentionDefaultDataItem } from '../interfaces';\n\nexport class TextareaMentionAdapter extends MentionAdapter {\n    inputor: MentionInputorElement;\n\n    constructor(inputor: MentionInputorElement) {\n        super(inputor);\n    }\n\n    public seekQuery(event: Event, mention: Mention): SeekQueryResult {\n        const selectionStart = this.inputor.selectionStart;\n        const value = this.inputor.value.replace(/[\\r\\n]/g, ' ');\n        // @123 | @456 => 0(start) => @123\n        // @123 @456 | => 5(start) => @456\n        const start = value.lastIndexOf(mention.trigger, selectionStart);\n        const fistSpaceIndexFromStart = value.indexOf(' ', selectionStart);\n        const end = fistSpaceIndexFromStart > -1 ? fistSpaceIndexFromStart : value.length;\n        const termWithTrigger = value.substring(start, end);\n        const startBeforeHasSpace = start > 0 && value[start - 1] === ' ';\n        if ((startBeforeHasSpace || start === 0) && !termWithTrigger.includes(' ') && !termWithTrigger.includes(mention.trigger, 1)) {\n            return {\n                start: start,\n                end: end,\n                term: termWithTrigger.substring(mention.trigger.length)\n            };\n        } else {\n            return null;\n        }\n    }\n\n    public insertMention(item: MentionDefaultDataItem): string {\n        if (!this.matchedMention) {\n            throw new Error(`matchedMention is null`);\n        }\n        const insertValue = this.getInsertValue(item);\n        const value: string = this.inputor.value;\n        const newValue = [\n            value.slice(0, this.matchedMention.query.start),\n            insertValue,\n            value.slice(this.matchedMention.query.end, value.length)\n        ].join('');\n        this.inputor.value = newValue;\n        this.focus(this.matchedMention.query.start + insertValue.length);\n        return newValue;\n    }\n\n    private getInsertValue(item: MentionDefaultDataItem) {\n        if (this.matchedMention.mention.insertTransform) {\n            return this.matchedMention.mention.insertTransform(item).trim() + ' ';\n        } else {\n            return `${this.matchedMention.mention.trigger}${item['name']}`.trim() + ' ';\n        }\n    }\n\n    private focus(caretPosition?: number): void {\n        this.inputor.focus();\n        this.inputor.setSelectionRange(caretPosition, caretPosition);\n    }\n\n    private isEditable() {\n        return !this.inputor.readOnly && !this.inputor.disabled;\n    }\n}\n","import { MentionAdapter, MentionInputorElement, SeekQueryResult } from './adapter';\nimport { Mention, MentionDefaultDataItem } from '../interfaces';\n\nexport class EditableMentionAdapter extends MentionAdapter {\n    inputor: MentionInputorElement;\n\n    constructor(inputor: MentionInputorElement) {\n        super(inputor);\n    }\n\n    seekQuery(event: Event, mention: Mention): SeekQueryResult {\n        return null;\n    }\n\n    insertMention(item: MentionDefaultDataItem): string {\n        throw new Error('Method not implemented.');\n    }\n}\n","import { isInputOrTextarea } from 'ngx-tethys/util';\nimport { Mention } from '../interfaces';\nimport { TextareaMentionAdapter } from './textarea.adapter';\nimport { EditableMentionAdapter } from './editable.adapter';\nimport { MentionInputorElement } from './adapter';\n\nexport function createMentionAdapter(element: MentionInputorElement) {\n    if (isInputOrTextarea(element)) {\n        return new TextareaMentionAdapter(element);\n    } else {\n        element.contentEditable = 'true';\n        return new EditableMentionAdapter(element);\n    }\n}\n\nexport * from './editable.adapter';\nexport * from './textarea.adapter';\nexport * from './adapter';\n","import {\n    Directive,\n    ElementRef,\n    Input,\n    OnInit,\n    EventEmitter,\n    Output,\n    NgZone,\n    Optional,\n    ChangeDetectorRef,\n    forwardRef,\n    Self\n} from '@angular/core';\nimport { NgModel, NgControl, FormControl } from '@angular/forms';\nimport { Mention, MentionSuggestionSelectEvent, MentionDefaultDataItem } from './interfaces';\nimport { ThyPopover, ThyPopoverRef, ThyPopoverConfig } from 'ngx-tethys/popover';\nimport { ThyMentionSuggestionsComponent } from './suggestions/suggestions.component';\nimport { CaretPositioner } from './caret-positioner';\nimport { MentionAdapter, createMentionAdapter, MatchedMention, MentionInputorElement } from './adapter';\n\nconst SUGGESTION_BACKDROP_CLASS = 'thy-mention-suggestions-backdrop';\n\nconst POPOVER_DEFAULT_CONFIG = {\n    backdropClass: SUGGESTION_BACKDROP_CLASS,\n    placement: 'bottomLeft'\n};\n\nconst DEFAULT_MENTION_CONFIG: Partial<Mention> = {\n    autoClose: true,\n    emptyText: '无匹配数据，按空格完成输入',\n    search: (term: string, data: MentionDefaultDataItem[]) => {\n        return data.filter(item => {\n            return !item.name || item.name.toLowerCase().includes(term.toLowerCase());\n        });\n    }\n};\n\n@Directive({\n    selector: '[thyMention]',\n    providers: []\n})\nexport class ThyMentionDirective implements OnInit {\n    private adapter: MentionAdapter = null;\n\n    private openedSuggestionsRef: ThyPopoverRef<ThyMentionSuggestionsComponent>;\n\n    private _mentions: Mention<any>[];\n    get mentions() {\n        return this._mentions;\n    }\n\n    @Input('thyMention') set mentions(value: Mention<any>[]) {\n        this._mentions = value;\n        if (this._mentions) {\n            this._mentions = this._mentions.map(mention => {\n                if (!mention.trigger) {\n                    throw new Error(`mention trigger is required`);\n                }\n                return Object.assign({}, DEFAULT_MENTION_CONFIG, mention);\n            });\n        }\n    }\n\n    @Input('thyPopoverConfig') popoverConfig: ThyPopoverConfig;\n\n    @Output('thySelectSuggestion')\n    select = new EventEmitter<MentionSuggestionSelectEvent>();\n\n    constructor(\n        private elementRef: ElementRef<HTMLElement>,\n        private thyPopover: ThyPopover,\n        @Optional() @Self() private ngControl: NgControl\n    ) {\n        this.adapter = createMentionAdapter(elementRef.nativeElement as MentionInputorElement);\n        this.bindEvents();\n    }\n\n    ngOnInit() {}\n\n    bindEvents() {\n        this.elementRef.nativeElement.addEventListener('input', (event: Event) => {\n            this.onInput(event);\n        });\n        this.elementRef.nativeElement.addEventListener('click', (event: Event) => {\n            this.onClick(event);\n        });\n    }\n\n    onClick(event: Event) {\n        this.lookup(event);\n    }\n\n    onInput(event: Event) {\n        this.lookup(event);\n    }\n\n    private lookup(event: Event) {\n        const matched = this.adapter.lookup(event, this.mentions);\n        if (matched) {\n            this.openSuggestions(matched);\n        } else {\n            this.closeSuggestions();\n        }\n    }\n\n    private openSuggestions(matched: MatchedMention) {\n        if (!this.openedSuggestionsRef) {\n            const inputElement = this.elementRef.nativeElement as HTMLInputElement;\n            const position = CaretPositioner.getCaretPosition(inputElement, matched.query.start);\n            const fontSize = parseInt(getComputedStyle(this.elementRef.nativeElement).fontSize, 10);\n            this.openedSuggestionsRef = this.thyPopover.open(\n                ThyMentionSuggestionsComponent,\n                Object.assign({}, POPOVER_DEFAULT_CONFIG, this.popoverConfig, {\n                    origin: this.elementRef,\n                    originPosition: {\n                        x: position.left,\n                        y: position.top,\n                        width: fontSize,\n                        height: fontSize\n                    },\n                    initialState: {\n                        mention: matched.mention\n                    }\n                })\n            );\n            this.openedSuggestionsRef.afterClosed().subscribe(() => {\n                this.openedSuggestionsRef = null;\n            });\n            this.openedSuggestionsRef.componentInstance.suggestionSelect$.subscribe(event => {\n                const newValue = this.adapter.insertMention(event.item);\n                if (this.ngControl && this.ngControl.control) {\n                    this.ngControl.control.setValue(newValue);\n                }\n                this.openedSuggestionsRef.close();\n                this.select.emit(event);\n            });\n        }\n\n        if (this.openedSuggestionsRef) {\n            this.openedSuggestionsRef.componentInstance.search(matched.query);\n        }\n    }\n\n    private closeSuggestions() {\n        if (this.openedSuggestionsRef) {\n            this.openedSuggestionsRef.close();\n        }\n    }\n\n    private isEditable() {\n        const element = this.elementRef.nativeElement as HTMLInputElement | HTMLTextAreaElement;\n        return !element.readOnly && !element.disabled;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ThyMentionDirective } from './mention.directive';\nimport { ThyMentionSuggestionsComponent } from './suggestions/suggestions.component';\nimport { ThyPopoverModule } from 'ngx-tethys/popover';\nimport { ThyListModule } from 'ngx-tethys/list';\nimport { ThyLoadingModule } from 'ngx-tethys/loading';\nimport { ThyEmptyModule } from 'ngx-tethys/empty';\n\n@NgModule({\n    declarations: [ThyMentionDirective, ThyMentionSuggestionsComponent],\n    imports: [CommonModule, FormsModule, ThyPopoverModule, ThyListModule, ThyLoadingModule],\n    exports: [ThyMentionDirective],\n    providers: [],\n    entryComponents: [ThyMentionSuggestionsComponent]\n})\nexport class ThyMentionModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}