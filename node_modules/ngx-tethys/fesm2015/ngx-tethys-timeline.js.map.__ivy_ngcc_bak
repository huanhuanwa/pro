{"version":3,"file":"ngx-tethys-timeline.js","sources":["../../src/timeline/timeline.service.ts","../../src/timeline/timeline-item.component.ts","../../src/timeline/timeline.component.ts","../../src/timeline/timeline.module.ts","../../src/timeline/ngx-tethys-timeline.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\n\n@Injectable()\nexport class ThyTimelineService {\n    check$ = new ReplaySubject(1);\n    markForCheck(): void {\n        this.check$.next();\n    }\n}\n","import {\n    Component,\n    Input,\n    HostBinding,\n    OnInit,\n    OnChanges,\n    ContentChild,\n    TemplateRef,\n    ViewChild,\n    ChangeDetectorRef,\n    ChangeDetectionStrategy,\n    SimpleChanges\n} from '@angular/core';\nimport { ThyTimeMode } from './timeline.component';\nimport { ThyTimelineService } from './timeline.service';\n\nexport type thyColor = 'primary' | 'success' | 'warning' | 'danger' | 'info';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'thy-timeline-item',\n    templateUrl: './timeline-item.component.html',\n    exportAs: 'ThyTimelineItem'\n})\nexport class ThyTimelineItemComponent implements OnInit, OnChanges {\n    @ViewChild('timelineItem', { static: false }) template: TemplateRef<void>;\n\n    @HostBinding('class') className: string;\n\n    public color: thyColor = 'primary';\n\n    public isLast = false;\n\n    public isFirst = false;\n\n    public position: ThyTimeMode;\n\n    public reverse: Boolean = false;\n\n    @Input()\n    set thyColor(value: thyColor) {\n        if (value) {\n            this.color = value;\n        }\n    }\n\n    @Input() thyPosition: ThyTimeMode;\n\n    @ContentChild('dot', { static: false }) dot: TemplateRef<any>;\n\n    @ContentChild('description', { static: false }) description: TemplateRef<any>;\n\n    constructor(private cdr: ChangeDetectorRef, private timelineService: ThyTimelineService) {}\n\n    detectChanges(): void {\n        this.cdr.detectChanges();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.timelineService.markForCheck();\n    }\n\n    ngOnInit() {}\n}\n","import {\n    Component,\n    Input,\n    HostBinding,\n    ContentChildren,\n    QueryList,\n    AfterContentInit,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    SimpleChanges,\n    SimpleChange,\n    ChangeDetectorRef,\n    ViewEncapsulation,\n    ChangeDetectionStrategy\n} from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { ThyTimelineItemComponent } from './timeline-item.component';\nimport { ThyTimelineService } from './timeline.service';\nimport { Subject } from 'rxjs';\n\nexport type ThyTimeMode = 'left' | 'right' | 'center';\n\nexport enum ThyTimeModes {\n    left = 'left',\n    right = 'right',\n    center = 'center'\n}\n\nexport type ThyTimeDirection = 'horizontal' | 'vertical';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    selector: 'thy-timeline',\n    providers: [ThyTimelineService],\n    template: `\n        <ng-container>\n            <ng-container *ngFor=\"let item of timelineItems\">\n                <ng-template [ngTemplateOutlet]=\"item.template\"></ng-template>\n            </ng-container>\n            <ng-content></ng-content>\n        </ng-container>\n    `\n})\nexport class ThyTimelineComponent implements OnInit, AfterContentInit, OnChanges, OnDestroy {\n    @Input() thyReverse: Boolean;\n\n    @Input() thyMode: ThyTimeMode;\n\n    @Input() thyDirection: ThyTimeDirection = 'vertical';\n\n    public timelineItems: ThyTimelineItemComponent[] = [];\n\n    private destroy$ = new Subject<void>();\n\n    @HostBinding(`class.thy-timeline`) isTimeline = true;\n    @HostBinding(`class.thy-timeline-right`) rightTimeline = false;\n    @HostBinding(`class.thy-timeline-center`) centerTimeline = false;\n    @HostBinding(`class.thy-timeline-template`) templateTimeline = false;\n    @HostBinding(`class.thy-timeline-horizontal`) horizontal = false;\n\n    @ContentChildren(ThyTimelineItemComponent)\n    listOfItems: QueryList<ThyTimelineItemComponent>;\n\n    constructor(private cdr: ChangeDetectorRef, private timelineService: ThyTimelineService) {}\n\n    ngOnChanges(changes: SimpleChanges): void {\n        const { thyMode, thyReverse } = changes;\n        if (thyMode && !this.horizontal) {\n            if (thyMode.currentValue === 'right') {\n                this.rightTimeline = !this.templateTimeline;\n                this.centerTimeline = false;\n            } else if (thyMode.currentValue === 'center') {\n                this.centerTimeline = true;\n                this.rightTimeline = false;\n            } else {\n                this.rightTimeline = false;\n                this.centerTimeline = false;\n            }\n        }\n        if ((simpleChangeActivated(thyMode) && !this.horizontal) || simpleChangeActivated(thyReverse)) {\n            this.updateChildren();\n        }\n    }\n\n    ngOnInit() {\n        this.horizontal = this.thyDirection === 'horizontal' ? true : false;\n        this.timelineService.check$.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.cdr.markForCheck();\n        });\n    }\n\n    ngAfterContentInit() {\n        this.updateChildren();\n        this.listOfItems.changes.subscribe(() => {\n            this.updateChildren();\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n\n    private updateChildren(): void {\n        if (this.listOfItems && this.listOfItems.length) {\n            const length = this.listOfItems.length;\n            this.listOfItems.forEach((item, index) => {\n                item.isLast = !this.thyReverse ? index === length - 1 : index === 0;\n                item.isFirst = this.thyReverse ? index === length - 1 : index === 0;\n                item.reverse = this.thyReverse;\n                if (!this.horizontal) {\n                    item.position = getTimelineItemPosition(index, this.thyMode);\n                }\n                if (item.description || (item.thyPosition && !this.horizontal)) {\n                    this.templateTimeline = true;\n                }\n                item.detectChanges();\n            });\n            this.timelineItems = this.thyReverse ? this.listOfItems.toArray().reverse() : this.listOfItems.toArray();\n        }\n        this.cdr.markForCheck();\n    }\n}\nfunction simpleChangeActivated(simpleChange?: SimpleChange): boolean {\n    return !!(simpleChange && (simpleChange.previousValue !== simpleChange.currentValue || simpleChange.isFirstChange()));\n}\n\nfunction getTimelineItemPosition(index: number, mode: ThyTimeMode): ThyTimeMode | undefined {\n    return mode === 'left' ? 'left' : mode === 'right' ? 'right' : mode === 'center' && index % 2 === 0 ? 'left' : 'right';\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThySharedModule } from 'ngx-tethys/shared';\nimport { ThyIconModule } from 'ngx-tethys/icon';\nimport { ThyTimelineComponent } from './timeline.component';\nimport { ThyTimelineItemComponent } from './timeline-item.component';\n\n@NgModule({\n    declarations: [ThyTimelineComponent, ThyTimelineItemComponent],\n    entryComponents: [],\n    imports: [CommonModule, ThySharedModule, ThyIconModule],\n    exports: [ThyTimelineComponent, ThyTimelineItemComponent],\n    providers: []\n})\nexport class ThyTimelineModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}