{"version":3,"file":"ngx-tethys-progress.js","sources":["../../src/progress/bar/progress-bar.component.ts","../../src/progress/progress.component.ts","../../src/progress/progress.module.ts","../../src/progress/ngx-tethys-progress.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, HostBinding, ElementRef, ViewEncapsulation, InjectionToken, Inject, Host, TemplateRef } from '@angular/core';\nimport { ThyProgressTypes } from '../interfaces';\nimport { UpdateHostClassService } from 'ngx-tethys/core';\n\nexport interface ThyParentProgress {\n    max: number;\n    bars: ThyProgressBarComponent[];\n}\nexport const THY_PROGRESS_COMPONENT = new InjectionToken<ThyParentProgress>('THY_PROGRESS_COMPONENT');\n\n@Component({\n    selector: 'thy-progress-bar',\n    templateUrl: './progress-bar.component.html',\n    encapsulation: ViewEncapsulation.None,\n    providers: [UpdateHostClassService]\n})\nexport class ThyProgressBarComponent {\n    // private type: ProgressTypes;\n\n    private value: number;\n\n    @HostBinding(`class.progress-bar`) isProgressBar = true;\n\n    @HostBinding('style.width.%') percent = 0;\n\n    @HostBinding('style.background-color') color = '';\n\n    @Input() thyTips: string | TemplateRef<HTMLElement>;\n\n    @Input() set thyType(type: ThyProgressTypes) {\n        // this.type = type;\n        this.updateHostClassService.updateClass(type ? [`progress-bar-${type}`, `bg-${type}`] : []);\n    }\n\n    @Input() set thyValue(value: number) {\n        if (!value && value !== 0) {\n            return;\n        }\n        this.value = value;\n        this.recalculatePercentage();\n    }\n\n    @Input() set thyColor(color: string) {\n        this.color = color || '';\n    }\n\n    constructor(\n        private updateHostClassService: UpdateHostClassService,\n        elementRef: ElementRef,\n        @Inject(THY_PROGRESS_COMPONENT) private progress: ThyParentProgress\n    ) {\n        updateHostClassService.initializeElement(elementRef.nativeElement);\n    }\n\n    recalculatePercentage(): void {\n        this.percent = +((this.value / this.progress.max) * 100).toFixed(2);\n\n        // if (this.progress && this.progress.bars) {\n        //     const totalPercentage = this.progress.bars.reduce(function(total: number, bar): number {\n        //         return total + bar.percent;\n        //     }, 0);\n\n        //     if (totalPercentage > 100) {\n        //         this.percent -= totalPercentage - 100;\n        //     }\n        // }\n    }\n}\n","import {\n    Component,\n    Input,\n    HostBinding,\n    ChangeDetectionStrategy,\n    ElementRef,\n    ViewEncapsulation,\n    ViewChildren,\n    QueryList,\n    TemplateRef\n} from '@angular/core';\nimport { ThyProgressTypes, ThyStackedValue } from './interfaces';\nimport { UpdateHostClassService } from 'ngx-tethys/core';\nimport { THY_PROGRESS_COMPONENT, ThyProgressBarComponent, ThyParentProgress } from './bar/progress-bar.component';\n\n@Component({\n    selector: 'thy-progress',\n    templateUrl: './progress.component.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    providers: [\n        UpdateHostClassService,\n        {\n            provide: THY_PROGRESS_COMPONENT,\n            useExisting: ThyProgressComponent\n        }\n    ]\n})\nexport class ThyProgressComponent implements ThyParentProgress {\n    value: number | ThyStackedValue[];\n\n    bars: ThyProgressBarComponent[] = [];\n\n    @HostBinding('attr.max') max = 100;\n\n    @HostBinding(`class.progress-stacked`) isStacked = false;\n\n    @HostBinding(`class.progress`) isProgress = true;\n\n    @ViewChildren(ThyProgressBarComponent)\n    set barsQueryList(value: QueryList<ThyProgressBarComponent>) {\n        this.bars = value.toArray();\n    }\n\n    @Input() thyType: ThyProgressTypes;\n\n    @Input() thyTips: string | TemplateRef<HTMLElement>;\n\n    @Input() set thyValue(value: number | ThyStackedValue[]) {\n        this.isStacked = Array.isArray(value);\n        this.value = value;\n\n        // 自动求和计算 max\n        if (this.isStacked) {\n            this.thyMax = (value as ThyStackedValue[]).reduce((total, item) => {\n                return total + item.value;\n            }, 0);\n        }\n    }\n\n    @Input() set thySize(size: string) {\n        this.updateHostClassService.updateClass(size ? [`progress-${size}`] : []);\n    }\n\n    @Input() set thyMax(max: number) {\n        this.max = max;\n        this.bars.forEach(bar => {\n            bar.recalculatePercentage();\n        });\n    }\n\n    constructor(private updateHostClassService: UpdateHostClassService, elementRef: ElementRef) {\n        this.updateHostClassService.initializeElement(elementRef);\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { ThyTooltipModule } from 'ngx-tethys/tooltip';\nimport { ThyProgressBarComponent } from './bar/progress-bar.component';\nimport { ThyProgressComponent } from './progress.component';\n\n@NgModule({\n    declarations: [ThyProgressComponent, ThyProgressBarComponent],\n    imports: [CommonModule, ThyTooltipModule],\n    exports: [ThyProgressComponent]\n})\nexport class ThyProgressModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}