{"version":3,"file":"ngx-tethys-flexible-text.js","sources":["../../src/flexible-text/flexible-text.component.ts","../../src/flexible-text/flexible-text.module.ts","../../src/flexible-text/ngx-tethys-flexible-text.ts"],"sourcesContent":["import { Component, Input, TemplateRef, ElementRef, OnInit, ViewContainerRef, OnDestroy, AfterContentInit } from '@angular/core';\nimport { timer, Subject, Subscription } from 'rxjs';\nimport { TooltipService } from 'ngx-tethys/tooltip';\nimport { UpdateHostClassService } from 'ngx-tethys/core';\nimport { ContentObserver } from '@angular/cdk/observers';\nimport { debounceTime } from 'rxjs/operators';\nimport { ThyPlacement } from 'ngx-tethys/core';\nimport { isUndefinedOrNull } from 'ngx-tethys/util';\n\n@Component({\n    selector: 'thy-flexible-text,[thyFlexibleText]',\n    exportAs: 'thyFlexibleText',\n    templateUrl: './flexible-text.component.html',\n    providers: [TooltipService, UpdateHostClassService]\n})\nexport class ThyFlexibleTextComponent implements OnInit, AfterContentInit, OnDestroy {\n    isOverflow = false;\n\n    content: string | TemplateRef<HTMLElement>;\n\n    placement: ThyPlacement;\n\n    containerClass: string;\n\n    subscription: Subscription | null = null;\n\n    @Input('thyTooltipTrigger') trigger: 'hover' | 'focus' | 'click';\n\n    @Input('thyContainerClass')\n    get thyContainerClass(): string {\n        return this.containerClass;\n    }\n\n    set thyContainerClass(value: string) {\n        this.containerClass = value;\n        this.updateContainerClass();\n    }\n\n    @Input('thyTooltipContent') set thyContent(value: string | TemplateRef<HTMLElement>) {\n        this.content = value;\n        if (this.tooltipService.thyTooltipDirective) {\n            this.tooltipService.thyTooltipDirective.content = this.content;\n        }\n    }\n\n    @Input('thyTooltipPlacement') set thyPlacement(value: ThyPlacement) {\n        this.placement = value;\n        if (this.tooltipService.thyTooltipDirective) {\n            this.tooltipService.thyTooltipDirective.placement = this.placement;\n        }\n    }\n\n    constructor(\n        private elementRef: ElementRef,\n        private viewContainerRef: ViewContainerRef,\n        public tooltipService: TooltipService,\n        private updateHostClassService: UpdateHostClassService,\n        private contentObserver: ContentObserver\n    ) {\n        this.updateHostClassService.initializeElement(this.elementRef);\n    }\n\n    ngOnInit() {\n        this.updateContainerClass();\n        this.tooltipService.attach(this.elementRef, this.viewContainerRef, this.trigger);\n        if (this.placement) {\n            this.tooltipService.thyTooltipDirective.placement = this.placement;\n        }\n        this.tooltipService.thyTooltipDirective.content = this.content;\n        this.tooltipService.thyTooltipDirective.thyTooltipDisabled = true;\n    }\n\n    ngAfterContentInit() {\n        this.applyOverflow();\n        this.subscription = this.contentObserver\n            .observe(this.elementRef)\n            .pipe(debounceTime(100))\n            .subscribe((value: MutationRecord[]) => {\n                this.applyOverflow();\n            });\n    }\n\n    ngOnDestroy() {\n        this.tooltipService.detach();\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n\n    applyOverflow() {\n        const nativeElement = this.elementRef.nativeElement;\n        if (nativeElement.clientWidth < nativeElement.scrollWidth) {\n            this.isOverflow = true;\n        } else {\n            this.isOverflow = false;\n        }\n        this.tooltipService.thyTooltipDirective.thyTooltipDisabled = !this.isOverflow;\n    }\n\n    updateContainerClass() {\n        const containerClass = isUndefinedOrNull(this.containerClass) ? 'flexible-text-container' : this.containerClass;\n        const flexibleTextClass = {\n            'text-truncate': true,\n            [containerClass]: containerClass !== ''\n        };\n        this.updateHostClassService.updateClassByMap(flexibleTextClass);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThyFlexibleTextComponent } from './flexible-text.component';\nimport { ThyTooltipModule } from 'ngx-tethys/tooltip';\nimport { ObserversModule } from '@angular/cdk/observers';\n\n@NgModule({\n    declarations: [ThyFlexibleTextComponent],\n    imports: [CommonModule, ThyTooltipModule, ObserversModule],\n    exports: [ThyFlexibleTextComponent]\n})\nexport class ThyFlexibleTextModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}