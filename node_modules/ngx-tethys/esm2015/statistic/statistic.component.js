import { Component, Input, HostBinding, ElementRef, TemplateRef, ContentChild, Renderer2 } from '@angular/core';
import { hexToRgb } from 'ngx-tethys/util';
import { UpdateHostClassService } from 'ngx-tethys/core';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from 'ngx-tethys/core';
import * as ɵngcc2 from '@angular/common';

const _c0 = ["prefix"];
const _c1 = ["value"];
const _c2 = ["title"];
const _c3 = ["suffix"];
function ThyStatisticComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0, 7);
} if (rf & 2) {
    ɵngcc0.ɵɵnextContext();
    const _r6 = ɵngcc0.ɵɵreference(9);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r6);
} }
function ThyStatisticComponent_span_2_span_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r8.thyPrefix);
} }
function ThyStatisticComponent_span_2_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0, 7);
} if (rf & 2) {
    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r9.prefixTemplate);
} }
function ThyStatisticComponent_span_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 8);
    ɵngcc0.ɵɵtemplate(1, ThyStatisticComponent_span_2_span_1_Template, 2, 1, "span", 4);
    ɵngcc0.ɵɵtemplate(2, ThyStatisticComponent_span_2_ng_container_2_Template, 1, 1, "ng-container", 0);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.thyPrefix);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.prefixTemplate);
} }
function ThyStatisticComponent_span_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r2.thyValue);
} }
function ThyStatisticComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0, 7);
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r3.valueTemplate);
} }
function ThyStatisticComponent_span_6_span_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r10.thySuffix);
} }
function ThyStatisticComponent_span_6_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0, 7);
} if (rf & 2) {
    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r11.suffixTemplate);
} }
function ThyStatisticComponent_span_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 9);
    ɵngcc0.ɵɵtemplate(1, ThyStatisticComponent_span_6_span_1_Template, 2, 1, "span", 4);
    ɵngcc0.ɵɵtemplate(2, ThyStatisticComponent_span_6_ng_container_2_Template, 1, 1, "ng-container", 0);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.thySuffix);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.suffixTemplate);
} }
function ThyStatisticComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0, 7);
} if (rf & 2) {
    ɵngcc0.ɵɵnextContext();
    const _r6 = ɵngcc0.ɵɵreference(9);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r6);
} }
function ThyStatisticComponent_ng_template_8_span_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r12.thyTitle);
} }
function ThyStatisticComponent_ng_template_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 10);
    ɵngcc0.ɵɵtemplate(1, ThyStatisticComponent_ng_template_8_span_1_Template, 2, 1, "span", 4);
    ɵngcc0.ɵɵelementContainer(2, 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r7 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r7.thyTitle);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r7.titleTemplate);
} }
export class ThyStatisticComponent {
    constructor(elementRef, updateHostClassService, renderer) {
        this.elementRef = elementRef;
        this.updateHostClassService = updateHostClassService;
        this.renderer = renderer;
        this._initialized = false;
        this.class = true;
        this.thyValueStyle = {};
        this.thyTitlePosition = 'bottom';
        this.updateHostClassService.initializeElement(elementRef.nativeElement);
    }
    set prefix(value) {
        this.prefixTemplate = value;
    }
    set thyPrefixTemplate(value) {
        this.prefixTemplate = value;
    }
    set value(value) {
        this.valueTemplate = value;
    }
    set thyValueTemplate(value) {
        this.valueTemplate = value;
    }
    set title(value) {
        this.titleTemplate = value;
    }
    set thyTitleTemplate(value) {
        this.titleTemplate = value;
    }
    set suffix(value) {
        this.suffixTemplate = value;
    }
    set thySuffixTemplate(value) {
        this.suffixTemplate = value;
    }
    set thyShape(value) {
        this._shape = value;
        if (this._initialized) {
            this._setClassesByType();
        }
    }
    set thySize(value) {
        this._size = value;
        if (this._initialized) {
            this._setClassesByType();
        }
    }
    ngOnInit() {
        this._setClassesByType();
        this._initialized = true;
    }
    setColor(color) {
        this.renderer.setStyle(this.elementRef.nativeElement, 'color', color);
        if (this._shape === 'card') {
            this.renderer.setStyle(this.elementRef.nativeElement, 'border-color', color);
            this.renderer.setStyle(this.elementRef.nativeElement, 'background-color', hexToRgb(color, 0.05));
        }
    }
    _setClassesByType() {
        const classNames = [];
        if (this.thyColor) {
            if (RegExp(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/).test(this.thyColor)) {
                this.setColor(this.thyColor);
            }
            else {
                classNames.push(`thy-statistic-${this.thyColor}`);
            }
        }
        if (this._shape) {
            classNames.push(`thy-statistic-${this._shape}`);
        }
        if (!this._size) {
            this._size = 'default';
        }
        classNames.push(`thy-statistic-${this._size}`);
        this.renderer.setStyle(this.elementRef.nativeElement, 'font-size', this.thySize);
        this.updateHostClassService.updateClass(classNames);
    }
}
ThyStatisticComponent.ɵfac = function ThyStatisticComponent_Factory(t) { return new (t || ThyStatisticComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.UpdateHostClassService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
ThyStatisticComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ThyStatisticComponent, selectors: [["thy-statistic"]], contentQueries: function ThyStatisticComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵstaticContentQuery(dirIndex, _c0, true);
        ɵngcc0.ɵɵstaticContentQuery(dirIndex, _c1, true);
        ɵngcc0.ɵɵstaticContentQuery(dirIndex, _c2, true);
        ɵngcc0.ɵɵstaticContentQuery(dirIndex, _c3, true);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.prefix = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.value = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.title = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.suffix = _t.first);
    } }, hostVars: 2, hostBindings: function ThyStatisticComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("thy-statistic", ctx.class);
    } }, inputs: { thyValueStyle: "thyValueStyle", thyTitlePosition: "thyTitlePosition", thyPrefixTemplate: "thyPrefixTemplate", thyValueTemplate: "thyValueTemplate", thyTitleTemplate: "thyTitleTemplate", thySuffixTemplate: "thySuffixTemplate", thyShape: "thyShape", thySize: "thySize", thyPrefix: "thyPrefix", thyValue: "thyValue", thyTitle: "thyTitle", thySuffix: "thySuffix", thyColor: "thyColor" }, features: [ɵngcc0.ɵɵProvidersFeature([UpdateHostClassService])], decls: 10, vars: 7, consts: [[3, "ngTemplateOutlet", 4, "ngIf"], [1, "thy-statistic-content", 3, "ngStyle"], ["class", "thy-statistic-content-prefix", 4, "ngIf"], [1, "thy-statistic-content-value"], [4, "ngIf"], ["class", "thy-statistic-content-suffix", 4, "ngIf"], ["title", ""], [3, "ngTemplateOutlet"], [1, "thy-statistic-content-prefix"], [1, "thy-statistic-content-suffix"], [1, "thy-statistic-title"]], template: function ThyStatisticComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, ThyStatisticComponent_ng_container_0_Template, 1, 1, "ng-container", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵtemplate(2, ThyStatisticComponent_span_2_Template, 3, 2, "span", 2);
        ɵngcc0.ɵɵelementStart(3, "span", 3);
        ɵngcc0.ɵɵtemplate(4, ThyStatisticComponent_span_4_Template, 2, 1, "span", 4);
        ɵngcc0.ɵɵtemplate(5, ThyStatisticComponent_ng_container_5_Template, 1, 1, "ng-container", 0);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, ThyStatisticComponent_span_6_Template, 3, 2, "span", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(7, ThyStatisticComponent_ng_container_7_Template, 1, 1, "ng-container", 0);
        ɵngcc0.ɵɵtemplate(8, ThyStatisticComponent_ng_template_8_Template, 3, 2, "ng-template", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", (ctx.thyTitle || ctx.titleTemplate) && ctx.thyTitlePosition === "top");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngStyle", ctx.thyValueStyle);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.thyPrefix || ctx.prefixTemplate);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.valueTemplate);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.valueTemplate);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.thySuffix || ctx.suffixTemplate);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", (ctx.thyTitle || ctx.titleTemplate) && ctx.thyTitlePosition === "bottom");
    } }, directives: [ɵngcc2.NgIf, ɵngcc2.NgStyle, ɵngcc2.NgTemplateOutlet], encapsulation: 2 });
ThyStatisticComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: UpdateHostClassService },
    { type: Renderer2 }
];
ThyStatisticComponent.propDecorators = {
    class: [{ type: HostBinding, args: [`class.thy-statistic`,] }],
    thyValueStyle: [{ type: Input }],
    thyPrefix: [{ type: Input }],
    prefix: [{ type: ContentChild, args: ['prefix', { static: true },] }],
    thyPrefixTemplate: [{ type: Input }],
    thyValue: [{ type: Input }],
    value: [{ type: ContentChild, args: ['value', { static: true },] }],
    thyValueTemplate: [{ type: Input }],
    thyTitle: [{ type: Input }],
    title: [{ type: ContentChild, args: ['title', { static: true },] }],
    thyTitleTemplate: [{ type: Input }],
    thySuffix: [{ type: Input }],
    suffix: [{ type: ContentChild, args: ['suffix', { static: true },] }],
    thySuffixTemplate: [{ type: Input }],
    thyTitlePosition: [{ type: Input }],
    thyShape: [{ type: Input }],
    thyColor: [{ type: Input }],
    thySize: [{ type: Input }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyStatisticComponent, [{
        type: Component,
        args: [{
                selector: 'thy-statistic',
                template: "<ng-container [ngTemplateOutlet]=\"title\" *ngIf=\"(thyTitle || titleTemplate) && thyTitlePosition === 'top'\"></ng-container>\n<div class=\"thy-statistic-content\" [ngStyle]=\"thyValueStyle\">\n  <span *ngIf=\"thyPrefix || prefixTemplate\" class=\"thy-statistic-content-prefix\">\n    <span *ngIf=\"thyPrefix\">{{ thyPrefix }}</span>\n    <ng-container *ngIf=\"prefixTemplate\" [ngTemplateOutlet]=\"prefixTemplate\"></ng-container>\n  </span>\n\n  <span class=\"thy-statistic-content-value\">\n    <span *ngIf=\"!valueTemplate\">{{ thyValue }}</span>\n    <ng-container *ngIf=\"valueTemplate\" [ngTemplateOutlet]=\"valueTemplate\"></ng-container>\n  </span>\n\n  <span *ngIf=\"thySuffix || suffixTemplate\" class=\"thy-statistic-content-suffix\">\n    <span *ngIf=\"thySuffix\">{{ thySuffix }}</span>\n    <ng-container *ngIf=\"suffixTemplate\" [ngTemplateOutlet]=\"suffixTemplate\"></ng-container>\n  </span>\n</div>\n<ng-container [ngTemplateOutlet]=\"title\" *ngIf=\"(thyTitle || titleTemplate) && thyTitlePosition === 'bottom'\"></ng-container>\n\n<ng-template #title>\n  <div class=\"thy-statistic-title\">\n    <span *ngIf=\"thyTitle\">{{ thyTitle }}</span>\n    <ng-container [ngTemplateOutlet]=\"titleTemplate\"></ng-container>\n  </div>\n</ng-template>\n",
                providers: [UpdateHostClassService]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc1.UpdateHostClassService }, { type: ɵngcc0.Renderer2 }]; }, { class: [{
            type: HostBinding,
            args: [`class.thy-statistic`]
        }], thyValueStyle: [{
            type: Input
        }], thyTitlePosition: [{
            type: Input
        }], prefix: [{
            type: ContentChild,
            args: ['prefix', { static: true }]
        }], thyPrefixTemplate: [{
            type: Input
        }], value: [{
            type: ContentChild,
            args: ['value', { static: true }]
        }], thyValueTemplate: [{
            type: Input
        }], title: [{
            type: ContentChild,
            args: ['title', { static: true }]
        }], thyTitleTemplate: [{
            type: Input
        }], suffix: [{
            type: ContentChild,
            args: ['suffix', { static: true }]
        }], thySuffixTemplate: [{
            type: Input
        }], thyShape: [{
            type: Input
        }], thySize: [{
            type: Input
        }], thyPrefix: [{
            type: Input
        }], thyValue: [{
            type: Input
        }], thyTitle: [{
            type: Input
        }], thySuffix: [{
            type: Input
        }], thyColor: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGlzdGljLmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3N0YXRpc3RpYy9zdGF0aXN0aWMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBVSxTQUFTLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEgsT0FBTyxFQUF5QixRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNsRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFlekQsTUFBTSxPQUFPLHFCQUFxQjtBQUFHLElBK0VqQyxZQUFvQixVQUFzQixFQUFVLHNCQUE4QyxFQUFVLFFBQW1CO0FBQ25JLFFBRHdCLGVBQVUsR0FBVixVQUFVLENBQVk7QUFBQyxRQUFTLDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBd0I7QUFBQyxRQUFTLGFBQVEsR0FBUixRQUFRLENBQVc7QUFBQyxRQTVFaEksaUJBQVksR0FBRyxLQUFLLENBQUM7QUFDekIsUUFXd0MsVUFBSyxHQUFHLElBQUksQ0FBQztBQUNyRCxRQUNhLGtCQUFhLEdBQUcsRUFBRSxDQUFDO0FBQ2hDLFFBeUNhLHFCQUFnQixHQUE4QixRQUFRLENBQUM7QUFDcEUsUUFvQlEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNoRixJQUFJLENBQUM7QUFDTCxJQTdESSxJQUE4QyxNQUFNLENBQUMsS0FBd0I7QUFDakYsUUFBUSxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztBQUNwQyxJQUFJ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RUFBRTtBQUFPLCtCQUk3QyxLQUFLO0FBQUssdUJBSVYsS0FBSztBQUFLLG9CQUVWLFlBQVksU0FBQyxPQUFPLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQU8sK0JBSTdDLEtBQUs7QUFBSyx3QkFJVixLQUFLO0FBQUsscUJBRVYsWUFBWSxTQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFBTyxnQ0FJOUMsS0FBSztBQUFLLCtCQUlWLEtBQUs7QUFBSyx1QkFFVixLQUFLO0FBQ1IsdUJBT0csS0FBSztBQUFLLHNCQUVWLEtBQUs7QUFDVDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT25Jbml0LCBDb21wb25lbnQsIElucHV0LCBIb3N0QmluZGluZywgRWxlbWVudFJlZiwgVGVtcGxhdGVSZWYsIENvbnRlbnRDaGlsZCwgUmVuZGVyZXIyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHksIGhleFRvUmdiIH0gZnJvbSAnbmd4LXRldGh5cy91dGlsJztcbmltcG9ydCB7IFVwZGF0ZUhvc3RDbGFzc1NlcnZpY2UgfSBmcm9tICduZ3gtdGV0aHlzL2NvcmUnO1xuXG5leHBvcnQgdHlwZSBUaHlTdGF0aXN0aWNDb2xvclR5cGUgPSAncHJpbWFyeScgfCAnc3VjY2VzcycgfCAnd2FybmluZycgfCAnZGFuZ2VyJyB8ICdpbmZvJztcblxuZXhwb3J0IHR5cGUgVGh5U3RhdGlzdGljU2hhcGUgPSAnY2FyZCc7XG5cbmV4cG9ydCB0eXBlIFRoeVN0YXRpc3RpY1NpemVzID0gJ2RlZmF1bHQnO1xuXG5leHBvcnQgdHlwZSBUaHlTdGF0aXN0aWNUaXRsZVBvc2l0aW9uID0gJ3RvcCcgfCAnYm90dG9tJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd0aHktc3RhdGlzdGljJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vc3RhdGlzdGljLmNvbXBvbmVudC5odG1sJyxcbiAgICBwcm92aWRlcnM6IFtVcGRhdGVIb3N0Q2xhc3NTZXJ2aWNlXVxufSlcbmV4cG9ydCBjbGFzcyBUaHlTdGF0aXN0aWNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIF9zaGFwZTogVGh5U3RhdGlzdGljU2hhcGU7XG5cbiAgICBfaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIF9zaXplOiBUaHlTdGF0aXN0aWNTaXplcztcblxuICAgIHByZWZpeFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjx2b2lkPjtcblxuICAgIHN1ZmZpeFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjx2b2lkPjtcblxuICAgIHZhbHVlVGVtcGxhdGU6IFRlbXBsYXRlUmVmPHZvaWQ+O1xuXG4gICAgdGl0bGVUZW1wbGF0ZTogVGVtcGxhdGVSZWY8dm9pZD47XG5cbiAgICBASG9zdEJpbmRpbmcoYGNsYXNzLnRoeS1zdGF0aXN0aWNgKSBjbGFzcyA9IHRydWU7XG5cbiAgICBASW5wdXQoKSB0aHlWYWx1ZVN0eWxlID0ge307XG5cbiAgICBASW5wdXQoKSB0aHlQcmVmaXg6IHN0cmluZztcblxuICAgIEBDb250ZW50Q2hpbGQoJ3ByZWZpeCcsIHsgc3RhdGljOiB0cnVlIH0pIHNldCBwcmVmaXgodmFsdWU6IFRlbXBsYXRlUmVmPHZvaWQ+KSB7XG4gICAgICAgIHRoaXMucHJlZml4VGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKSBzZXQgdGh5UHJlZml4VGVtcGxhdGUodmFsdWU6IFRlbXBsYXRlUmVmPHZvaWQ+KSB7XG4gICAgICAgIHRoaXMucHJlZml4VGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKSB0aHlWYWx1ZTogbnVtYmVyIHwgc3RyaW5nO1xuXG4gICAgQENvbnRlbnRDaGlsZCgndmFsdWUnLCB7IHN0YXRpYzogdHJ1ZSB9KSBzZXQgdmFsdWUodmFsdWU6IFRlbXBsYXRlUmVmPHZvaWQ+KSB7XG4gICAgICAgIHRoaXMudmFsdWVUZW1wbGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBJbnB1dCgpIHNldCB0aHlWYWx1ZVRlbXBsYXRlKHZhbHVlOiBUZW1wbGF0ZVJlZjx2b2lkPikge1xuICAgICAgICB0aGlzLnZhbHVlVGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKSB0aHlUaXRsZTogc3RyaW5nO1xuXG4gICAgQENvbnRlbnRDaGlsZCgndGl0bGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSBzZXQgdGl0bGUodmFsdWU6IFRlbXBsYXRlUmVmPHZvaWQ+KSB7XG4gICAgICAgIHRoaXMudGl0bGVUZW1wbGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBJbnB1dCgpIHNldCB0aHlUaXRsZVRlbXBsYXRlKHZhbHVlOiBUZW1wbGF0ZVJlZjx2b2lkPikge1xuICAgICAgICB0aGlzLnRpdGxlVGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKSB0aHlTdWZmaXg6IHN0cmluZztcblxuICAgIEBDb250ZW50Q2hpbGQoJ3N1ZmZpeCcsIHsgc3RhdGljOiB0cnVlIH0pIHNldCBzdWZmaXgodmFsdWU6IFRlbXBsYXRlUmVmPHZvaWQ+KSB7XG4gICAgICAgIHRoaXMuc3VmZml4VGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKSBzZXQgdGh5U3VmZml4VGVtcGxhdGUodmFsdWU6IFRlbXBsYXRlUmVmPHZvaWQ+KSB7XG4gICAgICAgIHRoaXMuc3VmZml4VGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKSB0aHlUaXRsZVBvc2l0aW9uOiBUaHlTdGF0aXN0aWNUaXRsZVBvc2l0aW9uID0gJ2JvdHRvbSc7XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlTaGFwZSh2YWx1ZTogVGh5U3RhdGlzdGljU2hhcGUpIHtcbiAgICAgICAgdGhpcy5fc2hhcGUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRDbGFzc2VzQnlUeXBlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASW5wdXQoKSB0aHlDb2xvcjogc3RyaW5nIHwgVGh5U3RhdGlzdGljQ29sb3JUeXBlO1xuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5U2l6ZSh2YWx1ZTogVGh5U3RhdGlzdGljU2l6ZXMpIHtcbiAgICAgICAgdGhpcy5fc2l6ZSA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldENsYXNzZXNCeVR5cGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSB1cGRhdGVIb3N0Q2xhc3NTZXJ2aWNlOiBVcGRhdGVIb3N0Q2xhc3NTZXJ2aWNlLCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgICAgICAgdGhpcy51cGRhdGVIb3N0Q2xhc3NTZXJ2aWNlLmluaXRpYWxpemVFbGVtZW50KGVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCk7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuX3NldENsYXNzZXNCeVR5cGUoKTtcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHNldENvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2NvbG9yJywgY29sb3IpO1xuICAgICAgICBpZiAodGhpcy5fc2hhcGUgPT09ICdjYXJkJykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2JvcmRlci1jb2xvcicsIGNvbG9yKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICdiYWNrZ3JvdW5kLWNvbG9yJywgaGV4VG9SZ2IoY29sb3IsIDAuMDUpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zZXRDbGFzc2VzQnlUeXBlKCkge1xuICAgICAgICBjb25zdCBjbGFzc05hbWVzID0gW107XG4gICAgICAgIGlmICh0aGlzLnRoeUNvbG9yKSB7XG4gICAgICAgICAgICBpZiAoUmVnRXhwKC9eIyhbMC05YS1mQS1GXXs2fXxbMC05YS1mQS1GXXszfSkkLykudGVzdCh0aGlzLnRoeUNvbG9yKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sb3IodGhpcy50aHlDb2xvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZXMucHVzaChgdGh5LXN0YXRpc3RpYy0ke3RoaXMudGh5Q29sb3J9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3NoYXBlKSB7XG4gICAgICAgICAgICBjbGFzc05hbWVzLnB1c2goYHRoeS1zdGF0aXN0aWMtJHt0aGlzLl9zaGFwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX3NpemUpIHtcbiAgICAgICAgICAgIHRoaXMuX3NpemUgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgICAgY2xhc3NOYW1lcy5wdXNoKGB0aHktc3RhdGlzdGljLSR7dGhpcy5fc2l6ZX1gKTtcblxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnZm9udC1zaXplJywgdGhpcy50aHlTaXplKTtcbiAgICAgICAgdGhpcy51cGRhdGVIb3N0Q2xhc3NTZXJ2aWNlLnVwZGF0ZUNsYXNzKGNsYXNzTmFtZXMpO1xuICAgIH1cbn1cbiJdfQ==