import { Directive, HostBinding, Input, HostListener, ElementRef } from '@angular/core';
import { coerceBooleanProperty } from 'ngx-tethys/util';
import { fromEvent } from 'rxjs';
import { debounceTime, shareReplay } from 'rxjs/operators';
import { UpdateHostClassService } from 'ngx-tethys/core';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from 'ngx-tethys/core';
export class ThyActionMenuItemDirective {
    constructor(elementRef, updateHostClassService) {
        this.elementRef = elementRef;
        this.updateHostClassService = updateHostClassService;
        this.className = true;
        this.disabled = false;
        this.danger = false;
        this.success = false;
    }
    set thyDisabled(value) {
        this.disabled = coerceBooleanProperty(value);
    }
    set thyType(value) {
        this[value] = true;
    }
    onClick(event) {
        if (this.disabled) {
            event.stopPropagation();
            event.preventDefault();
        }
    }
    ngOnInit() {
        this.updateHostClassService.initializeElement(this.elementRef);
    }
    updateClass(classes) {
        this.updateHostClassService.updateClass(classes);
    }
    getWidth() {
        return this.elementRef.nativeElement.offsetWidth;
    }
    getElement() {
        return this.elementRef.nativeElement;
    }
    bindMouseenterEvent() {
        return fromEvent(this.elementRef.nativeElement, 'mouseenter').pipe(debounceTime(100), shareReplay());
    }
}
ThyActionMenuItemDirective.ɵfac = function ThyActionMenuItemDirective_Factory(t) { return new (t || ThyActionMenuItemDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.UpdateHostClassService)); };
ThyActionMenuItemDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ThyActionMenuItemDirective, selectors: [["", "thyActionMenuItem", ""]], hostVars: 8, hostBindings: function ThyActionMenuItemDirective_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function ThyActionMenuItemDirective_click_HostBindingHandler($event) { return ctx.onClick($event); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("action-menu-item", ctx.className)("action-menu-item--disabled", ctx.disabled)("action-menu-item--danger", ctx.danger)("action-menu-item--success", ctx.success);
    } }, inputs: { thyDisabled: "thyDisabled", thyType: "thyType" }, features: [ɵngcc0.ɵɵProvidersFeature([UpdateHostClassService])] });
ThyActionMenuItemDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: UpdateHostClassService }
];
ThyActionMenuItemDirective.propDecorators = {
    className: [{ type: HostBinding, args: ['class.action-menu-item',] }],
    disabled: [{ type: HostBinding, args: ['class.action-menu-item--disabled',] }],
    danger: [{ type: HostBinding, args: ['class.action-menu-item--danger',] }],
    success: [{ type: HostBinding, args: ['class.action-menu-item--success',] }],
    thyDisabled: [{ type: Input }],
    thyType: [{ type: Input }],
    onClick: [{ type: HostListener, args: ['click', ['$event'],] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyActionMenuItemDirective, [{
        type: Directive,
        args: [{
                selector: '[thyActionMenuItem]',
                providers: [UpdateHostClassService]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc1.UpdateHostClassService }]; }, { className: [{
            type: HostBinding,
            args: ['class.action-menu-item']
        }], disabled: [{
            type: HostBinding,
            args: ['class.action-menu-item--disabled']
        }], danger: [{
            type: HostBinding,
            args: ['class.action-menu-item--danger']
        }], success: [{
            type: HostBinding,
            args: ['class.action-menu-item--success']
        }], thyDisabled: [{
            type: Input
        }], thyType: [{
            type: Input
        }], onClick: [{
            type: HostListener,
            args: ['click', ['$event']]
        }] }); })();
export class ThyActionMenuItemIconDirective {
    constructor() {
        this.className = true;
    }
}
ThyActionMenuItemIconDirective.ɵfac = function ThyActionMenuItemIconDirective_Factory(t) { return new (t || ThyActionMenuItemIconDirective)(); };
ThyActionMenuItemIconDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ThyActionMenuItemIconDirective, selectors: [["", "thyActionMenuItemIcon", ""]], hostVars: 2, hostBindings: function ThyActionMenuItemIconDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("icon", ctx.className);
    } } });
ThyActionMenuItemIconDirective.ctorParameters = () => [];
ThyActionMenuItemIconDirective.propDecorators = {
    className: [{ type: HostBinding, args: ['class.icon',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyActionMenuItemIconDirective, [{
        type: Directive,
        args: [{
                selector: '[thyActionMenuItemIcon]'
            }]
    }], function () { return []; }, { className: [{
            type: HostBinding,
            args: ['class.icon']
        }] }); })();
export class ThyActionMenuItemNameDirective {
    constructor() {
        this.className = true;
    }
}
ThyActionMenuItemNameDirective.ɵfac = function ThyActionMenuItemNameDirective_Factory(t) { return new (t || ThyActionMenuItemNameDirective)(); };
ThyActionMenuItemNameDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ThyActionMenuItemNameDirective, selectors: [["", "thyActionMenuItemName", ""]], hostVars: 2, hostBindings: function ThyActionMenuItemNameDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("name", ctx.className);
    } } });
ThyActionMenuItemNameDirective.ctorParameters = () => [];
ThyActionMenuItemNameDirective.propDecorators = {
    className: [{ type: HostBinding, args: ['class.name',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyActionMenuItemNameDirective, [{
        type: Directive,
        args: [{
                selector: '[thyActionMenuItemName]'
            }]
    }], function () { return []; }, { className: [{
            type: HostBinding,
            args: ['class.name']
        }] }); })();
export class ThyActionMenuItemMetaDirective {
    constructor() {
        this.className = true;
    }
}
ThyActionMenuItemMetaDirective.ɵfac = function ThyActionMenuItemMetaDirective_Factory(t) { return new (t || ThyActionMenuItemMetaDirective)(); };
ThyActionMenuItemMetaDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ThyActionMenuItemMetaDirective, selectors: [["", "thyActionMenuItemMeta", ""]], hostVars: 2, hostBindings: function ThyActionMenuItemMetaDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("meta", ctx.className);
    } } });
ThyActionMenuItemMetaDirective.ctorParameters = () => [];
ThyActionMenuItemMetaDirective.propDecorators = {
    className: [{ type: HostBinding, args: ['class.meta',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyActionMenuItemMetaDirective, [{
        type: Directive,
        args: [{
                selector: '[thyActionMenuItemMeta]'
            }]
    }], function () { return []; }, { className: [{
            type: HostBinding,
            args: ['class.meta']
        }] }); })();
export class ThyActionMenuItemInfoDirective {
    constructor() {
        this.className = true;
    }
}
ThyActionMenuItemInfoDirective.ɵfac = function ThyActionMenuItemInfoDirective_Factory(t) { return new (t || ThyActionMenuItemInfoDirective)(); };
ThyActionMenuItemInfoDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ThyActionMenuItemInfoDirective, selectors: [["", "thyActionMenuItemInfo", ""]], hostVars: 2, hostBindings: function ThyActionMenuItemInfoDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("info", ctx.className);
    } } });
ThyActionMenuItemInfoDirective.ctorParameters = () => [];
ThyActionMenuItemInfoDirective.propDecorators = {
    className: [{ type: HostBinding, args: ['class.info',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyActionMenuItemInfoDirective, [{
        type: Directive,
        args: [{
                selector: '[thyActionMenuItemInfo]'
            }]
    }], function () { return []; }, { className: [{
            type: HostBinding,
            args: ['class.info']
        }] }); })();
export class ThyActionMenuItemExtendIconDirective {
    constructor() {
        this.className = true;
    }
}
ThyActionMenuItemExtendIconDirective.ɵfac = function ThyActionMenuItemExtendIconDirective_Factory(t) { return new (t || ThyActionMenuItemExtendIconDirective)(); };
ThyActionMenuItemExtendIconDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ThyActionMenuItemExtendIconDirective, selectors: [["", "thyActionMenuItemExtendIcon", ""]], hostVars: 2, hostBindings: function ThyActionMenuItemExtendIconDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("extend-icon", ctx.className);
    } } });
ThyActionMenuItemExtendIconDirective.ctorParameters = () => [];
ThyActionMenuItemExtendIconDirective.propDecorators = {
    className: [{ type: HostBinding, args: ['class.extend-icon',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyActionMenuItemExtendIconDirective, [{
        type: Directive,
        args: [{
                selector: '[thyActionMenuItemExtendIcon]'
            }]
    }], function () { return []; }, { className: [{
            type: HostBinding,
            args: ['class.extend-icon']
        }] }); })();
export class ThyActionMenuItemActiveDirective {
    constructor() {
        this._isActive = false;
    }
    set thyActionMenuItemActive(value) {
        this._isActive = coerceBooleanProperty(value);
    }
}
ThyActionMenuItemActiveDirective.ɵfac = function ThyActionMenuItemActiveDirective_Factory(t) { return new (t || ThyActionMenuItemActiveDirective)(); };
ThyActionMenuItemActiveDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ThyActionMenuItemActiveDirective, selectors: [["", "thyActionMenuItemActive", ""]], hostVars: 2, hostBindings: function ThyActionMenuItemActiveDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("active", ctx._isActive);
    } }, inputs: { thyActionMenuItemActive: "thyActionMenuItemActive" } });
ThyActionMenuItemActiveDirective.ctorParameters = () => [];
ThyActionMenuItemActiveDirective.propDecorators = {
    _isActive: [{ type: HostBinding, args: ['class.active',] }],
    thyActionMenuItemActive: [{ type: Input }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyActionMenuItemActiveDirective, [{
        type: Directive,
        args: [{
                selector: '[thyActionMenuItemActive]'
            }]
    }], function () { return []; }, { _isActive: [{
            type: HostBinding,
            args: ['class.active']
        }], thyActionMenuItemActive: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLW1lbnUtaXRlbS5kaXJlY3RpdmUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hY3Rpb24tbWVudS9hY3Rpb24tbWVudS1pdGVtLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQWEsWUFBWSxFQUFxQixVQUFVLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDOUgsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNqQyxPQUFPLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDOzs7QUFRekQsTUFBTSxPQUFPLDBCQUEwQjtBQUFHLElBMkJ0QyxZQUFvQixVQUFtQyxFQUFVLHNCQUE4QztBQUFJLFFBQS9GLGVBQVUsR0FBVixVQUFVLENBQXlCO0FBQUMsUUFBUywyQkFBc0IsR0FBdEIsc0JBQXNCLENBQXdCO0FBQUMsUUExQnpFLGNBQVMsR0FBRyxJQUFJLENBQUM7QUFDNUQsUUFDcUQsYUFBUSxHQUFHLEtBQUssQ0FBQztBQUN0RSxRQUNtRCxXQUFNLEdBQUcsS0FBSyxDQUFDO0FBQ2xFLFFBQ29ELFlBQU8sR0FBRyxLQUFLLENBQUM7QUFDcEUsSUFtQnNILENBQUM7QUFDdkgsSUFuQkksSUFDSSxXQUFXLENBQUMsS0FBYztBQUNsQyxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDckQsSUFBSSxDQUFDO0FBQ0wsSUFDSSxJQUNJLE9BQU8sQ0FBQyxLQUE0QjtBQUM1QyxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDM0IsSUFBSSxDQUFDO0FBQ0wsSUFFSSxPQUFPLENBQUMsS0FBWTtBQUFJLFFBQ3BCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUMzQixZQUFZLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUNwQyxZQUFZLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUNuQyxTQUFTO0FBQ1QsSUFBSSxDQUFDO0FBQ0wsSUFHSSxRQUFRO0FBQ1osUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3ZFLElBQUksQ0FBQztBQUNMLElBQ0ksV0FBVyxDQUFDLE9BQWlCO0FBQ2pDLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6RCxJQUFJLENBQUM7QUFDTCxJQUNJLFFBQVE7QUFDWixRQUFRLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDO0FBQ3pELElBQUksQ0FBQztBQUNMLElBQ0ksVUFBVTtBQUNkLFFBQVEsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQztBQUM3QyxJQUFJLENBQUM7QUFDTCxJQUNJLG1CQUFtQjtBQUN2QixRQUFRLE9BQU8sU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQztBQUM3RyxJQUFJLENBQUM7QUFDTDtzREFwREMsU0FBUyxTQUFDLGtCQUNQLFFBQVEsRUFBRSxxQkFBcUIsa0JBQy9CLFNBQVMsRUFBRSxDQUFDLHNCQUFzQixDQUFDLGNBQ3RDOzs7Ozt3SUFDSTtBQUFDO0FBQW9ELFlBWjBCLFVBQVU7QUFBSSxZQUl6RixzQkFBc0I7QUFBRztBQUFHO0FBRWIsd0JBT25CLFdBQVcsU0FBQyx3QkFBd0I7QUFBTyx1QkFFM0MsV0FBVyxTQUFDLGtDQUFrQztBQUFPLHFCQUVyRCxXQUFXLFNBQUMsZ0NBQWdDO0FBQU8sc0JBRW5ELFdBQVcsU0FBQyxpQ0FBaUM7QUFBTywwQkFFcEQsS0FBSztBQUNSLHNCQUlHLEtBQUs7QUFDUixzQkFJRyxZQUFZLFNBQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFDO0FBQ2pDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQWlDTixNQUFNLE9BQU8sOEJBQThCO0FBQzNDLElBRUk7QUFBZ0IsUUFGVyxjQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ2hELElBQ21CLENBQUM7QUFDcEI7MERBUEMsU0FBUyxTQUFDLGtCQUNQLFFBQVEsRUFBRSx5QkFBeUIsY0FDdEM7OztXQUNJO0FBQUM7QUFDWTtBQUVBLHdCQUZiLFdBQVcsU0FBQyxZQUFZO0FBQU07Ozs7Ozs7OztvQkFBRTtBQVFyQyxNQUFNLE9BQU8sOEJBQThCO0FBQzNDLElBRUk7QUFBZ0IsUUFGVyxjQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ2hELElBQ21CLENBQUM7QUFDcEI7MERBUEMsU0FBUyxTQUFDLGtCQUNQLFFBQVEsRUFBRSx5QkFBeUIsY0FDdEM7OztXQUNJO0FBQUM7QUFDWTtBQUVBLHdCQUZiLFdBQVcsU0FBQyxZQUFZO0FBQU07Ozs7Ozs7OztvQkFBRTtBQVFyQyxNQUFNLE9BQU8sOEJBQThCO0FBQzNDLElBRUk7QUFBZ0IsUUFGVyxjQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ2hELElBQ21CLENBQUM7QUFDcEI7MERBUEMsU0FBUyxTQUFDLGtCQUNQLFFBQVEsRUFBRSx5QkFBeUIsY0FDdEM7OztXQUNJO0FBQUM7QUFDWTtBQUVBLHdCQUZiLFdBQVcsU0FBQyxZQUFZO0FBQU07Ozs7Ozs7OztvQkFBRTtBQVFyQyxNQUFNLE9BQU8sOEJBQThCO0FBQzNDLElBRUk7QUFBZ0IsUUFGVyxjQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ2hELElBQ21CLENBQUM7QUFDcEI7MERBUEMsU0FBUyxTQUFDLGtCQUNQLFFBQVEsRUFBRSx5QkFBeUIsY0FDdEM7OztXQUNJO0FBQUM7QUFDWTtBQUVBLHdCQUZiLFdBQVcsU0FBQyxZQUFZO0FBQU07Ozs7Ozs7OztvQkFBRTtBQVFyQyxNQUFNLE9BQU8sb0NBQW9DO0FBQ2pELElBRUk7QUFBZ0IsUUFGa0IsY0FBUyxHQUFHLElBQUksQ0FBQztBQUN2RCxJQUNtQixDQUFDO0FBQ3BCO2dFQVBDLFNBQVMsU0FBQyxrQkFDUCxRQUFRLEVBQUUsK0JBQStCLGNBQzVDOzs7V0FDSTtBQUFDO0FBQ1k7QUFFRCx3QkFGWixXQUFXLFNBQUMsbUJBQW1CO0FBQU07Ozs7Ozs7OztvQkFBRTtBQVE1QyxNQUFNLE9BQU8sZ0NBQWdDO0FBQzdDLElBT0k7QUFBZ0IsUUFQYSxjQUFTLEdBQUcsS0FBSyxDQUFDO0FBQ25ELElBTW1CLENBQUM7QUFDcEIsSUFOSSxJQUNJLHVCQUF1QixDQUFDLEtBQWM7QUFDOUMsUUFBUSxJQUFJLENBQUMsU0FBUyxHQUFHLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3RELElBQUksQ0FBQztBQUNMOzREQVZDLFNBQVMsU0FBQyxrQkFDUCxRQUFRLEVBQUUsMkJBQTJCLGNBQ3hDOzs7MkVBQ0k7QUFBQztBQUNZO0FBR2Qsd0JBSEMsV0FBVyxTQUFDLGNBQWM7QUFBTyxzQ0FFakMsS0FBSztBQUNUOzs7Ozs7Ozs7OztvQkFBRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBIb3N0QmluZGluZywgSW5wdXQsIENvbXBvbmVudCwgSG9zdExpc3RlbmVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgRWxlbWVudFJlZiwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHkgfSBmcm9tICduZ3gtdGV0aHlzL3V0aWwnO1xuaW1wb3J0IHsgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIHNoYXJlUmVwbGF5IH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgVXBkYXRlSG9zdENsYXNzU2VydmljZSB9IGZyb20gJ25neC10ZXRoeXMvY29yZSc7XG5cbmV4cG9ydCB0eXBlIFRoeUFjdGlvbk1lbnVJdGVtVHlwZSA9ICdkYW5nZXInIHwgJ3N1Y2Nlc3MnO1xuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1t0aHlBY3Rpb25NZW51SXRlbV0nLFxuICAgIHByb3ZpZGVyczogW1VwZGF0ZUhvc3RDbGFzc1NlcnZpY2VdXG59KVxuZXhwb3J0IGNsYXNzIFRoeUFjdGlvbk1lbnVJdGVtRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmFjdGlvbi1tZW51LWl0ZW0nKSBjbGFzc05hbWUgPSB0cnVlO1xuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5hY3Rpb24tbWVudS1pdGVtLS1kaXNhYmxlZCcpIGRpc2FibGVkID0gZmFsc2U7XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmFjdGlvbi1tZW51LWl0ZW0tLWRhbmdlcicpIGRhbmdlciA9IGZhbHNlO1xuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5hY3Rpb24tbWVudS1pdGVtLS1zdWNjZXNzJykgc3VjY2VzcyA9IGZhbHNlO1xuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5RGlzYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5VHlwZSh2YWx1ZTogVGh5QWN0aW9uTWVudUl0ZW1UeXBlKSB7XG4gICAgICAgIHRoaXNbdmFsdWVdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBASG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pXG4gICAgb25DbGljayhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD4sIHByaXZhdGUgdXBkYXRlSG9zdENsYXNzU2VydmljZTogVXBkYXRlSG9zdENsYXNzU2VydmljZSkge31cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUhvc3RDbGFzc1NlcnZpY2UuaW5pdGlhbGl6ZUVsZW1lbnQodGhpcy5lbGVtZW50UmVmKTtcbiAgICB9XG5cbiAgICB1cGRhdGVDbGFzcyhjbGFzc2VzOiBzdHJpbmdbXSkge1xuICAgICAgICB0aGlzLnVwZGF0ZUhvc3RDbGFzc1NlcnZpY2UudXBkYXRlQ2xhc3MoY2xhc3Nlcyk7XG4gICAgfVxuXG4gICAgZ2V0V2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB9XG5cbiAgICBnZXRFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgYmluZE1vdXNlZW50ZXJFdmVudCgpIHtcbiAgICAgICAgcmV0dXJuIGZyb21FdmVudCh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ21vdXNlZW50ZXInKS5waXBlKGRlYm91bmNlVGltZSgxMDApLCBzaGFyZVJlcGxheSgpKTtcbiAgICB9XG59XG5cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiAnW3RoeUFjdGlvbk1lbnVJdGVtSWNvbl0nXG59KVxuZXhwb3J0IGNsYXNzIFRoeUFjdGlvbk1lbnVJdGVtSWNvbkRpcmVjdGl2ZSB7XG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pY29uJykgY2xhc3NOYW1lID0gdHJ1ZTtcblxuICAgIGNvbnN0cnVjdG9yKCkge31cbn1cblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbdGh5QWN0aW9uTWVudUl0ZW1OYW1lXSdcbn0pXG5leHBvcnQgY2xhc3MgVGh5QWN0aW9uTWVudUl0ZW1OYW1lRGlyZWN0aXZlIHtcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLm5hbWUnKSBjbGFzc05hbWUgPSB0cnVlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7fVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1t0aHlBY3Rpb25NZW51SXRlbU1ldGFdJ1xufSlcbmV4cG9ydCBjbGFzcyBUaHlBY3Rpb25NZW51SXRlbU1ldGFEaXJlY3RpdmUge1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MubWV0YScpIGNsYXNzTmFtZSA9IHRydWU7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHt9XG59XG5cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiAnW3RoeUFjdGlvbk1lbnVJdGVtSW5mb10nXG59KVxuZXhwb3J0IGNsYXNzIFRoeUFjdGlvbk1lbnVJdGVtSW5mb0RpcmVjdGl2ZSB7XG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pbmZvJykgY2xhc3NOYW1lID0gdHJ1ZTtcblxuICAgIGNvbnN0cnVjdG9yKCkge31cbn1cblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbdGh5QWN0aW9uTWVudUl0ZW1FeHRlbmRJY29uXSdcbn0pXG5leHBvcnQgY2xhc3MgVGh5QWN0aW9uTWVudUl0ZW1FeHRlbmRJY29uRGlyZWN0aXZlIHtcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmV4dGVuZC1pY29uJykgY2xhc3NOYW1lID0gdHJ1ZTtcblxuICAgIGNvbnN0cnVjdG9yKCkge31cbn1cblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbdGh5QWN0aW9uTWVudUl0ZW1BY3RpdmVdJ1xufSlcbmV4cG9ydCBjbGFzcyBUaHlBY3Rpb25NZW51SXRlbUFjdGl2ZURpcmVjdGl2ZSB7XG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5hY3RpdmUnKSBfaXNBY3RpdmUgPSBmYWxzZTtcblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IHRoeUFjdGlvbk1lbnVJdGVtQWN0aXZlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2lzQWN0aXZlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHt9XG59XG4iXX0=