import { ThyTranslate } from 'ngx-tethys/core';
import { coerceBooleanProperty } from 'ngx-tethys/util';
import { Component, ContentChild, ElementRef, HostBinding, Input, NgZone, Renderer2, TemplateRef } from '@angular/core';
import { ThyEmptyConfig } from './empty.config';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from 'ngx-tethys/core';
import * as ɵngcc2 from './empty.config';
import * as ɵngcc3 from '@angular/common';
import * as ɵngcc4 from 'ngx-tethys/icon';

const _c0 = ["extra"];
function ThyEmptyComponent_img_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "img", 6);
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("src", ctx_r0.thyImageUrl, ɵngcc0.ɵɵsanitizeUrl);
} }
function ThyEmptyComponent_ng_template_2_thy_icon_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "thy-icon", 9);
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("thyIconName", ctx_r5.thyIconName);
} }
function ThyEmptyComponent_ng_template_2_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementStart(1, "svg", 10);
    ɵngcc0.ɵɵelementStart(2, "defs");
    ɵngcc0.ɵɵelementStart(3, "filter", 11);
    ɵngcc0.ɵɵelement(4, "feGaussianBlur", 12);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(5, "g", 13);
    ɵngcc0.ɵɵelementStart(6, "g", 14);
    ɵngcc0.ɵɵelement(7, "ellipse", 15);
    ɵngcc0.ɵɵelementStart(8, "g", 16);
    ɵngcc0.ɵɵelement(9, "polygon", 17);
    ɵngcc0.ɵɵelement(10, "path", 18);
    ɵngcc0.ɵɵelement(11, "path", 19);
    ɵngcc0.ɵɵelementStart(12, "text", 20);
    ɵngcc0.ɵɵelementStart(13, "tspan", 21);
    ɵngcc0.ɵɵtext(14, "</null>");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(15, "rect", 22);
    ɵngcc0.ɵɵelement(16, "rect", 23);
    ɵngcc0.ɵɵelement(17, "path", 24);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} }
function ThyEmptyComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, ThyEmptyComponent_ng_template_2_thy_icon_0_Template, 1, 1, "thy-icon", 7);
    ɵngcc0.ɵɵtemplate(1, ThyEmptyComponent_ng_template_2_ng_template_1_Template, 18, 0, "ng-template", null, 8, ɵngcc0.ɵɵtemplateRefExtractor);
} if (rf & 2) {
    const _r6 = ɵngcc0.ɵɵreference(2);
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngIf", ctx_r2.thyIconName)("ngIfElse", _r6);
} }
function ThyEmptyComponent_div_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 25);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r3.thyDescription, "\n");
} }
function ThyEmptyComponent_div_7_ng_template_1_Template(rf, ctx) { }
function ThyEmptyComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 26);
    ɵngcc0.ɵɵtemplate(1, ThyEmptyComponent_div_7_ng_template_1_Template, 0, 0, "ng-template", 27);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r4.extraTemplateRef);
} }
const _c1 = function (a0, a1) { return { "thy-empty-text": a0, "thy-empty-text-with-extra": a1 }; };
const sizeClassMap = {
    lg: ['thy-empty-state', 'thy-empty-state--lg'],
    md: ['thy-empty-state'],
    sm: ['thy-empty-state', 'thy-empty-state--sm']
};
const sizeMap = {
    lg: {
        height: 168,
        offsetTop: 30,
        defaultMarginTop: 120 // 不自动计算默认的 top 距离
    },
    md: {
        height: 118,
        offsetTop: 20,
        defaultMarginTop: 10
    },
    sm: {
        height: 78,
        offsetTop: 10,
        defaultMarginTop: 10
    }
};
export class ThyEmptyComponent {
    constructor(thyTranslate, thyEmptyConfig, elementRef, renderer, ngZone) {
        this.thyTranslate = thyTranslate;
        this.thyEmptyConfig = thyEmptyConfig;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.ngZone = ngZone;
        this.sizeClass = sizeClassMap['md'].join(' ');
    }
    set thySize(value) {
        const classList = sizeClassMap[value || 'md'];
        if (classList) {
            this.sizeClass = classList.join(' ');
        }
    }
    get displayText() {
        if (this.thyMessage) {
            return this.thyMessage;
        }
        else if (this.thyTranslationKey) {
            return this.thyTranslate.instant(this.thyTranslationKey, this.thyTranslationValues);
        }
        else if (this.thyEntityName) {
            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {
                target: this.thyEntityName
            });
        }
        else if (this.thyEntityNameTranslateKey) {
            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {
                target: this.thyTranslate.instant(this.thyEntityNameTranslateKey)
            });
        }
        else {
            return this.thyTranslate.instant(this.thyEmptyConfig.noResultTranslateKey);
        }
    }
    _calculatePosition() {
        const sizeOptions = sizeMap[this.thySize || 'md'];
        const topAuto = coerceBooleanProperty(this.thyTopAuto);
        let marginTop = null;
        if (topAuto) {
            // 选择参考父容器居中
            const containerElement = this.thyContainer ? this.thyContainer.nativeElement : this.elementRef.nativeElement.parentElement;
            // containerElement.height;
            let emptyStateHeight = this.elementRef.nativeElement.offsetHeight;
            // 高度没有自动计算出来使用默认值
            if (emptyStateHeight <= 10) {
                emptyStateHeight = sizeOptions.height;
            }
            marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2 - sizeOptions.offsetTop;
            // marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2;
            if (marginTop < 0) {
                marginTop = 0; // sizeOptions.defaultMarginTop;
            }
        }
        else {
            if (this.thyMarginTop) {
                marginTop = this.thyMarginTop;
            }
            else {
                marginTop = 0; // sizeOptions.defaultMarginTop;
            }
        }
        if (marginTop) {
            this.renderer.setStyle(this.elementRef.nativeElement, 'marginTop', marginTop + 'px');
        }
    }
    ngOnInit() { }
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            setTimeout(() => {
                this._calculatePosition();
            }, 50);
        });
    }
}
ThyEmptyComponent.ɵfac = function ThyEmptyComponent_Factory(t) { return new (t || ThyEmptyComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ThyTranslate), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ThyEmptyConfig), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
ThyEmptyComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ThyEmptyComponent, selectors: [["thy-empty"]], contentQueries: function ThyEmptyComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, _c0, true);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.extraTemplateRef = _t.first);
    } }, hostVars: 2, hostBindings: function ThyEmptyComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassMap(ctx.sizeClass);
    } }, inputs: { thySize: "thySize", thyMessage: "thyMessage", thyTranslationKey: "thyTranslationKey", thyTranslationValues: "thyTranslationValues", thyEntityName: "thyEntityName", thyEntityNameTranslateKey: "thyEntityNameTranslateKey", thyIconName: "thyIconName", thyMarginTop: "thyMarginTop", thyTopAuto: "thyTopAuto", thyContainer: "thyContainer", thyImageUrl: "thyImageUrl", thyDescription: "thyDescription" }, decls: 8, vars: 9, consts: [[1, "thy-empty-icon"], ["class", "empty-img", 3, "src", 4, "ngIf", "ngIfElse"], ["icon", ""], [3, "ngClass"], ["class", "thy-empty-description", 4, "ngIf"], ["class", "thy-empty-extra", 4, "ngIf"], [1, "empty-img", 3, "src"], ["class", "empty-icon", 3, "thyIconName", 4, "ngIf", "ngIfElse"], ["svg", ""], [1, "empty-icon", 3, "thyIconName"], ["width", "148px", "height", "134px", "viewBox", "0 0 148 134", "version", "1.1", "xmlns", "http://www.w3.org/2000/svg", 0, "xmlns", "xlink", "http://www.w3.org/1999/xlink"], ["x", "0.0%", "y", "0.0%", "width", "100.0%", "height", "100.0%", "filterUnits", "objectBoundingBox", "id", "filter-1"], ["stdDeviation", "0", "in", "SourceGraphic"], ["id", "148x134", "stroke", "none", "stroke-width", "1", "fill", "none", "fill-rule", "evenodd"], ["id", "\u7F16\u7EC4-6", "transform", "translate(1.000000, 1.000000)"], ["id", "\u692D\u5706\u5F62", "fill", "#EDEEF2", "opacity", "0.3", "filter", "url(#filter-1)", "cx", "73.0800017", "cy", "115.920003", "rx", "73.0800017", "ry", "16.8000004"], ["id", "\u7F16\u7EC4-5", "transform", "translate(15.120000, 0.000000)"], ["id", "\u77E9\u5F62", "fill", "#E2E4E9", "points", "19.2789848 49.5600011 99.1200023 48.7200011 117.600003 75.9297673 117.600003 92.313049 0 92.313049 0 75.0356267"], ["d", "M23.5200005,0 L94.0800002,0 C97.7913538,2.06413823e-16 100.8,3.00864655 100.8,6.72000015 L100.8,99.1200023 L100.8,99.1200023 L16.8000004,99.1200023 L16.8000004,6.72000015 C16.8000004,3.00864655 19.8086469,1.56994302e-15 23.5200005,0 Z", "id", "\u77E9\u5F62", "fill", "#F9FAFB"], ["d", "M30.9200007,12.4400003 L86.6800019,12.4400003 C88.5356787,12.4400003 90.040002,13.9443236 90.040002,15.8000004 L90.040002,42.000001 C90.040002,43.8556778 88.5356787,45.360001 86.6800019,45.360001 L30.9200007,45.360001 C29.0643239,45.360001 27.5600006,43.8556778 27.5600006,42.000001 L27.5600006,15.8000004 C27.5600006,13.9443236 29.0643239,12.4400003 30.9200007,12.4400003 Z", "id", "\u77E9\u5F62", "fill", "#E8EAEE"], ["id", "</null>", "font-family", "PingFangSC-Medium, PingFang SC", "font-size", "15.1200003", "font-weight", "400", "fill", "#BCBECD"], ["x", "33.6000008", "y", "32.8000004"], ["id", "\u77E9\u5F62", "fill", "#E8EAEE", "x", "27.5600006", "y", "52.0800012", "width", "61.4800014", "height", "5.04000011", "rx", "2.52000006"], ["id", "\u77E9\u5F62\u5907\u4EFD", "fill", "#E8EAEE", "x", "27.5600006", "y", "63.8400014", "width", "61.4800014", "height", "5.04000011", "rx", "2.52000006"], ["d", "M0,75.6000017 L29.280235,75.6000017 C32.0637502,75.6000017 34.3202352,77.8564866 34.3202352,80.6400018 L34.3202352,86.2591426 C34.3202352,89.0426578 36.5767201,91.2991427 39.3602353,91.2991427 L78.4136737,91.2991427 C81.1971889,91.2991427 83.4536738,89.0426578 83.4536738,86.2591426 L83.4536738,80.6400018 C83.4536738,77.8564866 85.7101587,75.6000017 88.4936739,75.6000017 L117.600003,75.6000017 L117.600003,75.6000017 L117.600003,110.880003 C117.600003,115.519195 113.839194,119.280003 109.200002,119.280003 L8.40000019,119.280003 C3.76080819,119.280003 -6.53729019e-15,115.519195 0,110.880003 L0,75.6000017 L0,75.6000017 Z", "id", "\u77E9\u5F62", "fill", "#EDEFF2"], [1, "thy-empty-description"], [1, "thy-empty-extra"], [3, "ngTemplateOutlet"]], template: function ThyEmptyComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtemplate(1, ThyEmptyComponent_img_1_Template, 1, 1, "img", 1);
        ɵngcc0.ɵɵtemplate(2, ThyEmptyComponent_ng_template_2_Template, 3, 2, "ng-template", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(4, "div", 3);
        ɵngcc0.ɵɵtext(5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, ThyEmptyComponent_div_6_Template, 2, 1, "div", 4);
        ɵngcc0.ɵɵtemplate(7, ThyEmptyComponent_div_7_Template, 2, 1, "div", 5);
    } if (rf & 2) {
        const _r1 = ɵngcc0.ɵɵreference(3);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.thyImageUrl)("ngIfElse", _r1);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(6, _c1, !ctx.thyDescription, ctx.thyDescription));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.displayText, "\n");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.thyDescription);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.extraTemplateRef);
    } }, directives: [ɵngcc3.NgIf, ɵngcc3.NgClass, ɵngcc4.ThyIconComponent, ɵngcc3.NgTemplateOutlet], encapsulation: 2 });
ThyEmptyComponent.ctorParameters = () => [
    { type: ThyTranslate },
    { type: ThyEmptyConfig },
    { type: ElementRef },
    { type: Renderer2 },
    { type: NgZone }
];
ThyEmptyComponent.propDecorators = {
    sizeClass: [{ type: HostBinding, args: ['class',] }],
    thyMessage: [{ type: Input }],
    thyTranslationKey: [{ type: Input }],
    thyTranslationValues: [{ type: Input }],
    thyEntityName: [{ type: Input }],
    thyEntityNameTranslateKey: [{ type: Input }],
    thyIconName: [{ type: Input }],
    thySize: [{ type: Input }],
    thyMarginTop: [{ type: Input }],
    thyTopAuto: [{ type: Input }],
    thyContainer: [{ type: Input }],
    thyImageUrl: [{ type: Input }],
    thyDescription: [{ type: Input }],
    extraTemplateRef: [{ type: ContentChild, args: ['extra',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyEmptyComponent, [{
        type: Component,
        args: [{
                selector: 'thy-empty',
                template: "<div class=\"thy-empty-icon\">\n  <img *ngIf=\"thyImageUrl; else icon\" [src]=\"thyImageUrl\" class=\"empty-img\" />\n  <ng-template #icon>\n    <thy-icon class=\"empty-icon\" [thyIconName]=\"thyIconName\" *ngIf=\"thyIconName; else svg\"></thy-icon>\n    <ng-template #svg>\n      <ng-container>\n        <svg\n          width=\"148px\"\n          height=\"134px\"\n          viewBox=\"0 0 148 134\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <defs>\n            <filter x=\"0.0%\" y=\"0.0%\" width=\"100.0%\" height=\"100.0%\" filterUnits=\"objectBoundingBox\" id=\"filter-1\">\n              <feGaussianBlur stdDeviation=\"0\" in=\"SourceGraphic\"></feGaussianBlur>\n            </filter>\n          </defs>\n          <g id=\"148x134\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <g id=\"\u7F16\u7EC4-6\" transform=\"translate(1.000000, 1.000000)\">\n              <ellipse\n                id=\"\u692D\u5706\u5F62\"\n                fill=\"#EDEEF2\"\n                opacity=\"0.3\"\n                filter=\"url(#filter-1)\"\n                cx=\"73.0800017\"\n                cy=\"115.920003\"\n                rx=\"73.0800017\"\n                ry=\"16.8000004\"\n              ></ellipse>\n              <g id=\"\u7F16\u7EC4-5\" transform=\"translate(15.120000, 0.000000)\">\n                <polygon\n                  id=\"\u77E9\u5F62\"\n                  fill=\"#E2E4E9\"\n                  points=\"19.2789848 49.5600011 99.1200023 48.7200011 117.600003 75.9297673 117.600003 92.313049 0 92.313049 0 75.0356267\"\n                ></polygon>\n                <path\n                  d=\"M23.5200005,0 L94.0800002,0 C97.7913538,2.06413823e-16 100.8,3.00864655 100.8,6.72000015 L100.8,99.1200023 L100.8,99.1200023 L16.8000004,99.1200023 L16.8000004,6.72000015 C16.8000004,3.00864655 19.8086469,1.56994302e-15 23.5200005,0 Z\"\n                  id=\"\u77E9\u5F62\"\n                  fill=\"#F9FAFB\"\n                ></path>\n                <path\n                  d=\"M30.9200007,12.4400003 L86.6800019,12.4400003 C88.5356787,12.4400003 90.040002,13.9443236 90.040002,15.8000004 L90.040002,42.000001 C90.040002,43.8556778 88.5356787,45.360001 86.6800019,45.360001 L30.9200007,45.360001 C29.0643239,45.360001 27.5600006,43.8556778 27.5600006,42.000001 L27.5600006,15.8000004 C27.5600006,13.9443236 29.0643239,12.4400003 30.9200007,12.4400003 Z\"\n                  id=\"\u77E9\u5F62\"\n                  fill=\"#E8EAEE\"\n                ></path>\n                <text\n                  id=\"&lt;/null&gt;\"\n                  font-family=\"PingFangSC-Medium, PingFang SC\"\n                  font-size=\"15.1200003\"\n                  font-weight=\"400\"\n                  fill=\"#BCBECD\"\n                >\n                  <tspan x=\"33.6000008\" y=\"32.8000004\">&lt;/null&gt;</tspan>\n                </text>\n                <rect id=\"\u77E9\u5F62\" fill=\"#E8EAEE\" x=\"27.5600006\" y=\"52.0800012\" width=\"61.4800014\" height=\"5.04000011\" rx=\"2.52000006\"></rect>\n                <rect\n                  id=\"\u77E9\u5F62\u5907\u4EFD\"\n                  fill=\"#E8EAEE\"\n                  x=\"27.5600006\"\n                  y=\"63.8400014\"\n                  width=\"61.4800014\"\n                  height=\"5.04000011\"\n                  rx=\"2.52000006\"\n                ></rect>\n                <path\n                  d=\"M0,75.6000017 L29.280235,75.6000017 C32.0637502,75.6000017 34.3202352,77.8564866 34.3202352,80.6400018 L34.3202352,86.2591426 C34.3202352,89.0426578 36.5767201,91.2991427 39.3602353,91.2991427 L78.4136737,91.2991427 C81.1971889,91.2991427 83.4536738,89.0426578 83.4536738,86.2591426 L83.4536738,80.6400018 C83.4536738,77.8564866 85.7101587,75.6000017 88.4936739,75.6000017 L117.600003,75.6000017 L117.600003,75.6000017 L117.600003,110.880003 C117.600003,115.519195 113.839194,119.280003 109.200002,119.280003 L8.40000019,119.280003 C3.76080819,119.280003 -6.53729019e-15,115.519195 0,110.880003 L0,75.6000017 L0,75.6000017 Z\"\n                  id=\"\u77E9\u5F62\"\n                  fill=\"#EDEFF2\"\n                ></path>\n              </g>\n            </g>\n          </g>\n        </svg>\n      </ng-container>\n    </ng-template>\n  </ng-template>\n</div>\n\n<div [ngClass]=\"{ 'thy-empty-text': !thyDescription, 'thy-empty-text-with-extra': thyDescription }\">\n  {{ displayText }}\n</div>\n\n<div class=\"thy-empty-description\" *ngIf=\"thyDescription\">\n  {{ thyDescription }}\n</div>\n\n<div class=\"thy-empty-extra\" *ngIf=\"extraTemplateRef\">\n  <ng-template [ngTemplateOutlet]=\"extraTemplateRef\"></ng-template>\n</div>\n"
            }]
    }], function () { return [{ type: ɵngcc1.ThyTranslate }, { type: ɵngcc2.ThyEmptyConfig }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.NgZone }]; }, { sizeClass: [{
            type: HostBinding,
            args: ['class']
        }], thySize: [{
            type: Input
        }], thyMessage: [{
            type: Input
        }], thyTranslationKey: [{
            type: Input
        }], thyTranslationValues: [{
            type: Input
        }], thyEntityName: [{
            type: Input
        }], thyEntityNameTranslateKey: [{
            type: Input
        }], thyIconName: [{
            type: Input
        }], thyMarginTop: [{
            type: Input
        }], thyTopAuto: [{
            type: Input
        }], thyContainer: [{
            type: Input
        }], thyImageUrl: [{
            type: Input
        }], thyDescription: [{
            type: Input
        }], extraTemplateRef: [{
            type: ContentChild,
            args: ['extra']
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW1wdHkuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZW1wdHkvZW1wdHkuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUV4RCxPQUFPLEVBRUgsU0FBUyxFQUNULFlBQVksRUFDWixVQUFVLEVBQ1YsV0FBVyxFQUNYLEtBQUssRUFDTCxNQUFNLEVBRU4sU0FBUyxFQUNULFdBQVcsRUFDZCxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVoRCxNQUFNLFlBQVksR0FBUTtBQUMxQixJQUFJLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixFQUFFLHFCQUFxQixDQUFDO0FBQ2xELElBQUksRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUM7QUFDM0IsSUFBSSxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxxQkFBcUIsQ0FBQztBQUNsRCxDQUFDLENBQUM7QUFDRixNQUFNLE9BQU8sR0FBUTtBQUNyQixJQUFJLEVBQUUsRUFBRTtBQUNSLFFBQVEsTUFBTSxFQUFFLEdBQUc7QUFBRSxRQUNiLFNBQVMsRUFBRSxFQUFFO0FBQUUsUUFDZixnQkFBZ0IsRUFBRSxHQUFHLENBQUMsa0JBQWtCO0FBQ2hELEtBQUs7QUFDTCxJQUFJLEVBQUUsRUFBRTtBQUNSLFFBQVEsTUFBTSxFQUFFLEdBQUc7QUFDbkIsUUFBUSxTQUFTLEVBQUUsRUFBRTtBQUNyQixRQUFRLGdCQUFnQixFQUFFLEVBQUU7QUFDNUIsS0FBSztBQUNMLElBQUksRUFBRSxFQUFFO0FBQ1IsUUFBUSxNQUFNLEVBQUUs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RUFBRSxDQUFDLENBQUM7QUFDbkIsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNYLElBQUksQ0FBQztBQUNMOzZDQTNHQyxTQUFTLFNBQUMsa0JBQ1AsUUFBUSxFQUFFLFdBQVcsa0JBQ3JCOzs7Ozs7Ozs7Ozs7O2dCQUFxQyxjQUN4Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7MEhBQ0k7QUFBQztBQUEyQyxZQTdDeEMsWUFBWTtBQUFJLFlBZ0JoQixjQUFjO0FBQUksWUFUdkIsVUFBVTtBQUNaLFlBSUUsU0FBUztBQUNYLFlBSEUsTUFBTTtBQUNUO0FBQUc7QUFFVSx3QkFpQ1QsV0FBVyxTQUFDLE9BQU87QUFBTyx5QkFHMUIsS0FBSztBQUFLLGdDQUdWLEtBQUs7QUFBSyxtQ0FFVixLQUFLO0FBQUssNEJBR1YsS0FBSztBQUFLLHdDQUdWLEtBQUs7QUFBSywwQkFFVixLQUFLO0FBQUssc0JBRVYsS0FBSztBQUNSLDJCQU9HLEtBQUs7QUFBSyx5QkFFVixLQUFLO0FBQUssMkJBRVYsS0FBSztBQUFLLDBCQUVWLEtBQUs7QUFBSyw2QkFFVixLQUFLO0FBQUssK0JBRVYsWUFBWSxTQUFDLE9BQU87QUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGh5VHJhbnNsYXRlIH0gZnJvbSAnbmd4LXRldGh5cy9jb3JlJztcbmltcG9ydCB7IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSB9IGZyb20gJ25neC10ZXRoeXMvdXRpbCc7XG5cbmltcG9ydCB7XG4gICAgQWZ0ZXJWaWV3SW5pdCxcbiAgICBDb21wb25lbnQsXG4gICAgQ29udGVudENoaWxkLFxuICAgIEVsZW1lbnRSZWYsXG4gICAgSG9zdEJpbmRpbmcsXG4gICAgSW5wdXQsXG4gICAgTmdab25lLFxuICAgIE9uSW5pdCxcbiAgICBSZW5kZXJlcjIsXG4gICAgVGVtcGxhdGVSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFRoeUVtcHR5Q29uZmlnIH0gZnJvbSAnLi9lbXB0eS5jb25maWcnO1xuXG5jb25zdCBzaXplQ2xhc3NNYXA6IGFueSA9IHtcbiAgICBsZzogWyd0aHktZW1wdHktc3RhdGUnLCAndGh5LWVtcHR5LXN0YXRlLS1sZyddLFxuICAgIG1kOiBbJ3RoeS1lbXB0eS1zdGF0ZSddLFxuICAgIHNtOiBbJ3RoeS1lbXB0eS1zdGF0ZScsICd0aHktZW1wdHktc3RhdGUtLXNtJ11cbn07XG5jb25zdCBzaXplTWFwOiBhbnkgPSB7XG4gICAgbGc6IHtcbiAgICAgICAgaGVpZ2h0OiAxNjgsIC8vIOepuuaPkOekuueahOmrmOW6plxuICAgICAgICBvZmZzZXRUb3A6IDMwLCAvLyDnqbrmj5DnpLrlm77moIflkozlpKflsI/kuYvpl7TnmoTnqbrnmb3ot53nprvvvIzpnIDopoHpmaTljrvvvIzlkKbliJnkvJrkuI3lsYXkuK1cbiAgICAgICAgZGVmYXVsdE1hcmdpblRvcDogMTIwIC8vIOS4jeiHquWKqOiuoeeul+m7mOiupOeahCB0b3Ag6Led56a7XG4gICAgfSxcbiAgICBtZDoge1xuICAgICAgICBoZWlnaHQ6IDExOCxcbiAgICAgICAgb2Zmc2V0VG9wOiAyMCxcbiAgICAgICAgZGVmYXVsdE1hcmdpblRvcDogMTBcbiAgICB9LFxuICAgIHNtOiB7XG4gICAgICAgIGhlaWdodDogNzgsXG4gICAgICAgIG9mZnNldFRvcDogMTAsXG4gICAgICAgIGRlZmF1bHRNYXJnaW5Ub3A6IDEwXG4gICAgfVxufTtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd0aHktZW1wdHknLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9lbXB0eS5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgVGh5RW1wdHlDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MnKSBzaXplQ2xhc3MgPSBzaXplQ2xhc3NNYXBbJ21kJ10uam9pbignICcpO1xuXG4gICAgLy8g5pi+56S655qE5paH5pys77yM5LyY5YWI57qnIDEwMCDmnIDpq5hcbiAgICBASW5wdXQoKSB0aHlNZXNzYWdlOiBzdHJpbmc7XG5cbiAgICAvLyDmmL7npLrmlofmnKznmoTlpJror63oqIAgS2V5IOS8mOWFiOe6pyA5OVxuICAgIEBJbnB1dCgpIHRoeVRyYW5zbGF0aW9uS2V5OiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKSB0aHlUcmFuc2xhdGlvblZhbHVlczogYW55O1xuXG4gICAgLy8g5pi+56S66buY6K6k5o+Q56S65L+h5oGv77yM5pu/5o2i55uu5qCH5ZCN56ewXG4gICAgQElucHV0KCkgdGh5RW50aXR5TmFtZTogc3RyaW5nO1xuXG4gICAgLy8g5pi+56S66buY6K6k5o+Q56S65L+h5oGv77yM5pu/5o2i55uu5qCH5ZCN56ew55qEIHRyYW5zbGF0ZUtleVxuICAgIEBJbnB1dCgpIHRoeUVudGl0eU5hbWVUcmFuc2xhdGVLZXk6IHN0cmluZztcblxuICAgIEBJbnB1dCgpIHRoeUljb25OYW1lOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlTaXplKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY2xhc3NMaXN0ID0gc2l6ZUNsYXNzTWFwW3ZhbHVlIHx8ICdtZCddO1xuICAgICAgICBpZiAoY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLnNpemVDbGFzcyA9IGNsYXNzTGlzdC5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASW5wdXQoKSB0aHlNYXJnaW5Ub3A6IG51bWJlciB8IHN0cmluZztcblxuICAgIEBJbnB1dCgpIHRoeVRvcEF1dG86IGJvb2xlYW47XG5cbiAgICBASW5wdXQoKSB0aHlDb250YWluZXI6IEVsZW1lbnRSZWY7XG5cbiAgICBASW5wdXQoKSB0aHlJbWFnZVVybDogc3RyaW5nO1xuXG4gICAgQElucHV0KCkgdGh5RGVzY3JpcHRpb246IHN0cmluZztcblxuICAgIEBDb250ZW50Q2hpbGQoJ2V4dHJhJykgZXh0cmFUZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIGdldCBkaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMudGh5TWVzc2FnZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGh5TWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRoeVRyYW5zbGF0aW9uS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aHlUcmFuc2xhdGUuaW5zdGFudCh0aGlzLnRoeVRyYW5zbGF0aW9uS2V5LCB0aGlzLnRoeVRyYW5zbGF0aW9uVmFsdWVzKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRoeUVudGl0eU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRoeVRyYW5zbGF0ZS5pbnN0YW50KHRoaXMudGh5RW1wdHlDb25maWcubm9SZXN1bHRXaXRoVGFyZ2V0VHJhbnNsYXRlS2V5LCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLnRoeUVudGl0eU5hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGh5RW50aXR5TmFtZVRyYW5zbGF0ZUtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGh5VHJhbnNsYXRlLmluc3RhbnQodGhpcy50aHlFbXB0eUNvbmZpZy5ub1Jlc3VsdFdpdGhUYXJnZXRUcmFuc2xhdGVLZXksIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMudGh5VHJhbnNsYXRlLmluc3RhbnQodGhpcy50aHlFbnRpdHlOYW1lVHJhbnNsYXRlS2V5KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aHlUcmFuc2xhdGUuaW5zdGFudCh0aGlzLnRoeUVtcHR5Q29uZmlnLm5vUmVzdWx0VHJhbnNsYXRlS2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jYWxjdWxhdGVQb3NpdGlvbigpIHtcbiAgICAgICAgY29uc3Qgc2l6ZU9wdGlvbnMgPSBzaXplTWFwW3RoaXMudGh5U2l6ZSB8fCAnbWQnXTtcbiAgICAgICAgY29uc3QgdG9wQXV0byA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh0aGlzLnRoeVRvcEF1dG8pO1xuICAgICAgICBsZXQgbWFyZ2luVG9wID0gbnVsbDtcbiAgICAgICAgaWYgKHRvcEF1dG8pIHtcbiAgICAgICAgICAgIC8vIOmAieaLqeWPguiAg+eItuWuueWZqOWxheS4rVxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyRWxlbWVudCA9IHRoaXMudGh5Q29udGFpbmVyID8gdGhpcy50aHlDb250YWluZXIubmF0aXZlRWxlbWVudCA6IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAvLyBjb250YWluZXJFbGVtZW50LmhlaWdodDtcbiAgICAgICAgICAgIGxldCBlbXB0eVN0YXRlSGVpZ2h0ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgLy8g6auY5bqm5rKh5pyJ6Ieq5Yqo6K6h566X5Ye65p2l5L2/55So6buY6K6k5YC8XG4gICAgICAgICAgICBpZiAoZW1wdHlTdGF0ZUhlaWdodCA8PSAxMCkge1xuICAgICAgICAgICAgICAgIGVtcHR5U3RhdGVIZWlnaHQgPSBzaXplT3B0aW9ucy5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXJnaW5Ub3AgPSAoY29udGFpbmVyRWxlbWVudC5vZmZzZXRIZWlnaHQgLSBlbXB0eVN0YXRlSGVpZ2h0KSAvIDIgLSBzaXplT3B0aW9ucy5vZmZzZXRUb3A7XG4gICAgICAgICAgICAvLyBtYXJnaW5Ub3AgPSAoY29udGFpbmVyRWxlbWVudC5vZmZzZXRIZWlnaHQgLSBlbXB0eVN0YXRlSGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICBpZiAobWFyZ2luVG9wIDwgMCkge1xuICAgICAgICAgICAgICAgIG1hcmdpblRvcCA9IDA7IC8vIHNpemVPcHRpb25zLmRlZmF1bHRNYXJnaW5Ub3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy50aHlNYXJnaW5Ub3ApIHtcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3AgPSB0aGlzLnRoeU1hcmdpblRvcDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wID0gMDsgLy8gc2l6ZU9wdGlvbnMuZGVmYXVsdE1hcmdpblRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWFyZ2luVG9wKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnbWFyZ2luVG9wJywgbWFyZ2luVG9wICsgJ3B4Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgdGh5VHJhbnNsYXRlOiBUaHlUcmFuc2xhdGUsXG4gICAgICAgIHByaXZhdGUgdGh5RW1wdHlDb25maWc6IFRoeUVtcHR5Q29uZmlnLFxuICAgICAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICAgICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZVxuICAgICkge31cblxuICAgIG5nT25Jbml0KCkge31cblxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlUG9zaXRpb24oKTtcbiAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl19