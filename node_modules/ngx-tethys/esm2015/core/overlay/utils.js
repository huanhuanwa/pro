import { POSITION_MAP } from './overlay-position-map';
const connectionFallbackPositionsMap = {
    top: ['topLeft', 'topRight', 'bottom', 'bottomLeft', 'bottomRight'],
    topLeft: ['top', 'topRight', 'bottomLeft', 'bottom', 'bottomRight'],
    topRight: ['top', 'topLeft', 'bottomRight', 'bottom', 'bottomLeft'],
    bottom: ['bottomLeft', 'bottomRight', 'top', 'topLeft', 'topRight'],
    bottomLeft: ['bottom', 'bottomRight', 'topLeft', 'top', 'topRight'],
    bottomRight: ['bottom', 'bottomLeft', 'topRight', 'top', 'topLeft'],
    left: ['leftTop', 'leftBottom', 'right', 'rightTop', 'rightBottom'],
    leftTop: ['left', 'leftBottom', 'rightTop', 'right', 'rightBottom'],
    leftBottom: ['left', 'leftTop', 'rightBottom', 'right', 'rightTop'],
    right: ['rightTop', 'rightBottom', 'left', 'leftTop', 'leftBottom'],
    rightTop: ['right', 'rightBottom', 'leftTop', 'left', 'leftBottom'],
    rightBottom: ['right', 'rightTop', 'leftBottom', 'left', 'leftTop']
};
export function buildConnectedPositionOffset(placement, offset) {
    const connectedPositionOffset = {};
    if (placement.startsWith('top')) {
        connectedPositionOffset.offsetY = -offset;
    }
    else if (placement.startsWith('bottom')) {
        connectedPositionOffset.offsetY = offset;
    }
    else if (placement.startsWith('left')) {
        connectedPositionOffset.offsetX = -offset;
    }
    else if (placement.startsWith('right')) {
        connectedPositionOffset.offsetX = offset;
    }
    else {
        // do nothings
    }
    return connectedPositionOffset;
}
export function buildConnectedPositionPair(placement, offset, panelClassPrefix) {
    const position = Object.assign(Object.assign({}, POSITION_MAP[placement]), (offset ? buildConnectedPositionOffset(placement, offset) : null));
    if (panelClassPrefix) {
        position.panelClass = `${panelClassPrefix}-${placement}`;
    }
    return position;
}
export function getFallbackPlacements(placement) {
    return connectionFallbackPositionsMap[placement] || [];
}
/**
 * get flexible positions by placement, return placement position and it's fallback connection position
 * @example
 * getFlexiblePositions('top', 10, 'thy-overlay')
 * [{topPosition}, {topLeftPosition}, {topRightPosition}, {bottomPosition}, {bottomLeftPosition}, {bottomRightPosition},]
 * @returns [ConnectionPositionPair]
 */
export function getFlexiblePositions(placement, offset, panelClassPrefix) {
    const fallbackPlacements = getFallbackPlacements(placement);
    return [placement, ...fallbackPlacements].map(placementName => {
        return buildConnectedPositionPair(placementName, offset, panelClassPrefix);
    });
}
export function getPlacementByPosition(position) {
    const keyList = ['originX', 'originY', 'overlayX', 'overlayY'];
    for (const placement in POSITION_MAP) {
        if (keyList.every(key => position[key] === POSITION_MAP[placement][key])) {
            return placement;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29yZS9vdmVybGF5L3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUd0RCxNQUFNLDhCQUE4QixHQUFzQztJQUN0RSxHQUFHLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsYUFBYSxDQUFDO0lBQ25FLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxhQUFhLENBQUM7SUFDbkUsUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLFlBQVksQ0FBQztJQUNuRSxNQUFNLEVBQUUsQ0FBQyxZQUFZLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDO0lBQ25FLFVBQVUsRUFBRSxDQUFDLFFBQVEsRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUM7SUFDbkUsV0FBVyxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFNBQVMsQ0FBQztJQUNuRSxJQUFJLEVBQUUsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsYUFBYSxDQUFDO0lBQ25FLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxhQUFhLENBQUM7SUFDbkUsVUFBVSxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQztJQUNuRSxLQUFLLEVBQUUsQ0FBQyxVQUFVLEVBQUUsYUFBYSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxDQUFDO0lBQ25FLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLENBQUM7SUFDbkUsV0FBVyxFQUFFLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQztDQUN0RSxDQUFDO0FBRUYsTUFBTSxVQUFVLDRCQUE0QixDQUFDLFNBQXVCLEVBQUUsTUFBYztJQUNoRixNQUFNLHVCQUF1QixHQUE0QixFQUFFLENBQUM7SUFDNUQsSUFBSSxTQUFTLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQzdCLHVCQUF1QixDQUFDLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQztLQUM3QztTQUFNLElBQUksU0FBUyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRTtRQUN2Qyx1QkFBdUIsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0tBQzVDO1NBQU0sSUFBSSxTQUFTLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3JDLHVCQUF1QixDQUFDLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQztLQUM3QztTQUFNLElBQUksU0FBUyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUN0Qyx1QkFBdUIsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0tBQzVDO1NBQU07UUFDSCxjQUFjO0tBQ2pCO0lBQ0QsT0FBTyx1QkFBdUIsQ0FBQztBQUNuQyxDQUFDO0FBRUQsTUFBTSxVQUFVLDBCQUEwQixDQUN0QyxTQUF1QixFQUN2QixNQUFlLEVBQ2YsZ0JBQXlCO0lBRXpCLE1BQU0sUUFBUSxtQ0FDUCxZQUFZLENBQUMsU0FBUyxDQUFDLEdBQ3ZCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyw0QkFBNEIsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUN2RSxDQUFDO0lBQ0YsSUFBSSxnQkFBZ0IsRUFBRTtRQUNsQixRQUFRLENBQUMsVUFBVSxHQUFHLEdBQUcsZ0JBQWdCLElBQUksU0FBUyxFQUFFLENBQUM7S0FDNUQ7SUFDRCxPQUFPLFFBQVEsQ0FBQztBQUNwQixDQUFDO0FBRUQsTUFBTSxVQUFVLHFCQUFxQixDQUFDLFNBQXVCO0lBQ3pELE9BQU8sOEJBQThCLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzNELENBQUM7QUFFRDs7Ozs7O0dBTUc7QUFDSCxNQUFNLFVBQVUsb0JBQW9CLENBQ2hDLFNBQXVCLEVBQ3ZCLE1BQWUsRUFDZixnQkFBeUI7SUFFekIsTUFBTSxrQkFBa0IsR0FBRyxxQkFBcUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUU1RCxPQUFPLENBQUMsU0FBUyxFQUFFLEdBQUcsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEVBQUU7UUFDMUQsT0FBTywwQkFBMEIsQ0FBQyxhQUFhLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDL0UsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBRUQsTUFBTSxVQUFVLHNCQUFzQixDQUFDLFFBQWdDO0lBQ25FLE1BQU0sT0FBTyxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDL0QsS0FBSyxNQUFNLFNBQVMsSUFBSSxZQUFZLEVBQUU7UUFDbEMsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ3RFLE9BQU8sU0FBUyxDQUFDO1NBQ3BCO0tBQ0o7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGh5UGxhY2VtZW50LCBDb25uZWN0ZWRQb3NpdGlvbk9mZnNldCB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFBPU0lUSU9OX01BUCB9IGZyb20gJy4vb3ZlcmxheS1wb3NpdGlvbi1tYXAnO1xuaW1wb3J0IHsgQ29ubmVjdGlvblBvc2l0aW9uUGFpciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcblxuY29uc3QgY29ubmVjdGlvbkZhbGxiYWNrUG9zaXRpb25zTWFwOiB7IFtrZXk6IHN0cmluZ106IFRoeVBsYWNlbWVudFtdIH0gPSB7XG4gICAgdG9wOiBbJ3RvcExlZnQnLCAndG9wUmlnaHQnLCAnYm90dG9tJywgJ2JvdHRvbUxlZnQnLCAnYm90dG9tUmlnaHQnXSxcbiAgICB0b3BMZWZ0OiBbJ3RvcCcsICd0b3BSaWdodCcsICdib3R0b21MZWZ0JywgJ2JvdHRvbScsICdib3R0b21SaWdodCddLFxuICAgIHRvcFJpZ2h0OiBbJ3RvcCcsICd0b3BMZWZ0JywgJ2JvdHRvbVJpZ2h0JywgJ2JvdHRvbScsICdib3R0b21MZWZ0J10sXG4gICAgYm90dG9tOiBbJ2JvdHRvbUxlZnQnLCAnYm90dG9tUmlnaHQnLCAndG9wJywgJ3RvcExlZnQnLCAndG9wUmlnaHQnXSxcbiAgICBib3R0b21MZWZ0OiBbJ2JvdHRvbScsICdib3R0b21SaWdodCcsICd0b3BMZWZ0JywgJ3RvcCcsICd0b3BSaWdodCddLFxuICAgIGJvdHRvbVJpZ2h0OiBbJ2JvdHRvbScsICdib3R0b21MZWZ0JywgJ3RvcFJpZ2h0JywgJ3RvcCcsICd0b3BMZWZ0J10sXG4gICAgbGVmdDogWydsZWZ0VG9wJywgJ2xlZnRCb3R0b20nLCAncmlnaHQnLCAncmlnaHRUb3AnLCAncmlnaHRCb3R0b20nXSxcbiAgICBsZWZ0VG9wOiBbJ2xlZnQnLCAnbGVmdEJvdHRvbScsICdyaWdodFRvcCcsICdyaWdodCcsICdyaWdodEJvdHRvbSddLFxuICAgIGxlZnRCb3R0b206IFsnbGVmdCcsICdsZWZ0VG9wJywgJ3JpZ2h0Qm90dG9tJywgJ3JpZ2h0JywgJ3JpZ2h0VG9wJ10sXG4gICAgcmlnaHQ6IFsncmlnaHRUb3AnLCAncmlnaHRCb3R0b20nLCAnbGVmdCcsICdsZWZ0VG9wJywgJ2xlZnRCb3R0b20nXSxcbiAgICByaWdodFRvcDogWydyaWdodCcsICdyaWdodEJvdHRvbScsICdsZWZ0VG9wJywgJ2xlZnQnLCAnbGVmdEJvdHRvbSddLFxuICAgIHJpZ2h0Qm90dG9tOiBbJ3JpZ2h0JywgJ3JpZ2h0VG9wJywgJ2xlZnRCb3R0b20nLCAnbGVmdCcsICdsZWZ0VG9wJ11cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZENvbm5lY3RlZFBvc2l0aW9uT2Zmc2V0KHBsYWNlbWVudDogVGh5UGxhY2VtZW50LCBvZmZzZXQ6IG51bWJlcik6IENvbm5lY3RlZFBvc2l0aW9uT2Zmc2V0IHtcbiAgICBjb25zdCBjb25uZWN0ZWRQb3NpdGlvbk9mZnNldDogQ29ubmVjdGVkUG9zaXRpb25PZmZzZXQgPSB7fTtcbiAgICBpZiAocGxhY2VtZW50LnN0YXJ0c1dpdGgoJ3RvcCcpKSB7XG4gICAgICAgIGNvbm5lY3RlZFBvc2l0aW9uT2Zmc2V0Lm9mZnNldFkgPSAtb2Zmc2V0O1xuICAgIH0gZWxzZSBpZiAocGxhY2VtZW50LnN0YXJ0c1dpdGgoJ2JvdHRvbScpKSB7XG4gICAgICAgIGNvbm5lY3RlZFBvc2l0aW9uT2Zmc2V0Lm9mZnNldFkgPSBvZmZzZXQ7XG4gICAgfSBlbHNlIGlmIChwbGFjZW1lbnQuc3RhcnRzV2l0aCgnbGVmdCcpKSB7XG4gICAgICAgIGNvbm5lY3RlZFBvc2l0aW9uT2Zmc2V0Lm9mZnNldFggPSAtb2Zmc2V0O1xuICAgIH0gZWxzZSBpZiAocGxhY2VtZW50LnN0YXJ0c1dpdGgoJ3JpZ2h0JykpIHtcbiAgICAgICAgY29ubmVjdGVkUG9zaXRpb25PZmZzZXQub2Zmc2V0WCA9IG9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkbyBub3RoaW5nc1xuICAgIH1cbiAgICByZXR1cm4gY29ubmVjdGVkUG9zaXRpb25PZmZzZXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZENvbm5lY3RlZFBvc2l0aW9uUGFpcihcbiAgICBwbGFjZW1lbnQ6IFRoeVBsYWNlbWVudCxcbiAgICBvZmZzZXQ/OiBudW1iZXIsXG4gICAgcGFuZWxDbGFzc1ByZWZpeD86IHN0cmluZ1xuKTogQ29ubmVjdGlvblBvc2l0aW9uUGFpciB7XG4gICAgY29uc3QgcG9zaXRpb246IENvbm5lY3Rpb25Qb3NpdGlvblBhaXIgPSB7XG4gICAgICAgIC4uLlBPU0lUSU9OX01BUFtwbGFjZW1lbnRdLFxuICAgICAgICAuLi4ob2Zmc2V0ID8gYnVpbGRDb25uZWN0ZWRQb3NpdGlvbk9mZnNldChwbGFjZW1lbnQsIG9mZnNldCkgOiBudWxsKVxuICAgIH07XG4gICAgaWYgKHBhbmVsQ2xhc3NQcmVmaXgpIHtcbiAgICAgICAgcG9zaXRpb24ucGFuZWxDbGFzcyA9IGAke3BhbmVsQ2xhc3NQcmVmaXh9LSR7cGxhY2VtZW50fWA7XG4gICAgfVxuICAgIHJldHVybiBwb3NpdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZhbGxiYWNrUGxhY2VtZW50cyhwbGFjZW1lbnQ6IFRoeVBsYWNlbWVudCk6IFRoeVBsYWNlbWVudFtdIHtcbiAgICByZXR1cm4gY29ubmVjdGlvbkZhbGxiYWNrUG9zaXRpb25zTWFwW3BsYWNlbWVudF0gfHwgW107XG59XG5cbi8qKlxuICogZ2V0IGZsZXhpYmxlIHBvc2l0aW9ucyBieSBwbGFjZW1lbnQsIHJldHVybiBwbGFjZW1lbnQgcG9zaXRpb24gYW5kIGl0J3MgZmFsbGJhY2sgY29ubmVjdGlvbiBwb3NpdGlvblxuICogQGV4YW1wbGVcbiAqIGdldEZsZXhpYmxlUG9zaXRpb25zKCd0b3AnLCAxMCwgJ3RoeS1vdmVybGF5JylcbiAqIFt7dG9wUG9zaXRpb259LCB7dG9wTGVmdFBvc2l0aW9ufSwge3RvcFJpZ2h0UG9zaXRpb259LCB7Ym90dG9tUG9zaXRpb259LCB7Ym90dG9tTGVmdFBvc2l0aW9ufSwge2JvdHRvbVJpZ2h0UG9zaXRpb259LF1cbiAqIEByZXR1cm5zIFtDb25uZWN0aW9uUG9zaXRpb25QYWlyXVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmxleGlibGVQb3NpdGlvbnMoXG4gICAgcGxhY2VtZW50OiBUaHlQbGFjZW1lbnQsXG4gICAgb2Zmc2V0PzogbnVtYmVyLFxuICAgIHBhbmVsQ2xhc3NQcmVmaXg/OiBzdHJpbmdcbik6IENvbm5lY3Rpb25Qb3NpdGlvblBhaXJbXSB7XG4gICAgY29uc3QgZmFsbGJhY2tQbGFjZW1lbnRzID0gZ2V0RmFsbGJhY2tQbGFjZW1lbnRzKHBsYWNlbWVudCk7XG5cbiAgICByZXR1cm4gW3BsYWNlbWVudCwgLi4uZmFsbGJhY2tQbGFjZW1lbnRzXS5tYXAocGxhY2VtZW50TmFtZSA9PiB7XG4gICAgICAgIHJldHVybiBidWlsZENvbm5lY3RlZFBvc2l0aW9uUGFpcihwbGFjZW1lbnROYW1lLCBvZmZzZXQsIHBhbmVsQ2xhc3NQcmVmaXgpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGxhY2VtZW50QnlQb3NpdGlvbihwb3NpdGlvbjogQ29ubmVjdGlvblBvc2l0aW9uUGFpcikge1xuICAgIGNvbnN0IGtleUxpc3QgPSBbJ29yaWdpblgnLCAnb3JpZ2luWScsICdvdmVybGF5WCcsICdvdmVybGF5WSddO1xuICAgIGZvciAoY29uc3QgcGxhY2VtZW50IGluIFBPU0lUSU9OX01BUCkge1xuICAgICAgICBpZiAoa2V5TGlzdC5ldmVyeShrZXkgPT4gcG9zaXRpb25ba2V5XSA9PT0gUE9TSVRJT05fTUFQW3BsYWNlbWVudF1ba2V5XSkpIHtcbiAgICAgICAgICAgIHJldHVybiBwbGFjZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=