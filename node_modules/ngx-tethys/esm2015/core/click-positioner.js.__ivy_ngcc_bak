import { Injectable } from '@angular/core';
import { ThyClickDispatcher } from './event-dispatchers/index';
import * as i0 from "@angular/core";
import * as i1 from "./event-dispatchers/click-dispatcher";
export class ThyClickPositioner {
    constructor(clickDispatcher) {
        this.clickDispatcher = clickDispatcher;
        this.lastPosition = null;
        this.initialized = false;
    }
    get lastClickPosition() {
        return this.lastPosition;
    }
    runTaskUseLastPosition(task) {
        setTimeout(() => {
            task(this.lastClickPosition);
        });
    }
    initialize() {
        if (this.initialized) {
            return;
        }
        this.initialized = true;
        this.clickDispatcher.clicked(0).subscribe((event) => {
            this.lastPosition = { x: event.clientX, y: event.clientY };
        });
    }
}
ThyClickPositioner.ɵprov = i0.ɵɵdefineInjectable({ factory: function ThyClickPositioner_Factory() { return new ThyClickPositioner(i0.ɵɵinject(i1.ThyClickDispatcher)); }, token: ThyClickPositioner, providedIn: "root" });
ThyClickPositioner.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
ThyClickPositioner.ctorParameters = () => [
    { type: ThyClickDispatcher }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpY2stcG9zaXRpb25lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb3JlL2NsaWNrLXBvc2l0aW9uZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBa0IsTUFBTSxlQUFlLENBQUM7QUFDM0QsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7OztBQVUvRCxNQUFNLE9BQU8sa0JBQWtCO0lBSzNCLFlBQW9CLGVBQW1DO1FBQW5DLG9CQUFlLEdBQWYsZUFBZSxDQUFvQjtRQUovQyxpQkFBWSxHQUFxQixJQUFJLENBQUM7UUFFdEMsZ0JBQVcsR0FBRyxLQUFLLENBQUM7SUFFOEIsQ0FBQztJQUUzRCxJQUFJLGlCQUFpQjtRQUNqQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUVELHNCQUFzQixDQUFDLElBQTJDO1FBQzlELFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDWixJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDakMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsVUFBVTtRQUNOLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNsQixPQUFPO1NBQ1Y7UUFDRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUN4QixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFpQixFQUFFLEVBQUU7WUFDNUQsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDOzs7O1lBNUJKLFVBQVUsU0FBQztnQkFDUixVQUFVLEVBQUUsTUFBTTthQUNyQjs7O1lBVFEsa0JBQWtCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0LCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRoeUNsaWNrRGlzcGF0Y2hlciB9IGZyb20gJy4vZXZlbnQtZGlzcGF0Y2hlcnMvaW5kZXgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRoeUNsaWNrUG9zaXRpb24ge1xuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG59XG5cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgVGh5Q2xpY2tQb3NpdGlvbmVyIHtcbiAgICBwcml2YXRlIGxhc3RQb3NpdGlvbjogVGh5Q2xpY2tQb3NpdGlvbiA9IG51bGw7XG5cbiAgICBwcml2YXRlIGluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNsaWNrRGlzcGF0Y2hlcjogVGh5Q2xpY2tEaXNwYXRjaGVyKSB7fVxuXG4gICAgZ2V0IGxhc3RDbGlja1Bvc2l0aW9uKCk6IFRoeUNsaWNrUG9zaXRpb24gfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdFBvc2l0aW9uO1xuICAgIH1cblxuICAgIHJ1blRhc2tVc2VMYXN0UG9zaXRpb24odGFzazogKHBvc2l0aW9uPzogVGh5Q2xpY2tQb3NpdGlvbikgPT4gdm9pZCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRhc2sodGhpcy5sYXN0Q2xpY2tQb3NpdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2xpY2tEaXNwYXRjaGVyLmNsaWNrZWQoMCkuc3Vic2NyaWJlKChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sYXN0UG9zaXRpb24gPSB7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl19