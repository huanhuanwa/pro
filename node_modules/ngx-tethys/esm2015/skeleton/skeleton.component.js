import { Component, Input, Inject, PLATFORM_ID, HostBinding, TemplateRef, ContentChild } from '@angular/core';
import { generateRandomStr } from 'ngx-tethys/util';
import { isPlatformBrowser } from '@angular/common';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

const _c0 = ["content"];
function ThySkeletonComponent__svg_svg_0__svg_ng_container_4__svg_ng_container_1__svg_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainer(0);
} }
function ThySkeletonComponent__svg_svg_0__svg_ng_container_4__svg_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThySkeletonComponent__svg_svg_0__svg_ng_container_4__svg_ng_container_1__svg_ng_container_1_Template, 1, 0, "ng-container", 8);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const content_r8 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", content_r8);
} }
function ThySkeletonComponent__svg_svg_0__svg_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThySkeletonComponent__svg_svg_0__svg_ng_container_4__svg_ng_container_1_Template, 2, 1, "ng-container", 7);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r2.contentTemplates);
} }
function ThySkeletonComponent__svg_svg_0__svg_ng_container_5__svg_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainer(0);
} }
function ThySkeletonComponent__svg_svg_0__svg_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThySkeletonComponent__svg_svg_0__svg_ng_container_5__svg_ng_container_1_Template, 1, 0, "ng-container", 8);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r3.customTemplate);
} }
function ThySkeletonComponent__svg_svg_0__svg_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelement(1, "animate", 9);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("values", ctx_r4.animationValues[0])("dur", ctx_r4.thySpeed);
} }
function ThySkeletonComponent__svg_svg_0__svg_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelement(1, "animate", 9);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("values", ctx_r5.animationValues[1])("dur", ctx_r5.thySpeed);
} }
function ThySkeletonComponent__svg_svg_0__svg_ng_container_12_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelement(1, "animate", 9);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("values", ctx_r6.animationValues[2])("dur", ctx_r6.thySpeed);
} }
function ThySkeletonComponent__svg_svg_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelementStart(0, "svg", 2);
    ɵngcc0.ɵɵelement(1, "rect", 3);
    ɵngcc0.ɵɵelementStart(2, "defs");
    ɵngcc0.ɵɵelementStart(3, "clipPath");
    ɵngcc0.ɵɵtemplate(4, ThySkeletonComponent__svg_svg_0__svg_ng_container_4_Template, 2, 1, "ng-container", 1);
    ɵngcc0.ɵɵtemplate(5, ThySkeletonComponent__svg_svg_0__svg_ng_container_5_Template, 2, 1, "ng-container", 1);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(6, "linearGradient");
    ɵngcc0.ɵɵelementStart(7, "stop", 4);
    ɵngcc0.ɵɵtemplate(8, ThySkeletonComponent__svg_svg_0__svg_ng_container_8_Template, 2, 2, "ng-container", 1);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(9, "stop", 5);
    ɵngcc0.ɵɵtemplate(10, ThySkeletonComponent__svg_svg_0__svg_ng_container_10_Template, 2, 2, "ng-container", 1);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(11, "stop", 6);
    ɵngcc0.ɵɵtemplate(12, ThySkeletonComponent__svg_svg_0__svg_ng_container_12_Template, 2, 2, "ng-container", 1);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵattributeInterpolate2("viewBox", "0 0 ", ctx_r0.thyViewBoxWidth, " ", ctx_r0.thyViewBoxHeight, "");
    ɵngcc0.ɵɵproperty("ngStyle", ctx_r0.thyStyle);
    ɵngcc0.ɵɵattribute("preserveAspectRatio", ctx_r0.thyPreserveAspectRatio)("height", ctx_r0.thyHeight)("width", ctx_r0.thyWidth);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngStyle", ctx_r0.fillStyle);
    ɵngcc0.ɵɵattribute("clip-path", ctx_r0.clipPath)("width", ctx_r0.thyWidth)("height", ctx_r0.thyHeight);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵattribute("id", ctx_r0.idClip);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.contentTemplates);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.customTemplate);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("id", ctx_r0.idGradient);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("stop-color", ctx_r0.thyPrimaryColor)("stop-opacity", ctx_r0.thyPrimaryOpacity);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.thyAnimate);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("stop-color", ctx_r0.thySecondaryColor)("stop-opacity", ctx_r0.thySecondaryOpacity);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.thyAnimate);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("stop-color", ctx_r0.thyPrimaryColor)("stop-opacity", ctx_r0.thyPrimaryOpacity);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.thyAnimate);
} }
function ThySkeletonComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵprojection(1);
    ɵngcc0.ɵɵelementContainerEnd();
} }
const _c1 = ["*"];
export class ThySkeletonComponent {
    constructor(platformId) {
        this.platformId = platformId;
        this.addSkeletonClass = true;
        this.thyAnimate = true;
        this.thyBaseUrl = '';
        this.thyWidth = '100%';
        this.thyHeight = '100%';
        this.thyViewBoxWidth = 400;
        this.thyViewBoxHeight = 130;
        this.thySpeed = 2;
        this.thyPreserveAspectRatio = 'none'; // xMidYMid meet
        this.thyPrimaryColor = '#f0f0f0';
        this.thySecondaryColor = '#e0e0e0';
        this.thyPrimaryOpacity = 1;
        this.thySecondaryOpacity = 1;
        this.thyIgnoreBaseUrl = false;
        this.thyLoadingDone = false;
        this.contentTemplates = [];
        this.idClip = generateRandomStr();
        this.idGradient = generateRandomStr();
        this.defaultAnimation = ['-3; 1', '-2; 2', '-1; 3'];
        this.rtlAnimation = ['1; -3', '2; -2', '3; -1'];
    }
    ngOnInit() {
        this.animationValues = this.thyRtl ? this.rtlAnimation : this.defaultAnimation;
        if (this.thyBaseUrl === '' && !this.thyIgnoreBaseUrl && isPlatformBrowser(this.platformId)) {
            this.thyBaseUrl = window.location.pathname;
        }
        this.setFillStyle();
        this.setClipPath();
    }
    ngOnChanges(changes) {
        if (changes['thyBaseUrl']) {
            if (changes['thyBaseUrl'].previousValue !== changes['thyBaseUrl'].currentValue) {
                this.setFillStyle();
                this.setClipPath();
            }
        }
    }
    setFillStyle() {
        this.fillStyle = {
            fill: `url(${this.thyBaseUrl}#${this.idGradient})`
        };
    }
    setClipPath() {
        this.clipPath = `url(${this.thyBaseUrl}#${this.idClip})`;
    }
    assignInputProperties(input) {
        this.thyAnimate = input.thyAnimate;
        this.thyBaseUrl = input.thyBaseUrl;
        this.thyHeight = input.thyHeight;
        this.thyWidth = input.thyWidth;
        this.thyViewBoxHeight = input.thyViewBoxHeight;
        this.thyViewBoxWidth = input.thyViewBoxWidth;
        this.thyPreserveAspectRatio = input.thyPreserveAspectRatio;
        this.thyPrimaryColor = input.thyPrimaryColor;
        this.thyPrimaryOpacity = input.thyPrimaryOpacity;
        this.thySecondaryColor = input.thySecondaryColor;
        this.thySecondaryOpacity = input.thySecondaryOpacity;
        this.thyRtl = this.thyRtl;
        this.thySpeed = this.thySpeed;
        this.thyUniqueKey = this.thyUniqueKey;
    }
    addTemplate(template) {
        if (template) {
            this.contentTemplates.push(template);
        }
    }
}
ThySkeletonComponent.ɵfac = function ThySkeletonComponent_Factory(t) { return new (t || ThySkeletonComponent)(ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID)); };
ThySkeletonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ThySkeletonComponent, selectors: [["thy-skeleton"]], contentQueries: function ThySkeletonComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, _c0, true);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.customTemplate = _t.first);
    } }, hostVars: 2, hostBindings: function ThySkeletonComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("thy-skeleton", ctx.addSkeletonClass);
    } }, inputs: { thyAnimate: "thyAnimate", thyBaseUrl: "thyBaseUrl", thyWidth: "thyWidth", thyHeight: "thyHeight", thyViewBoxWidth: "thyViewBoxWidth", thyViewBoxHeight: "thyViewBoxHeight", thySpeed: "thySpeed", thyPreserveAspectRatio: "thyPreserveAspectRatio", thyPrimaryColor: "thyPrimaryColor", thySecondaryColor: "thySecondaryColor", thyPrimaryOpacity: "thyPrimaryOpacity", thySecondaryOpacity: "thySecondaryOpacity", thyIgnoreBaseUrl: "thyIgnoreBaseUrl", thyLoadingDone: "thyLoadingDone", thyRtl: "thyRtl", thyUniqueKey: "thyUniqueKey", thyStyle: "thyStyle" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c1, decls: 2, vars: 2, consts: [[3, "ngStyle", 4, "ngIf"], [4, "ngIf"], [3, "ngStyle"], ["x", "0", "y", "0", 3, "ngStyle"], ["offset", "0%"], ["offset", "50%"], ["offset", "100%"], [4, "ngFor", "ngForOf"], [4, "ngTemplateOutlet"], ["attributeName", "offset", "repeatCount", "indefinite"]], template: function ThySkeletonComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, ThySkeletonComponent__svg_svg_0_Template, 13, 23, "svg", 0);
        ɵngcc0.ɵɵtemplate(1, ThySkeletonComponent_ng_container_1_Template, 2, 0, "ng-container", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", !ctx.thyLoadingDone);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.thyLoadingDone);
    } }, directives: [ɵngcc1.NgIf, ɵngcc1.NgStyle, ɵngcc1.NgForOf, ɵngcc1.NgTemplateOutlet], encapsulation: 2 });
ThySkeletonComponent.ctorParameters = () => [
    { type: String, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
];
ThySkeletonComponent.propDecorators = {
    addSkeletonClass: [{ type: HostBinding, args: ['class.thy-skeleton',] }],
    thyAnimate: [{ type: Input }],
    thyBaseUrl: [{ type: Input }],
    thyWidth: [{ type: Input }],
    thyHeight: [{ type: Input }],
    thyViewBoxWidth: [{ type: Input }],
    thyViewBoxHeight: [{ type: Input }],
    thySpeed: [{ type: Input }],
    thyPreserveAspectRatio: [{ type: Input }],
    thyPrimaryColor: [{ type: Input }],
    thySecondaryColor: [{ type: Input }],
    thyPrimaryOpacity: [{ type: Input }],
    thySecondaryOpacity: [{ type: Input }],
    thyUniqueKey: [{ type: Input }],
    thyRtl: [{ type: Input }],
    thyStyle: [{ type: Input }],
    thyIgnoreBaseUrl: [{ type: Input }],
    thyLoadingDone: [{ type: Input }],
    customTemplate: [{ type: ContentChild, args: ['content',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThySkeletonComponent, [{
        type: Component,
        args: [{
                selector: 'thy-skeleton',
                template: "<svg\n  *ngIf=\"!thyLoadingDone\"\n  attr.viewBox=\"0 0 {{ thyViewBoxWidth }} {{ thyViewBoxHeight }}\"\n  [attr.preserveAspectRatio]=\"thyPreserveAspectRatio\"\n  [ngStyle]=\"thyStyle\"\n  [attr.height]=\"thyHeight\"\n  [attr.width]=\"thyWidth\"\n>\n  <rect\n    [attr.clip-path]=\"clipPath\"\n    [ngStyle]=\"fillStyle\"\n    x=\"0\"\n    y=\"0\"\n    [attr.width]=\"thyWidth\"\n    [attr.height]=\"thyHeight\"\n  />\n\n  <defs>\n    <clipPath [attr.id]=\"idClip\">\n      <ng-container *ngIf=\"contentTemplates\">\n        <ng-container *ngFor=\"let content of contentTemplates\">\n          <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n        </ng-container>\n      </ng-container>\n\n      <ng-container *ngIf=\"customTemplate\">\n        <ng-container *ngTemplateOutlet=\"customTemplate\"></ng-container>\n      </ng-container>\n    </clipPath>\n\n    <linearGradient [attr.id]=\"idGradient\">\n      <stop offset=\"0%\" [attr.stop-color]=\"thyPrimaryColor\" [attr.stop-opacity]=\"thyPrimaryOpacity\">\n        <ng-container *ngIf=\"thyAnimate\">\n          <animate\n            attributeName=\"offset\"\n            [attr.values]=\"animationValues[0]\"\n            attr.dur=\"{{ thySpeed }}\"\n            repeatCount=\"indefinite\"\n          />\n        </ng-container>\n      </stop>\n\n      <stop offset=\"50%\" [attr.stop-color]=\"thySecondaryColor\" [attr.stop-opacity]=\"thySecondaryOpacity\">\n        <ng-container *ngIf=\"thyAnimate\">\n          <animate\n            attributeName=\"offset\"\n            [attr.values]=\"animationValues[1]\"\n            attr.dur=\"{{ thySpeed }}\"\n            repeatCount=\"indefinite\"\n          />\n        </ng-container>\n      </stop>\n\n      <stop offset=\"100%\" [attr.stop-color]=\"thyPrimaryColor\" [attr.stop-opacity]=\"thyPrimaryOpacity\">\n        <ng-container *ngIf=\"thyAnimate\">\n          <animate\n            attributeName=\"offset\"\n            [attr.values]=\"animationValues[2]\"\n            attr.dur=\"{{ thySpeed }}\"\n            repeatCount=\"indefinite\"\n          />\n        </ng-container>\n      </stop>\n    </linearGradient>\n  </defs>\n</svg>\n<ng-container *ngIf=\"thyLoadingDone\">\n  <ng-content></ng-content>\n</ng-container>\n"
            }]
    }], function () { return [{ type: String, decorators: [{
                type: Inject,
                args: [PLATFORM_ID]
            }] }]; }, { addSkeletonClass: [{
            type: HostBinding,
            args: ['class.thy-skeleton']
        }], thyAnimate: [{
            type: Input
        }], thyBaseUrl: [{
            type: Input
        }], thyWidth: [{
            type: Input
        }], thyHeight: [{
            type: Input
        }], thyViewBoxWidth: [{
            type: Input
        }], thyViewBoxHeight: [{
            type: Input
        }], thySpeed: [{
            type: Input
        }], thyPreserveAspectRatio: [{
            type: Input
        }], thyPrimaryColor: [{
            type: Input
        }], thySecondaryColor: [{
            type: Input
        }], thyPrimaryOpacity: [{
            type: Input
        }], thySecondaryOpacity: [{
            type: Input
        }], thyIgnoreBaseUrl: [{
            type: Input
        }], thyLoadingDone: [{
            type: Input
        }], thyRtl: [{
            type: Input
        }], thyUniqueKey: [{
            type: Input
        }], thyStyle: [{
            type: Input
        }], customTemplate: [{
            type: ContentChild,
            args: ['content']
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tlbGV0b24uY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2tlbGV0b24vc2tlbGV0b24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxTQUFTLEVBRVQsS0FBSyxFQUNMLE1BQU0sRUFDTixXQUFXLEVBR1gsV0FBVyxFQUNYLFdBQVcsRUFDWCxZQUFZLEVBQ2YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDcEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUJBQWlCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNcEQsTUFBTSxPQUFPLG9CQUFvQjtBQUFHLElBd0RoQyxZQUF5QyxVQUFrQjtBQUFJLFFBQXRCLGVBQVUsR0FBVixVQUFVLENBQVE7QUFBQyxRQXZEekIscUJBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQy9ELFFBQ2EsZUFBVSxHQUFHLElBQUksQ0FBQztBQUMvQixRQUNhLGVBQVUsR0FBRyxFQUFFLENBQUM7QUFDN0IsUUFDYSxhQUFRLEdBQW9CLE1BQU0sQ0FBQztBQUNoRCxRQUNhLGNBQVMsR0FBb0IsTUFBTSxDQUFDO0FBQ2pELFFBQ2Esb0JBQWUsR0FBb0IsR0FBRyxDQUFDO0FBQ3BELFFBQ2EscUJBQWdCLEdBQW9CLEdBQUcsQ0FBQztBQUNyRCxRQUNhLGFBQVEsR0FBRyxDQUFDLENBQUM7QUFDMUIsUUFDYSwyQkFBc0IsR0FBRyxNQUFNLENBQUMsQ0FBQyxnQkFBZ0I7QUFDOUQsUUFDYSxvQkFBZSxHQUFHLFNBQVMsQ0FBQztBQUN6QyxRQUNhLHNCQUFpQixHQUFHLFNBQVMsQ0FBQztBQUMzQyxRQUNh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Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQ29tcG9uZW50LFxuICAgIE9uSW5pdCxcbiAgICBJbnB1dCxcbiAgICBJbmplY3QsXG4gICAgUExBVEZPUk1fSUQsXG4gICAgU2ltcGxlQ2hhbmdlcyxcbiAgICBPbkNoYW5nZXMsXG4gICAgSG9zdEJpbmRpbmcsXG4gICAgVGVtcGxhdGVSZWYsXG4gICAgQ29udGVudENoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHIgfSBmcm9tICduZ3gtdGV0aHlzL3V0aWwnO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3RoeS1za2VsZXRvbicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3NrZWxldG9uLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBUaHlTa2VsZXRvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLnRoeS1za2VsZXRvbicpIGFkZFNrZWxldG9uQ2xhc3MgPSB0cnVlO1xuXG4gICAgQElucHV0KCkgdGh5QW5pbWF0ZSA9IHRydWU7XG5cbiAgICBASW5wdXQoKSB0aHlCYXNlVXJsID0gJyc7XG5cbiAgICBASW5wdXQoKSB0aHlXaWR0aDogc3RyaW5nIHwgbnVtYmVyID0gJzEwMCUnO1xuXG4gICAgQElucHV0KCkgdGh5SGVpZ2h0OiBzdHJpbmcgfCBudW1iZXIgPSAnMTAwJSc7XG5cbiAgICBASW5wdXQoKSB0aHlWaWV3Qm94V2lkdGg6IHN0cmluZyB8IG51bWJlciA9IDQwMDtcblxuICAgIEBJbnB1dCgpIHRoeVZpZXdCb3hIZWlnaHQ6IHN0cmluZyB8IG51bWJlciA9IDEzMDtcblxuICAgIEBJbnB1dCgpIHRoeVNwZWVkID0gMjtcblxuICAgIEBJbnB1dCgpIHRoeVByZXNlcnZlQXNwZWN0UmF0aW8gPSAnbm9uZSc7IC8vIHhNaWRZTWlkIG1lZXRcblxuICAgIEBJbnB1dCgpIHRoeVByaW1hcnlDb2xvciA9ICcjZjBmMGYwJztcblxuICAgIEBJbnB1dCgpIHRoeVNlY29uZGFyeUNvbG9yID0gJyNlMGUwZTAnO1xuXG4gICAgQElucHV0KCkgdGh5UHJpbWFyeU9wYWNpdHkgPSAxO1xuXG4gICAgQElucHV0KCkgdGh5U2Vjb25kYXJ5T3BhY2l0eSA9IDE7XG5cbiAgICBASW5wdXQoKSB0aHlVbmlxdWVLZXk6IHN0cmluZztcblxuICAgIEBJbnB1dCgpIHRoeVJ0bDogc3RyaW5nO1xuXG4gICAgQElucHV0KCkgdGh5U3R5bGU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG5cbiAgICBASW5wdXQoKSB0aHlJZ25vcmVCYXNlVXJsID0gZmFsc2U7XG5cbiAgICBASW5wdXQoKSB0aHlMb2FkaW5nRG9uZSA9IGZhbHNlO1xuXG4gICAgQENvbnRlbnRDaGlsZCgnY29udGVudCcpXG4gICAgY3VzdG9tVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgICBjb250ZW50VGVtcGxhdGVzOiBUZW1wbGF0ZVJlZjxhbnk+W10gPSBbXTtcblxuICAgIGlkQ2xpcCA9IGdlbmVyYXRlUmFuZG9tU3RyKCk7XG5cbiAgICBpZEdyYWRpZW50ID0gZ2VuZXJhdGVSYW5kb21TdHIoKTtcblxuICAgIGRlZmF1bHRBbmltYXRpb24gPSBbJy0zOyAxJywgJy0yOyAyJywgJy0xOyAzJ107XG5cbiAgICBydGxBbmltYXRpb24gPSBbJzE7IC0zJywgJzI7IC0yJywgJzM7IC0xJ107XG5cbiAgICBhbmltYXRpb25WYWx1ZXM6IHN0cmluZ1tdO1xuXG4gICAgZmlsbFN0eWxlOiB7IGZpbGw6IHN0cmluZyB9O1xuXG4gICAgY2xpcFBhdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoUExBVEZPUk1fSUQpIHByaXZhdGUgcGxhdGZvcm1JZDogc3RyaW5nKSB7fVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uVmFsdWVzID0gdGhpcy50aHlSdGwgPyB0aGlzLnJ0bEFuaW1hdGlvbiA6IHRoaXMuZGVmYXVsdEFuaW1hdGlvbjtcblxuICAgICAgICBpZiAodGhpcy50aHlCYXNlVXJsID09PSAnJyAmJiAhdGhpcy50aHlJZ25vcmVCYXNlVXJsICYmIGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIHRoaXMudGh5QmFzZVVybCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0RmlsbFN0eWxlKCk7XG4gICAgICAgIHRoaXMuc2V0Q2xpcFBhdGgoKTtcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgICAgIGlmIChjaGFuZ2VzWyd0aHlCYXNlVXJsJ10pIHtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VzWyd0aHlCYXNlVXJsJ10ucHJldmlvdXNWYWx1ZSAhPT0gY2hhbmdlc1sndGh5QmFzZVVybCddLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsbFN0eWxlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDbGlwUGF0aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RmlsbFN0eWxlKCkge1xuICAgICAgICB0aGlzLmZpbGxTdHlsZSA9IHtcbiAgICAgICAgICAgIGZpbGw6IGB1cmwoJHt0aGlzLnRoeUJhc2VVcmx9IyR7dGhpcy5pZEdyYWRpZW50fSlgXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0Q2xpcFBhdGgoKSB7XG4gICAgICAgIHRoaXMuY2xpcFBhdGggPSBgdXJsKCR7dGhpcy50aHlCYXNlVXJsfSMke3RoaXMuaWRDbGlwfSlgO1xuICAgIH1cblxuICAgIGFzc2lnbklucHV0UHJvcGVydGllcyhpbnB1dDogVGh5U2tlbGV0b25Db21wb25lbnQpIHtcbiAgICAgICAgdGhpcy50aHlBbmltYXRlID0gaW5wdXQudGh5QW5pbWF0ZTtcbiAgICAgICAgdGhpcy50aHlCYXNlVXJsID0gaW5wdXQudGh5QmFzZVVybDtcbiAgICAgICAgdGhpcy50aHlIZWlnaHQgPSBpbnB1dC50aHlIZWlnaHQ7XG4gICAgICAgIHRoaXMudGh5V2lkdGggPSBpbnB1dC50aHlXaWR0aDtcbiAgICAgICAgdGhpcy50aHlWaWV3Qm94SGVpZ2h0ID0gaW5wdXQudGh5Vmlld0JveEhlaWdodDtcbiAgICAgICAgdGhpcy50aHlWaWV3Qm94V2lkdGggPSBpbnB1dC50aHlWaWV3Qm94V2lkdGg7XG4gICAgICAgIHRoaXMudGh5UHJlc2VydmVBc3BlY3RSYXRpbyA9IGlucHV0LnRoeVByZXNlcnZlQXNwZWN0UmF0aW87XG4gICAgICAgIHRoaXMudGh5UHJpbWFyeUNvbG9yID0gaW5wdXQudGh5UHJpbWFyeUNvbG9yO1xuICAgICAgICB0aGlzLnRoeVByaW1hcnlPcGFjaXR5ID0gaW5wdXQudGh5UHJpbWFyeU9wYWNpdHk7XG4gICAgICAgIHRoaXMudGh5U2Vjb25kYXJ5Q29sb3IgPSBpbnB1dC50aHlTZWNvbmRhcnlDb2xvcjtcbiAgICAgICAgdGhpcy50aHlTZWNvbmRhcnlPcGFjaXR5ID0gaW5wdXQudGh5U2Vjb25kYXJ5T3BhY2l0eTtcbiAgICAgICAgdGhpcy50aHlSdGwgPSB0aGlzLnRoeVJ0bDtcbiAgICAgICAgdGhpcy50aHlTcGVlZCA9IHRoaXMudGh5U3BlZWQ7XG4gICAgICAgIHRoaXMudGh5VW5pcXVlS2V5ID0gdGhpcy50aHlVbmlxdWVLZXk7XG4gICAgfVxuXG4gICAgYWRkVGVtcGxhdGUodGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4pIHtcbiAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRUZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=