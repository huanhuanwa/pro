import { MixinBase, mixinUnsubscribe, UpdateHostClassService } from 'ngx-tethys/core';
import { coerceBooleanProperty, get, isString, keyBy, set } from 'ngx-tethys/util';
import { merge, of } from 'rxjs';
import { delay, takeUntil } from 'rxjs/operators';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { ViewportRuler } from '@angular/cdk/overlay';
import { DOCUMENT } from '@angular/common';
import { Component, Input, Output, ViewEncapsulation, TemplateRef, EventEmitter, ContentChild, ContentChildren, ElementRef, HostBinding, Inject, IterableDiffers, QueryList, ViewChild } from '@angular/core';
import { THY_TABLE_COLUMN_PARENT_COMPONENT, ThyTableColumnComponent } from './table-column.component';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/cdk/overlay';
import * as ɵngcc2 from 'ngx-tethys/core';
import * as ɵngcc3 from '@angular/common';
import * as ɵngcc4 from 'ngx-tethys/loading';
import * as ɵngcc5 from 'ngx-tethys/shared';
import * as ɵngcc6 from '@angular/cdk/drag-drop';
import * as ɵngcc7 from 'ngx-tethys/icon';
import * as ɵngcc8 from '@angular/forms';
import * as ɵngcc9 from 'ngx-tethys/switch';
import * as ɵngcc10 from 'ngx-tethys/empty';
import * as ɵngcc11 from 'ngx-tethys/pagination';
import * as ɵngcc12 from './table.pipe';

const _c0 = ["empty"];
const _c1 = ["group"];
const _c2 = ["table"];
function ThyTableComponent_col_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "col", 8);
} if (rf & 2) {
    const column_r7 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("width", column_r7.width);
} }
function ThyTableComponent_thead_4_th_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r9 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", column_r9.title, " ");
} }
function ThyTableComponent_thead_4_th_2_ng_container_2_ng_template_1_Template(rf, ctx) { }
const _c3 = function (a0) { return { $implicit: a0 }; };
function ThyTableComponent_thead_4_th_2_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_thead_4_th_2_ng_container_2_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r9 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", column_r9.headerTemplateRef)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction1(2, _c3, column_r9));
} }
function ThyTableComponent_thead_4_th_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "th", 10);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_thead_4_th_2_ng_container_1_Template, 2, 1, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_thead_4_th_2_ng_container_2_Template, 2, 4, "ng-container", 3);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const column_r9 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("ngClass", column_r9.headerClassName);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !column_r9.headerTemplateRef);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", column_r9.headerTemplateRef);
} }
function ThyTableComponent_thead_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "thead");
    ɵngcc0.ɵɵelementStart(1, "tr");
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_thead_4_th_2_Template, 3, 3, "th", 9);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r2.columns);
} }
function ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_5_ng_template_1_Template(rf, ctx) { }
const _c4 = function (a0, a1) { return { $implicit: a0, group: a1 }; };
function ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_5_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const group_r23 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r24 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r24.groupTemplate)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction2(2, _c4, group_r23.origin, group_r23.origin));
} }
function ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_6_ng_container_1_ng_template_1_Template(rf, ctx) { }
const _c5 = function (a0, a1) { return { row: a0, index: a1, level: 0 }; };
function ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_6_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_6_ng_container_1_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const row_r29 = ctx.$implicit;
    const i_r30 = ctx.index;
    ɵngcc0.ɵɵnextContext(4);
    const _r18 = ɵngcc0.ɵɵreference(5);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r18)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction2(2, _c5, row_r29, i_r30));
} }
function ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_6_ng_container_1_Template, 2, 5, "ng-container", 19);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const group_r23 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r25 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", group_r23.children)("ngForTrackBy", ctx_r25.trackByFn);
} }
function ThyTableComponent_tbody_5_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    const _r34 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "tr", 16);
    ɵngcc0.ɵɵlistener("click", function ThyTableComponent_tbody_5_ng_container_1_ng_container_1_Template_tr_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r34); const group_r23 = ctx.$implicit; const ctx_r33 = ɵngcc0.ɵɵnextContext(3); return ctx_r33.expandGroup(group_r23); });
    ɵngcc0.ɵɵelementStart(2, "td");
    ɵngcc0.ɵɵelementStart(3, "div", 17);
    ɵngcc0.ɵɵelement(4, "thy-icon", 18);
    ɵngcc0.ɵɵtemplate(5, ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_5_Template, 2, 5, "ng-container", 3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(6, ThyTableComponent_tbody_5_ng_container_1_ng_container_1_ng_container_6_Template, 2, 2, "ng-container", 3);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const group_r23 = ctx.$implicit;
    const ctx_r22 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵattribute("colspan", ctx_r22.columns.length);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("thyIconName", group_r23.expand ? "angle-down" : "angle-right");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r22.groupTemplate);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", (group_r23.children == null ? null : group_r23.children.length) && group_r23.expand);
} }
function ThyTableComponent_tbody_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_1_ng_container_1_Template, 7, 4, "ng-container", 15);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r15.groups);
} }
function ThyTableComponent_tbody_5_ng_container_2_tr_1_ng_template_1_Template(rf, ctx) { }
function ThyTableComponent_tbody_5_ng_container_2_tr_1_Template(rf, ctx) { if (rf & 1) {
    const _r40 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "tr", 21);
    ɵngcc0.ɵɵlistener("cdkDragStarted", function ThyTableComponent_tbody_5_ng_container_2_tr_1_Template_tr_cdkDragStarted_0_listener() { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r39 = ɵngcc0.ɵɵnextContext(3); return ctx_r39.onDragStarted(); })("mousedown", function ThyTableComponent_tbody_5_ng_container_2_tr_1_Template_tr_mousedown_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r41 = ɵngcc0.ɵɵnextContext(3); return ctx_r41.draggableStopPropagation($event); })("touchstart", function ThyTableComponent_tbody_5_ng_container_2_tr_1_Template_tr_touchstart_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r42 = ɵngcc0.ɵɵnextContext(3); return ctx_r42.draggableStopPropagation($event); })("pointerdown", function ThyTableComponent_tbody_5_ng_container_2_tr_1_Template_tr_pointerdown_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r43 = ɵngcc0.ɵɵnextContext(3); return ctx_r43.draggableStopPropagation($event); })("click", function ThyTableComponent_tbody_5_ng_container_2_tr_1_Template_tr_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const row_r36 = ctx.$implicit; const ctx_r44 = ɵngcc0.ɵɵnextContext(3); return ctx_r44.onRowClick($event, row_r36); })("thyContextMenu", function ThyTableComponent_tbody_5_ng_container_2_tr_1_Template_tr_thyContextMenu_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const row_r36 = ctx.$implicit; const ctx_r45 = ɵngcc0.ɵɵnextContext(3); return ctx_r45.onRowContextMenu($event, row_r36); });
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_2_tr_1_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const row_r36 = ctx.$implicit;
    const i_r37 = ctx.index;
    ɵngcc0.ɵɵnextContext(2);
    const _r20 = ɵngcc0.ɵɵreference(7);
    const ctx_r35 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("cdkDragData", row_r36)("ngClass", ctx_r35.renderRowClassName(row_r36, i_r37));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r20)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction2(4, _c5, row_r36, i_r37));
} }
function ThyTableComponent_tbody_5_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_2_tr_1_Template, 2, 7, "tr", 20);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r16 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r16.model)("ngForTrackBy", ctx_r16.trackByFn);
} }
function ThyTableComponent_tbody_5_ng_container_3_ng_container_1_ng_template_1_Template(rf, ctx) { }
function ThyTableComponent_tbody_5_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_3_ng_container_1_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const row_r47 = ctx.$implicit;
    const i_r48 = ctx.index;
    ɵngcc0.ɵɵnextContext(2);
    const _r18 = ɵngcc0.ɵɵreference(5);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r18)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction2(2, _c5, row_r47, i_r48));
} }
function ThyTableComponent_tbody_5_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_3_ng_container_1_Template, 2, 5, "ng-container", 19);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r17 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r17.model)("ngForTrackBy", ctx_r17.trackByFn);
} }
function ThyTableComponent_tbody_5_ng_template_4_ng_template_1_Template(rf, ctx) { }
function ThyTableComponent_tbody_5_ng_template_4_ng_container_2_1_ng_template_0_Template(rf, ctx) { }
const _c6 = function (a0, a1, a2) { return { row: a0, index: a1, level: a2 }; };
function ThyTableComponent_tbody_5_ng_template_4_ng_container_2_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, ThyTableComponent_tbody_5_ng_template_4_ng_container_2_1_ng_template_0_Template, 0, 0, "ng-template", 11);
} if (rf & 2) {
    const child_r56 = ctx.$implicit;
    const j_r57 = ctx.index;
    const level_r52 = ɵngcc0.ɵɵnextContext(2).level;
    ɵngcc0.ɵɵnextContext();
    const _r18 = ɵngcc0.ɵɵreference(5);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r18)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction3(2, _c6, child_r56, j_r57, level_r52 + 1));
} }
function ThyTableComponent_tbody_5_ng_template_4_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_template_4_ng_container_2_1_Template, 1, 6, undefined, 19);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const row_r50 = ɵngcc0.ɵɵnextContext().row;
    const ctx_r54 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", row_r50[ctx_r54.thyChildrenKey])("ngForTrackBy", ctx_r54.trackByFn);
} }
function ThyTableComponent_tbody_5_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    const _r62 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "tr", 21);
    ɵngcc0.ɵɵlistener("cdkDragStarted", function ThyTableComponent_tbody_5_ng_template_4_Template_tr_cdkDragStarted_0_listener() { ɵngcc0.ɵɵrestoreView(_r62); const ctx_r61 = ɵngcc0.ɵɵnextContext(2); return ctx_r61.onDragStarted(); })("mousedown", function ThyTableComponent_tbody_5_ng_template_4_Template_tr_mousedown_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r62); const ctx_r63 = ɵngcc0.ɵɵnextContext(2); return ctx_r63.draggableStopPropagation($event); })("touchstart", function ThyTableComponent_tbody_5_ng_template_4_Template_tr_touchstart_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r62); const ctx_r64 = ɵngcc0.ɵɵnextContext(2); return ctx_r64.draggableStopPropagation($event); })("pointerdown", function ThyTableComponent_tbody_5_ng_template_4_Template_tr_pointerdown_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r62); const ctx_r65 = ɵngcc0.ɵɵnextContext(2); return ctx_r65.draggableStopPropagation($event); })("click", function ThyTableComponent_tbody_5_ng_template_4_Template_tr_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r62); const row_r50 = ctx.row; const ctx_r66 = ɵngcc0.ɵɵnextContext(2); return ctx_r66.onRowClick($event, row_r50); })("thyContextMenu", function ThyTableComponent_tbody_5_ng_template_4_Template_tr_thyContextMenu_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r62); const row_r50 = ctx.row; const ctx_r67 = ɵngcc0.ɵɵnextContext(2); return ctx_r67.onRowContextMenu($event, row_r50); });
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_template_4_ng_template_1_Template, 0, 0, "ng-template", 11);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_tbody_5_ng_template_4_ng_container_2_Template, 2, 2, "ng-container", 3);
} if (rf & 2) {
    const row_r50 = ctx.row;
    const i_r51 = ctx.index;
    const level_r52 = ctx.level;
    ɵngcc0.ɵɵnextContext();
    const _r20 = ɵngcc0.ɵɵreference(7);
    const ctx_r19 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("cdkDragData", row_r50)("ngClass", ctx_r19.renderRowClassName(row_r50, i_r51));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r20)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction3(5, _c6, row_r50, i_r51, level_r52 + 1));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r19.mode === "tree" && ctx_r19.isExpanded(row_r50));
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelement(1, "thy-icon", 24);
    ɵngcc0.ɵɵelementContainerEnd();
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_2_thy_icon_1_Template(rf, ctx) { if (rf & 1) {
    const _r81 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "thy-icon", 26);
    ɵngcc0.ɵɵlistener("click", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_2_thy_icon_1_Template_thy_icon_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r81); const row_r68 = ɵngcc0.ɵɵnextContext(3).row; const ctx_r79 = ɵngcc0.ɵɵnextContext(2); return ctx_r79.expandChildren($event, row_r68); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r82 = ɵngcc0.ɵɵnextContext(3);
    const row_r68 = ctx_r82.row;
    const level_r70 = ctx_r82.level;
    const ctx_r77 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵstyleProp("visibility", ctx_r77.showExpand(row_r68) ? "visible" : "hidden")("left", ctx_r77.iconIndentComputed(level_r70), "px");
    ɵngcc0.ɵɵproperty("thyIconName", ctx_r77.isExpanded(row_r68) ? "angle-down" : "angle-right");
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_2_ng_template_2_Template(rf, ctx) { }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_2_thy_icon_1_Template, 1, 5, "thy-icon", 25);
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_2_ng_template_2_Template, 0, 0, "ng-template", 11);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r72 = ɵngcc0.ɵɵnextContext().$implicit;
    const row_r68 = ɵngcc0.ɵɵnextContext().row;
    const ctx_r75 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r75.mode === "tree" && column_r72.expand);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", column_r72.templateRef)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction1(3, _c3, row_r68));
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_thy_icon_1_Template(rf, ctx) { if (rf & 1) {
    const _r96 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "thy-icon", 26);
    ɵngcc0.ɵɵlistener("click", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_thy_icon_1_Template_thy_icon_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r96); const row_r68 = ɵngcc0.ɵɵnextContext(4).row; const ctx_r94 = ɵngcc0.ɵɵnextContext(2); return ctx_r94.expandChildren($event, row_r68); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r97 = ɵngcc0.ɵɵnextContext(4);
    const row_r68 = ctx_r97.row;
    const level_r70 = ctx_r97.level;
    const ctx_r90 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵstyleProp("visibility", ctx_r90.showExpand(row_r68) ? "visible" : "hidden")("margin-left", ctx_r90.iconIndentComputed(level_r70), "px");
    ɵngcc0.ɵɵproperty("thyIconName", ctx_r90.isExpanded(row_r68) ? "angle-down" : "angle-right");
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r72 = ɵngcc0.ɵɵnextContext(3).$implicit;
    const row_r68 = ɵngcc0.ɵɵnextContext().row;
    const ctx_r91 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r91.getModelValue(row_r68, column_r72.model), " ");
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 30);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const column_r72 = ɵngcc0.ɵɵnextContext(3).$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", column_r72.defaultText, " ");
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_thy_icon_1_Template, 1, 5, "thy-icon", 27);
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_ng_container_2_Template, 2, 1, "ng-container", 28);
    ɵngcc0.ɵɵpipe(3, "isValidModelValue");
    ɵngcc0.ɵɵtemplate(4, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_ng_template_4_Template, 2, 1, "ng-template", null, 29, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const _r92 = ɵngcc0.ɵɵreference(5);
    const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit;
    const row_r68 = ɵngcc0.ɵɵnextContext().row;
    const ctx_r85 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r85.mode === "tree" && column_r72.expand);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(3, 3, ctx_r85.getModelValue(row_r68, column_r72.model)))("ngIfElse", _r92);
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r69 = ɵngcc0.ɵɵnextContext(3).index;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", i_r69 + 1, " ");
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    const _r106 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "input", 31);
    ɵngcc0.ɵɵlistener("ngModelChange", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_3_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r106); const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit; const row_r68 = ɵngcc0.ɵɵnextContext().row; return (row_r68[column_r72.key] = $event); })("ngModelChange", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_3_Template_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r106); const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit; const row_r68 = ɵngcc0.ɵɵnextContext().row; const ctx_r108 = ɵngcc0.ɵɵnextContext(2); return ctx_r108.onCheckboxChange(row_r68, column_r72); })("click", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_3_Template_input_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r106); const ctx_r111 = ɵngcc0.ɵɵnextContext(5); return ctx_r111.onStopPropagation($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit;
    const row_r68 = ɵngcc0.ɵɵnextContext().row;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngModel", row_r68[column_r72.key])("disabled", column_r72.disabled);
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    const _r115 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "input", 32);
    ɵngcc0.ɵɵlistener("ngModelChange", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_4_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r115); const ctx_r114 = ɵngcc0.ɵɵnextContext(5); return ctx_r114.selectedRadioRow = $event; })("click", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_4_Template_input_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r115); const ctx_r116 = ɵngcc0.ɵɵnextContext(5); return ctx_r116.onStopPropagation($event); })("change", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_4_Template_input_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r115); const row_r68 = ɵngcc0.ɵɵnextContext(3).row; const ctx_r117 = ɵngcc0.ɵɵnextContext(2); return ctx_r117.onRadioSelectChange($event, row_r68); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit;
    const row_r68 = ɵngcc0.ɵɵnextContext().row;
    const ctx_r88 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngModel", ctx_r88.selectedRadioRow)("value", row_r68)("disabled", column_r72.disabled);
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    const _r123 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "thy-switch", 33);
    ɵngcc0.ɵɵlistener("ngModelChange", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_5_Template_thy_switch_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r123); const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit; const row_r68 = ɵngcc0.ɵɵnextContext().row; return (row_r68[column_r72.key] = $event); })("ngModelChange", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_5_Template_thy_switch_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r123); const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit; const row_r68 = ɵngcc0.ɵɵnextContext().row; const ctx_r125 = ɵngcc0.ɵɵnextContext(2); return ctx_r125.onModelChange(row_r68, column_r72); })("thyChange", function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_5_Template_thy_switch_thyChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r123); const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit; const row_r68 = ɵngcc0.ɵɵnextContext().row; const ctx_r128 = ɵngcc0.ɵɵnextContext(2); return ctx_r128.onSwitchChange($event, row_r68, column_r72); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r72 = ɵngcc0.ɵɵnextContext(2).$implicit;
    const row_r68 = ɵngcc0.ɵɵnextContext().row;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngModel", row_r68[column_r72.key])("disabled", column_r72.disabled);
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_1_Template, 6, 5, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_2_Template, 2, 1, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(3, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_3_Template, 2, 2, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(4, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_4_Template, 2, 3, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(5, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_ng_container_5_Template, 2, 2, "ng-container", 3);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const column_r72 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r76 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", column_r72.model && !column_r72.type);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", column_r72.type === ctx_r76.customType.index);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", column_r72.type === ctx_r76.customType.checkbox);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", column_r72.type === ctx_r76.customType.radio);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", column_r72.type === ctx_r76.customType.switch);
} }
function ThyTableComponent_tbody_5_ng_template_6_td_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td", 23);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_1_Template, 2, 0, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_2_Template, 3, 5, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(3, ThyTableComponent_tbody_5_ng_template_6_td_0_ng_container_3_Template, 6, 5, "ng-container", 3);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const column_r72 = ctx.$implicit;
    const j_r73 = ctx.index;
    const level_r70 = ɵngcc0.ɵɵnextContext().level;
    const ctx_r71 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵclassProp("thy-table-checkbox-column", column_r72.type === ctx_r71.customType.checkbox);
    ɵngcc0.ɵɵproperty("ngClass", column_r72.className)("ngStyle", ctx_r71.mode === "tree" && column_r72.expand ? ctx_r71.tdIndentComputed(level_r70) : null);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", j_r73 === 0 && ctx_r71.draggable);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r71.isTemplateRef(column_r72.templateRef));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r71.isTemplateRef(column_r72.templateRef));
} }
function ThyTableComponent_tbody_5_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, ThyTableComponent_tbody_5_ng_template_6_td_0_Template, 4, 7, "td", 22);
} if (rf & 2) {
    const ctx_r21 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r21.columns);
} }
function ThyTableComponent_tbody_5_Template(rf, ctx) { if (rf & 1) {
    const _r136 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "tbody", 12);
    ɵngcc0.ɵɵlistener("cdkDropListDropped", function ThyTableComponent_tbody_5_Template_tbody_cdkDropListDropped_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r136); const ctx_r135 = ɵngcc0.ɵɵnextContext(); return ctx_r135.onDragDropped($event); });
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_tbody_5_ng_container_1_Template, 2, 1, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_tbody_5_ng_container_2_Template, 2, 2, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(3, ThyTableComponent_tbody_5_ng_container_3_Template, 2, 2, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(4, ThyTableComponent_tbody_5_ng_template_4_Template, 3, 9, "ng-template", null, 13, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵtemplate(6, ThyTableComponent_tbody_5_ng_template_6_Template, 1, 1, "ng-template", null, 14, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("cdkDropListDisabled", !ctx_r3.draggable);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.mode === "group");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.mode === "list");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.mode === "tree");
} }
function ThyTableComponent_div_6_ng_container_1_ng_template_1_Template(rf, ctx) { }
function ThyTableComponent_div_6_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_div_6_ng_container_1_ng_template_1_Template, 0, 0, "ng-template", 36);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r137 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r137.emptyTemplate);
} }
function ThyTableComponent_div_6_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "thy-empty", 37);
} if (rf & 2) {
    const ctx_r139 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("thyMessage", ctx_r139.emptyOptions.message)("thyTranslationKey", ctx_r139.emptyOptions.translationKey)("thyTranslationValues", ctx_r139.emptyOptions.translationValues)("thyEntityName", ctx_r139.emptyOptions.entityName)("thyEntityNameTranslateKey", ctx_r139.emptyOptions.entityNameTranslateKey)("thyIconName", ctx_r139.emptyOptions.iconName)("thySize", ctx_r139.emptyOptions.size)("thyMarginTop", ctx_r139.emptyOptions.marginTop)("thyTopAuto", ctx_r139.emptyOptions.topAuto)("thyContainer", ctx_r139.emptyOptions.container);
} }
function ThyTableComponent_div_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 34);
    ɵngcc0.ɵɵtemplate(1, ThyTableComponent_div_6_ng_container_1_Template, 2, 1, "ng-container", 28);
    ɵngcc0.ɵɵtemplate(2, ThyTableComponent_div_6_ng_template_2_Template, 1, 10, "ng-template", null, 35, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const _r138 = ɵngcc0.ɵɵreference(3);
    const ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.emptyTemplate)("ngIfElse", _r138);
} }
function ThyTableComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    const _r142 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 38);
    ɵngcc0.ɵɵelementStart(1, "thy-pagination", 39);
    ɵngcc0.ɵɵlistener("thyPageChanged", function ThyTableComponent_div_8_Template_thy_pagination_thyPageChanged_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r142); const ctx_r141 = ɵngcc0.ɵɵnextContext(); return ctx_r141.onPageChange($event); })("thyPageIndexChange", function ThyTableComponent_div_8_Template_thy_pagination_thyPageIndexChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r142); const ctx_r143 = ɵngcc0.ɵɵnextContext(); return ctx_r143.onPageIndexChange($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("thy-table-footer-has-padding", ctx_r5.theme === "default");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("thyPageIndex", ctx_r5.pagination.index)("thyTotal", ctx_r5.pagination.total)("thyPageSize", ctx_r5.pagination.size)("thyShowTotal", ctx_r5.showTotal);
} }
function ThyTableComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0);
} }
const _c7 = function (a0) { return [a0]; };
const _c8 = ["*"];
const tableThemeMap = {
    default: 'table-default',
    bordered: 'table-bordered'
};
const tableSizeMap = {
    sm: 'table-sm'
};
const customType = {
    index: 'index',
    checkbox: 'checkbox',
    radio: 'radio',
    switch: 'switch'
};
const _MixinBase = mixinUnsubscribe(MixinBase);
export class ThyTableComponent extends _MixinBase {
    constructor(elementRef, _differs, viewportRuler, updateHostClassService, document) {
        super();
        this.elementRef = elementRef;
        this._differs = _differs;
        this.viewportRuler = viewportRuler;
        this.updateHostClassService = updateHostClassService;
        this.document = document;
        this.customType = customType;
        this.model = [];
        this.groups = [];
        this.rowKey = '_id';
        this.mode = 'list';
        this.columns = [];
        this.theme = 'default';
        this.className = '';
        this.size = 'default';
        this.loadingDone = true;
        this.emptyOptions = {};
        this.draggable = false;
        this.selectedRadioRow = null;
        this.pagination = { index: 1, size: 20, total: 0 };
        this.wholeRowSelect = false;
        this._filter = null;
        this.initialized = false;
        this._oldThyClassName = '';
        this.thyShowHeader = true;
        this.showTotal = false;
        this.thyIndent = 20;
        this.thyChildrenKey = 'children';
        this.thyOnSwitchChange = new EventEmitter();
        this.thyOnPageChange = new EventEmitter();
        this.thyOnPageIndexChange = new EventEmitter();
        this.thyOnMultiSelectChange = new EventEmitter();
        this.thyOnRadioSelectChange = new EventEmitter();
        this.thyOnDraggableChange = new EventEmitter();
        this.thyOnRowClick = new EventEmitter();
        this.thyOnRowContextMenu = new EventEmitter();
        this.isTableClass = true;
        // 数据的折叠展开状态
        this.expandStatusMap = {};
        this._bindTrackFn();
    }
    set thyMode(value) {
        this.mode = value || this.mode;
    }
    set thyGroupBy(value) {
        this.groupBy = value;
    }
    set thyRowKey(value) {
        this.rowKey = value || this.rowKey;
    }
    set thyGroups(value) {
        if (this.mode === 'group') {
            this.buildGroups(value);
        }
    }
    set thyModel(value) {
        this.model = value || [];
        this._diff = this._differs.find(this.model).create();
        this._initializeDataModel();
        if (this.mode === 'group') {
            this.buildModel();
        }
    }
    set thyTheme(value) {
        this.theme = value || this.theme;
        this._setClass();
    }
    set thySize(value) {
        this.size = value || this.size;
        this._setClass();
    }
    set thyClassName(value) {
        const list = this.className.split(' ').filter(a => a.trim());
        const index = list.findIndex(item => item === this._oldThyClassName);
        if (index !== -1) {
            list.splice(index, 1, value);
        }
        else {
            list.push(value);
        }
        this._oldThyClassName = value;
        this.className = list.join(' ');
    }
    set thyRowClassName(value) {
        this.rowClassName = value;
    }
    set thyLoadingDone(value) {
        this.loadingDone = value;
    }
    set thyLoadingText(value) {
        this.loadingText = value;
    }
    set thyEmptyOptions(value) {
        this.emptyOptions = value;
    }
    set thyDraggable(value) {
        this.draggable = coerceBooleanProperty(value);
        if (this.mode !== 'list' && this.draggable) {
            throw new Error('Only list mode sorting is supported');
        }
    }
    set thyFilter(value) {
        this._filter = value;
    }
    set thyPageIndex(value) {
        this.pagination.index = value;
    }
    set thyPageSize(value) {
        this.pagination.size = value;
    }
    set thyPageTotal(value) {
        this.pagination.total = value;
    }
    set thyWholeRowSelect(value) {
        if (value) {
            this.className += ' table-hover';
        }
        this.wholeRowSelect = value;
    }
    set listOfColumnComponents(components) {
        if (components) {
            this._listOfColumnComponents = components;
            this._initializeColumns();
            this._initializeDataModel();
        }
    }
    _getSelectionKeys(selections) {
        return selections.map((item) => {
            if (typeof item === 'number' || typeof item === 'string') {
                return item;
            }
            else {
                return item[this.rowKey];
            }
        });
    }
    _initializeColumns() {
        const components = this._listOfColumnComponents ? this._listOfColumnComponents.toArray() : [];
        const hasExpand = components.some(item => item.expand === true);
        this.columns = components.map((component, i) => {
            const selections = this._getSelectionKeys(component.selections);
            return {
                key: component.key,
                model: component.model,
                title: component.title,
                type: component.type,
                selections: selections,
                width: component.width,
                className: component.className,
                headerClassName: component.headerClassName,
                disabled: component.disabled,
                defaultText: component.defaultText,
                expand: hasExpand ? component.expand : i === 0,
                templateRef: component.cellTemplateRef,
                headerTemplateRef: component.headerTemplateRef
            };
        });
    }
    _initializeDataModel() {
        this.model.forEach(row => {
            this.columns.forEach(column => {
                this._initialSelections(row, column);
                this._initialCustomModelValue(row, column);
            });
        });
    }
    _initialSelections(row, column) {
        if (column.selections) {
            if (column.type === 'checkbox') {
                row[column.key] = column.selections.includes(row[this.rowKey]);
                this.onModelChange(row, column);
            }
            if (column.type === 'radio') {
                if (column.selections.includes(row[this.rowKey])) {
                    this.selectedRadioRow = row;
                }
            }
        }
    }
    _initialCustomModelValue(row, column) {
        if (column.type === customType.switch) {
            row[column.key] = get(row, column.model);
        }
    }
    _refreshCustomModelValue(row) {
        this.columns.forEach(column => {
            this._initialCustomModelValue(row, column);
        });
    }
    _applyDiffChanges(changes) {
        if (changes) {
            changes.forEachAddedItem((record) => {
                this._refreshCustomModelValue(record.item);
            });
        }
    }
    _bindTrackFn() {
        this.trackByFn = function (index, row) {
            return row && this.rowKey ? row[this.rowKey] : index;
        }.bind(this);
    }
    _destroyInvalidAttribute() {
        this.model.forEach(row => {
            for (const key in row) {
                if (key.includes('[$$column]')) {
                    delete row[key];
                }
            }
        });
    }
    _setClass(first = false) {
        if (!first && !this.initialized) {
            return;
        }
        const classNames = [];
        if (tableSizeMap[this.size]) {
            classNames.push(tableSizeMap[this.size]);
        }
        if (tableThemeMap[this.theme]) {
            classNames.push(tableThemeMap[this.theme]);
        }
        if (tableSizeMap[this.size] === tableSizeMap['sm'] && tableThemeMap[this.theme] === tableThemeMap['default']) {
            classNames.push('table-default-sm-bottom-padding');
        }
        this.updateHostClassService.updateClass(classNames);
    }
    _filterModel() {
        if (this.model && this.model.length > 0) {
            if (this._filter) {
            }
        }
    }
    updateColumnSelections(key, selections) {
        const column = this.columns.find(item => item.key === key);
        column.selections = this._getSelectionKeys(selections);
        this.model.forEach(row => {
            this._initialSelections(row, column);
        });
    }
    isTemplateRef(ref) {
        return ref instanceof TemplateRef;
    }
    getModelValue(row, path) {
        return get(row, path);
    }
    renderRowClassName(row, index) {
        if (!this.rowClassName) {
            return null;
        }
        if (isString(this.rowClassName)) {
            return this.rowClassName;
        }
        else {
            return this.rowClassName(row, index);
        }
    }
    onModelChange(row, column) {
        if (column.model) {
            set(row, column.model, row[column.key]);
        }
    }
    onStopPropagation(event) {
        if (this.wholeRowSelect) {
            event.stopPropagation();
        }
    }
    onPageChange(event) {
        this.thyOnPageChange.emit(event);
    }
    onPageIndexChange(event) {
        this.thyOnPageIndexChange.emit(event);
    }
    onCheckboxChange(row, column) {
        this.onModelChange(row, column);
        this.onMultiSelectChange(null, row, column);
    }
    onMultiSelectChange(event, row, column) {
        const rows = this.model.filter(item => {
            return item[column.key];
        });
        const multiSelectEvent = {
            event: event,
            row: row,
            rows: rows
        };
        this.thyOnMultiSelectChange.emit(multiSelectEvent);
    }
    onRadioSelectChange(event, row) {
        const radioSelectEvent = {
            event: event,
            row: row
        };
        this.thyOnRadioSelectChange.emit(radioSelectEvent);
    }
    onSwitchChange(event, row, column) {
        const switchEvent = {
            event: event,
            row: row,
            refresh: (value) => {
                value = value || row;
                setTimeout(() => {
                    value[column.key] = get(value, column.model);
                });
            }
        };
        this.thyOnSwitchChange.emit(switchEvent);
    }
    showExpand(row) {
        return row[this.thyChildrenKey] && row[this.thyChildrenKey].length > 0;
    }
    isExpanded(row) {
        return this.expandStatusMap[row[this.rowKey]];
    }
    iconIndentComputed(level) {
        if (this.mode === 'tree') {
            return level * this.thyIndent - 10;
        }
    }
    tdIndentComputed(level) {
        return {
            position: 'relative',
            paddingLeft: `${(level + 1) * this.thyIndent - 10}px`
        };
    }
    expandChildren(event, row) {
        event.stopPropagation();
        if (this.isExpanded(row)) {
            this.expandStatusMap[row[this.rowKey]] = false;
        }
        else {
            this.expandStatusMap[row[this.rowKey]] = true;
        }
    }
    onDragStarted() {
        setTimeout(() => {
            const preview = this.document.getElementsByClassName('cdk-drag-preview')[0];
            if (preview) {
                preview.classList.add('thy-table-drag-preview');
            }
        });
    }
    onDragDropped(event) {
        const dragEvent = {
            model: event.item,
            models: this.model,
            oldIndex: event.previousIndex,
            newIndex: event.currentIndex
        };
        moveItemInArray(this.model, event.previousIndex, event.currentIndex);
        this.thyOnDraggableChange.emit(dragEvent);
    }
    onRowClick(event, row) {
        if (this.wholeRowSelect) {
            const column = this.columns.find(item => {
                return item.type === customType.checkbox || item.type === customType.radio;
            });
            if (!column.disabled) {
                if (column.type === customType.checkbox) {
                    row[column.key] = !row[column.key];
                    this.onModelChange(row, column);
                    this.onMultiSelectChange(event, row, column);
                }
                if (column.type === customType.radio) {
                    this.selectedRadioRow = row;
                    this.onRadioSelectChange(event, row);
                }
            }
        }
        const rowEvent = {
            event: event,
            row: row
        };
        this.thyOnRowClick.emit(rowEvent);
    }
    onRowContextMenu(event, row) {
        const contextMenuEvent = {
            event: event,
            row: row
        };
        this.thyOnRowContextMenu.emit(contextMenuEvent);
    }
    draggableStopPropagation(event) {
        if (!this.draggable) {
            event.stopPropagation();
        }
    }
    _refreshColumns() {
        const components = this._listOfColumnComponents ? this._listOfColumnComponents.toArray() : [];
        const _columns = components.map(component => {
            return {
                width: component.width,
                className: component.className
            };
        });
        this.columns.forEach((n, i) => {
            Object.assign(n, _columns[i]);
        });
    }
    buildGroups(originGroups) {
        const collapsedIds = this.groups.filter(group => !group.expand).map(group => group.id);
        this.groups = [];
        originGroups.forEach((origin) => {
            const group = { id: origin[this.rowKey], children: [], origin };
            group.expand = !collapsedIds.includes(group.id);
            this.groups.push(group);
        });
    }
    buildModel() {
        const groupsMap = keyBy(this.groups, 'id');
        this.model.forEach(row => {
            const group = groupsMap[row[this.groupBy]];
            if (group) {
                group.children.push(row);
            }
        });
    }
    expandGroup(group) {
        group.expand = !group.expand;
    }
    ngOnInit() {
        this.updateHostClassService.initializeElement(this.tableElementRef.nativeElement);
        this._setClass(true);
        this.initialized = true;
        merge(this.viewportRuler.change(200), of(null).pipe(delay(200)))
            .pipe(takeUntil(this.ngUnsubscribe$))
            .subscribe(() => {
            this._refreshColumns();
        });
    }
    ngOnChanges(simpleChangs) {
        const modeChange = simpleChangs.thyMode;
        const thyGroupsChange = simpleChangs.thyGroups;
        const isGroupMode = modeChange && modeChange.currentValue === 'group';
        if (isGroupMode && thyGroupsChange && thyGroupsChange.firstChange) {
            this.buildGroups(thyGroupsChange.currentValue);
            this.buildModel();
        }
    }
    ngDoCheck() {
        if (this._diff) {
            const changes = this._diff.diff(this.model);
            this._applyDiffChanges(changes);
        }
    }
    ngOnDestroy() {
        super.ngOnDestroy();
        this._destroyInvalidAttribute();
    }
}
ThyTableComponent.ɵfac = function ThyTableComponent_Factory(t) { return new (t || ThyTableComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ViewportRuler), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.UpdateHostClassService), ɵngcc0.ɵɵdirectiveInject(DOCUMENT)); };
ThyTableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ThyTableComponent, selectors: [["thy-grid"], ["thy-table"]], contentQueries: function ThyTableComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, _c0, true);
        ɵngcc0.ɵɵstaticContentQuery(dirIndex, _c1, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, ThyTableColumnComponent, false);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.emptyTemplate = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.groupTemplate = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.listOfColumnComponents = _t);
    } }, viewQuery: function ThyTableComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(_c2, true);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tableElementRef = _t.first);
    } }, hostVars: 4, hostBindings: function ThyTableComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("thy-table", ctx.isTableClass)("thy-table-hover-display-operation", ctx.thyHoverDisplayOperation);
    } }, inputs: { thyShowHeader: "thyShowHeader", showTotal: ["thyShowTotal", "showTotal"], thyIndent: "thyIndent", thyChildrenKey: "thyChildrenKey", thyMode: "thyMode", thyGroupBy: "thyGroupBy", thyRowKey: "thyRowKey", thyGroups: "thyGroups", thyModel: "thyModel", thyTheme: "thyTheme", thySize: "thySize", thyClassName: "thyClassName", thyRowClassName: "thyRowClassName", thyLoadingDone: "thyLoadingDone", thyLoadingText: "thyLoadingText", thyEmptyOptions: "thyEmptyOptions", thyDraggable: "thyDraggable", thyFilter: "thyFilter", thyPageIndex: "thyPageIndex", thyPageSize: "thyPageSize", thyPageTotal: "thyPageTotal", thyWholeRowSelect: "thyWholeRowSelect", thyHoverDisplayOperation: "thyHoverDisplayOperation" }, outputs: { thyOnSwitchChange: "thyOnSwitchChange", thyOnPageChange: "thyOnPageChange", thyOnPageIndexChange: "thyOnPageIndexChange", thyOnMultiSelectChange: "thyOnMultiSelectChange", thyOnRadioSelectChange: "thyOnRadioSelectChange", thyOnDraggableChange: "thyOnDraggableChange", thyOnRowClick: "thyOnRowClick", thyOnRowContextMenu: "thyOnRowContextMenu" }, features: [ɵngcc0.ɵɵProvidersFeature([
            {
                provide: THY_TABLE_COLUMN_PARENT_COMPONENT,
                useExisting: ThyTableComponent
            },
            UpdateHostClassService
        ]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c8, decls: 10, vars: 14, consts: [[1, "table", 3, "ngClass"], ["table", ""], [3, "width", 4, "ngFor", "ngForOf"], [4, "ngIf"], ["thyDragDrop", "", "cdkDropList", "", 3, "cdkDropListDisabled", "cdkDropListDropped", 4, "ngIf"], ["class", "thy-table-empty clear-hover", 4, "ngIf"], [3, "thyDone", "thyTip"], ["class", "thy-table-footer", 3, "thy-table-footer-has-padding", 4, "ngIf"], [3, "width"], [3, "ngClass", 4, "ngFor", "ngForOf"], [3, "ngClass"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["thyDragDrop", "", "cdkDropList", "", 3, "cdkDropListDisabled", "cdkDropListDropped"], ["trTemplate", ""], ["tdsTemplate", ""], [4, "ngFor", "ngForOf"], [1, "thy-table-group", 3, "click"], [1, "thy-table-group-container"], [1, "expand-icon", 3, "thyIconName"], [4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "thy-sortable-item", "cdkDrag", "", 3, "cdkDragData", "ngClass", "cdkDragStarted", "mousedown", "touchstart", "pointerdown", "click", "thyContextMenu", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["cdkDrag", "", 1, "thy-sortable-item", 3, "cdkDragData", "ngClass", "cdkDragStarted", "mousedown", "touchstart", "pointerdown", "click", "thyContextMenu"], [3, "ngClass", "thy-table-checkbox-column", "ngStyle", 4, "ngFor", "ngForOf"], [3, "ngClass", "ngStyle"], ["thyIconName", "drag", 1, "table-draggable-icon"], ["class", "tree-expand-icon cursor-pointer", 3, "thyIconName", "visibility", "left", "click", 4, "ngIf"], [1, "tree-expand-icon", "cursor-pointer", 3, "thyIconName", "click"], ["class", "tree-expand-icon cursor-pointer", 3, "thyIconName", "visibility", "marginLeft", "click", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["default", ""], [1, "text-desc"], ["type", "checkbox", 3, "ngModel", "disabled", "ngModelChange", "click"], ["type", "radio", 3, "ngModel", "value", "disabled", "ngModelChange", "click", "change"], [3, "ngModel", "disabled", "ngModelChange", "thyChange"], [1, "thy-table-empty", "clear-hover"], ["defaultEmpty", ""], [3, "ngTemplateOutlet"], [3, "thyMessage", "thyTranslationKey", "thyTranslationValues", "thyEntityName", "thyEntityNameTranslateKey", "thyIconName", "thySize", "thyMarginTop", "thyTopAuto", "thyContainer"], [1, "thy-table-footer"], [3, "thyPageIndex", "thyTotal", "thyPageSize", "thyShowTotal", "thyPageChanged", "thyPageIndexChange"]], template: function ThyTableComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "table", 0, 1);
        ɵngcc0.ɵɵelementStart(2, "colgroup");
        ɵngcc0.ɵɵtemplate(3, ThyTableComponent_col_3_Template, 1, 1, "col", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(4, ThyTableComponent_thead_4_Template, 3, 1, "thead", 3);
        ɵngcc0.ɵɵtemplate(5, ThyTableComponent_tbody_5_Template, 8, 4, "tbody", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, ThyTableComponent_div_6_Template, 4, 2, "div", 5);
        ɵngcc0.ɵɵelement(7, "thy-loading", 6);
        ɵngcc0.ɵɵtemplate(8, ThyTableComponent_div_8_Template, 2, 6, "div", 7);
        ɵngcc0.ɵɵtemplate(9, ThyTableComponent_ng_template_9_Template, 1, 0, "ng-template");
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("table-draggable", ctx.draggable)("table-group", ctx.mode === "group");
        ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(12, _c7, ctx.className));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.columns);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.thyShowHeader);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.loadingDone);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.loadingDone && ctx.model.length === 0 && ctx.groups.length === 0);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("thyDone", ctx.loadingDone)("thyTip", ctx.loadingText);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.pagination.total > ctx.pagination.size);
    } }, directives: [ɵngcc3.NgClass, ɵngcc3.NgForOf, ɵngcc3.NgIf, ɵngcc4.ThyLoadingComponent, ɵngcc3.NgTemplateOutlet, ɵngcc5.ThyDragDropDirective, ɵngcc6.CdkDropList, ɵngcc7.ThyIconComponent, ɵngcc6.CdkDrag, ɵngcc5.ThyContextMenuDirective, ɵngcc3.NgStyle, ɵngcc8.CheckboxControlValueAccessor, ɵngcc8.NgControlStatus, ɵngcc8.NgModel, ɵngcc8.RadioControlValueAccessor, ɵngcc8.DefaultValueAccessor, ɵngcc9.ThySwitchComponent, ɵngcc10.ThyEmptyComponent, ɵngcc11.ThyPaginationComponent], pipes: [ɵngcc12.TableIsValidModelValuePipe], encapsulation: 2 });
ThyTableComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: IterableDiffers },
    { type: ViewportRuler },
    { type: UpdateHostClassService },
    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
];
ThyTableComponent.propDecorators = {
    emptyTemplate: [{ type: ContentChild, args: ['empty',] }],
    tableElementRef: [{ type: ViewChild, args: ['table', { static: true },] }],
    thyMode: [{ type: Input }],
    thyGroupBy: [{ type: Input }],
    thyRowKey: [{ type: Input }],
    thyGroups: [{ type: Input }],
    thyModel: [{ type: Input }],
    thyTheme: [{ type: Input }],
    thySize: [{ type: Input }],
    thyClassName: [{ type: Input }],
    thyRowClassName: [{ type: Input }],
    thyLoadingDone: [{ type: Input }],
    thyLoadingText: [{ type: Input }],
    thyEmptyOptions: [{ type: Input }],
    thyDraggable: [{ type: Input }],
    thyFilter: [{ type: Input }],
    thyPageIndex: [{ type: Input }],
    thyPageSize: [{ type: Input }],
    thyPageTotal: [{ type: Input }],
    thyWholeRowSelect: [{ type: Input }],
    thyShowHeader: [{ type: Input }],
    showTotal: [{ type: Input, args: ['thyShowTotal',] }],
    thyIndent: [{ type: Input }],
    thyChildrenKey: [{ type: Input }],
    thyHoverDisplayOperation: [{ type: HostBinding, args: ['class.thy-table-hover-display-operation',] }, { type: Input }],
    thyOnSwitchChange: [{ type: Output }],
    thyOnPageChange: [{ type: Output }],
    thyOnPageIndexChange: [{ type: Output }],
    thyOnMultiSelectChange: [{ type: Output }],
    thyOnRadioSelectChange: [{ type: Output }],
    thyOnDraggableChange: [{ type: Output }],
    thyOnRowClick: [{ type: Output }],
    thyOnRowContextMenu: [{ type: Output }],
    groupTemplate: [{ type: ContentChild, args: ['group', { static: true },] }],
    listOfColumnComponents: [{ type: ContentChildren, args: [ThyTableColumnComponent,] }],
    isTableClass: [{ type: HostBinding, args: ['class.thy-table',] }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ThyTableComponent, [{
        type: Component,
        args: [{
                selector: 'thy-grid,thy-table',
                template: "<table #table class=\"table\" [ngClass]=\"[className]\" [class.table-draggable]=\"draggable\" [class.table-group]=\"mode === 'group'\">\n  <colgroup>\n    <col *ngFor=\"let column of columns\" [width]=\"column.width\" />\n  </colgroup>\n\n  <thead *ngIf=\"thyShowHeader\">\n    <tr>\n      <th *ngFor=\"let column of columns\" [ngClass]=\"column.headerClassName\">\n        <ng-container *ngIf=\"!column.headerTemplateRef\">\n          {{ column.title }}\n        </ng-container>\n        <ng-container *ngIf=\"column.headerTemplateRef\">\n          <ng-template [ngTemplateOutlet]=\"column.headerTemplateRef\" [ngTemplateOutletContext]=\"{ $implicit: column }\"></ng-template>\n        </ng-container>\n      </th>\n    </tr>\n  </thead>\n\n  <tbody *ngIf=\"loadingDone\" thyDragDrop cdkDropList [cdkDropListDisabled]=\"!draggable\" (cdkDropListDropped)=\"onDragDropped($event)\">\n    <!-- group -->\n    <ng-container *ngIf=\"mode === 'group'\">\n      <ng-container *ngFor=\"let group of groups\">\n        <tr class=\"thy-table-group\" (click)=\"expandGroup(group)\">\n          <td [attr.colspan]=\"columns.length\">\n            <div class=\"thy-table-group-container\">\n              <thy-icon class=\"expand-icon\" [thyIconName]=\"group.expand ? 'angle-down' : 'angle-right'\"></thy-icon>\n              <ng-container *ngIf=\"groupTemplate\">\n                <ng-template\n                  [ngTemplateOutlet]=\"groupTemplate\"\n                  [ngTemplateOutletContext]=\"{ $implicit: group.origin, group: group.origin }\"\n                ></ng-template>\n              </ng-container>\n            </div>\n          </td>\n        </tr>\n        <ng-container *ngIf=\"group.children?.length && group.expand\">\n          <ng-container *ngFor=\"let row of group.children; trackBy: trackByFn; let i = index\">\n            <ng-template [ngTemplateOutlet]=\"trTemplate\" [ngTemplateOutletContext]=\"{ row: row, index: i, level: 0 }\"></ng-template>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n\n    <!-- list\u6A21\u5F0F\u4E0B\u6CA1\u6709\u76F4\u63A5\u4F7F\u7528item\u6A21\u677F\uFF0C\u662F\u56E0\u4E3A\u4F7F\u7528\u4E86\u6A21\u677F\u5F71\u54CD\u4E86Angular\u7684\u4F9D\u8D56\u6811\uFF0C\u5BFC\u81F4CdkDragDrop\u6392\u5E8F\u5931\u6548\uFF0C\u76EE\u524D\u8FD9\u6837\u4FEE\u6539\u53EF\u4EE5\u6682\u65F6\u89E3\u51B3\u7EBF\u4E0A\u4E0D\u80FD\u6392\u5E8F\u7684\u95EE\u9898\uFF0CTree\u6A21\u5F0F\u7684\u6392\u5E8F\u6682\u65F6\u4E0D\u652F\u6301 -->\n    <ng-container *ngIf=\"mode === 'list'\">\n      <tr\n        *ngFor=\"let row of model; trackBy: trackByFn; let i = index\"\n        class=\"thy-sortable-item\"\n        cdkDrag\n        [cdkDragData]=\"row\"\n        (cdkDragStarted)=\"onDragStarted()\"\n        [ngClass]=\"renderRowClassName(row, i)\"\n        (mousedown)=\"draggableStopPropagation($event)\"\n        (touchstart)=\"draggableStopPropagation($event)\"\n        (pointerdown)=\"draggableStopPropagation($event)\"\n        (click)=\"onRowClick($event, row)\"\n        (thyContextMenu)=\"onRowContextMenu($event, row)\"\n      >\n        <ng-template [ngTemplateOutlet]=\"tdsTemplate\" [ngTemplateOutletContext]=\"{ row: row, index: i, level: 0 }\"></ng-template>\n      </tr>\n    </ng-container>\n\n    <ng-container *ngIf=\"mode === 'tree'\">\n      <ng-container *ngFor=\"let row of model; trackBy: trackByFn; let i = index\">\n        <ng-template [ngTemplateOutlet]=\"trTemplate\" [ngTemplateOutletContext]=\"{ row: row, index: i, level: 0 }\"></ng-template>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #trTemplate let-row=\"row\" let-i=\"index\" let-level=\"level\">\n      <tr\n        class=\"thy-sortable-item\"\n        cdkDrag\n        [cdkDragData]=\"row\"\n        (cdkDragStarted)=\"onDragStarted()\"\n        [ngClass]=\"renderRowClassName(row, i)\"\n        (mousedown)=\"draggableStopPropagation($event)\"\n        (touchstart)=\"draggableStopPropagation($event)\"\n        (pointerdown)=\"draggableStopPropagation($event)\"\n        (click)=\"onRowClick($event, row)\"\n        (thyContextMenu)=\"onRowContextMenu($event, row)\"\n      >\n        <ng-template [ngTemplateOutlet]=\"tdsTemplate\" [ngTemplateOutletContext]=\"{ row: row, index: i, level: level + 1 }\"></ng-template>\n      </tr>\n\n      <ng-container *ngIf=\"mode === 'tree' && isExpanded(row)\">\n        <ng-template\n          *ngFor=\"let child of row[thyChildrenKey]; trackBy: trackByFn; let j = index\"\n          [ngTemplateOutlet]=\"trTemplate\"\n          [ngTemplateOutletContext]=\"{ row: child, index: j, level: level + 1 }\"\n        ></ng-template>\n      </ng-container>\n    </ng-template>\n\n    <ng-template #tdsTemplate let-row=\"row\" let-i=\"index\" let-level=\"level\">\n      <td\n        *ngFor=\"let column of columns; let j = index\"\n        [ngClass]=\"column.className\"\n        [class.thy-table-checkbox-column]=\"column.type === customType.checkbox\"\n        [ngStyle]=\"mode === 'tree' && column.expand ? tdIndentComputed(level) : null\"\n      >\n        <ng-container *ngIf=\"j === 0 && draggable\">\n          <thy-icon class=\"table-draggable-icon\" thyIconName=\"drag\"></thy-icon>\n        </ng-container>\n\n        <!--template-->\n        <ng-container *ngIf=\"isTemplateRef(column.templateRef)\">\n          <thy-icon\n            class=\"tree-expand-icon cursor-pointer\"\n            *ngIf=\"mode === 'tree' && column.expand\"\n            [thyIconName]=\"isExpanded(row) ? 'angle-down' : 'angle-right'\"\n            [style.visibility]=\"showExpand(row) ? 'visible' : 'hidden'\"\n            [style.left.px]=\"iconIndentComputed(level)\"\n            (click)=\"expandChildren($event, row)\"\n          ></thy-icon>\n          <ng-template [ngTemplateOutlet]=\"column.templateRef\" [ngTemplateOutletContext]=\"{ $implicit: row }\"></ng-template>\n        </ng-container>\n\n        <!--not template-->\n        <ng-container *ngIf=\"!isTemplateRef(column.templateRef)\">\n          <!-- default -->\n          <ng-container *ngIf=\"column.model && !column.type\">\n            <thy-icon\n              class=\"tree-expand-icon cursor-pointer\"\n              *ngIf=\"mode === 'tree' && column.expand\"\n              [thyIconName]=\"isExpanded(row) ? 'angle-down' : 'angle-right'\"\n              [style.visibility]=\"showExpand(row) ? 'visible' : 'hidden'\"\n              [style.marginLeft.px]=\"iconIndentComputed(level)\"\n              (click)=\"expandChildren($event, row)\"\n            ></thy-icon>\n            <ng-container *ngIf=\"getModelValue(row, column.model) | isValidModelValue; else default\">\n              {{ getModelValue(row, column.model) }}\n            </ng-container>\n            <ng-template #default>\n              <div class=\"text-desc\">\n                {{ column.defaultText }}\n              </div>\n            </ng-template>\n          </ng-container>\n\n          <!-- index -->\n          <ng-container *ngIf=\"column.type === customType.index\">\n            {{ i + 1 }}\n          </ng-container>\n\n          <!-- checkbox -->\n          <ng-container *ngIf=\"column.type === customType.checkbox\">\n            <input\n              type=\"checkbox\"\n              [(ngModel)]=\"row[column.key]\"\n              (ngModelChange)=\"onCheckboxChange(row, column)\"\n              (click)=\"onStopPropagation($event)\"\n              [disabled]=\"column.disabled\"\n            />\n          </ng-container>\n\n          <!-- radio -->\n          <ng-container *ngIf=\"column.type === customType.radio\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"selectedRadioRow\"\n              [value]=\"row\"\n              [disabled]=\"column.disabled\"\n              (click)=\"onStopPropagation($event)\"\n              (change)=\"onRadioSelectChange($event, row)\"\n            />\n          </ng-container>\n\n          <!-- switch -->\n          <ng-container *ngIf=\"column.type === customType.switch\">\n            <thy-switch\n              [(ngModel)]=\"row[column.key]\"\n              (ngModelChange)=\"onModelChange(row, column)\"\n              [disabled]=\"column.disabled\"\n              (thyChange)=\"onSwitchChange($event, row, column)\"\n            ></thy-switch>\n          </ng-container>\n        </ng-container>\n      </td>\n    </ng-template>\n  </tbody>\n</table>\n\n<div *ngIf=\"loadingDone && model.length === 0 && groups.length === 0\" class=\"thy-table-empty clear-hover\">\n  <ng-container *ngIf=\"emptyTemplate; else defaultEmpty\">\n    <ng-template [ngTemplateOutlet]=\"emptyTemplate\"></ng-template>\n  </ng-container>\n  <ng-template #defaultEmpty>\n    <thy-empty\n      [thyMessage]=\"emptyOptions.message\"\n      [thyTranslationKey]=\"emptyOptions.translationKey\"\n      [thyTranslationValues]=\"emptyOptions.translationValues\"\n      [thyEntityName]=\"emptyOptions.entityName\"\n      [thyEntityNameTranslateKey]=\"emptyOptions.entityNameTranslateKey\"\n      [thyIconName]=\"emptyOptions.iconName\"\n      [thySize]=\"emptyOptions.size\"\n      [thyMarginTop]=\"emptyOptions.marginTop\"\n      [thyTopAuto]=\"emptyOptions.topAuto\"\n      [thyContainer]=\"emptyOptions.container\"\n    ></thy-empty>\n  </ng-template>\n</div>\n\n<thy-loading [thyDone]=\"loadingDone\" [thyTip]=\"loadingText\"></thy-loading>\n\n<div class=\"thy-table-footer\" *ngIf=\"pagination.total > pagination.size\" [class.thy-table-footer-has-padding]=\"theme === 'default'\">\n  <thy-pagination\n    [thyPageIndex]=\"pagination.index\"\n    [thyTotal]=\"pagination.total\"\n    [thyPageSize]=\"pagination.size\"\n    [thyShowTotal]=\"showTotal\"\n    (thyPageChanged)=\"onPageChange($event)\"\n    (thyPageIndexChange)=\"onPageIndexChange($event)\"\n  ></thy-pagination>\n</div>\n\n<ng-template>\n  <ng-content></ng-content>\n</ng-template>\n",
                providers: [
                    {
                        provide: THY_TABLE_COLUMN_PARENT_COMPONENT,
                        useExisting: ThyTableComponent
                    },
                    UpdateHostClassService
                ],
                encapsulation: ViewEncapsulation.None
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.IterableDiffers }, { type: ɵngcc1.ViewportRuler }, { type: ɵngcc2.UpdateHostClassService }, { type: undefined, decorators: [{
                type: Inject,
                args: [DOCUMENT]
            }] }]; }, { thyShowHeader: [{
            type: Input
        }], showTotal: [{
            type: Input,
            args: ['thyShowTotal']
        }], thyIndent: [{
            type: Input
        }], thyChildrenKey: [{
            type: Input
        }], thyOnSwitchChange: [{
            type: Output
        }], thyOnPageChange: [{
            type: Output
        }], thyOnPageIndexChange: [{
            type: Output
        }], thyOnMultiSelectChange: [{
            type: Output
        }], thyOnRadioSelectChange: [{
            type: Output
        }], thyOnDraggableChange: [{
            type: Output
        }], thyOnRowClick: [{
            type: Output
        }], thyOnRowContextMenu: [{
            type: Output
        }], isTableClass: [{
            type: HostBinding,
            args: ['class.thy-table']
        }], thyMode: [{
            type: Input
        }], thyGroupBy: [{
            type: Input
        }], thyRowKey: [{
            type: Input
        }], thyGroups: [{
            type: Input
        }], thyModel: [{
            type: Input
        }], thyTheme: [{
            type: Input
        }], thySize: [{
            type: Input
        }], thyClassName: [{
            type: Input
        }], thyRowClassName: [{
            type: Input
        }], thyLoadingDone: [{
            type: Input
        }], thyLoadingText: [{
            type: Input
        }], thyEmptyOptions: [{
            type: Input
        }], thyDraggable: [{
            type: Input
        }], thyFilter: [{
            type: Input
        }], thyPageIndex: [{
            type: Input
        }], thyPageSize: [{
            type: Input
        }], thyPageTotal: [{
            type: Input
        }], thyWholeRowSelect: [{
            type: Input
        }], listOfColumnComponents: [{
            type: ContentChildren,
            args: [ThyTableColumnComponent]
        }], emptyTemplate: [{
            type: ContentChild,
            args: ['empty']
        }], tableElementRef: [{
            type: ViewChild,
            args: ['table', { static: true }]
        }], thyHoverDisplayOperation: [{
            type: HostBinding,
            args: ['class.thy-table-hover-display-operation']
        }, {
            type: Input
        }], groupTemplate: [{
            type: ContentChild,
            args: ['group', { static: true }]
        }] }); })();
/**
 * @deprecated ThyGridComponent is deprecated, please use ThyTableComponent
 */
export const ThyGridComponent = ThyTableComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdGFibGUvdGFibGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBZSxTQUFTLEVBQUUsZ0JBQWdCLEVBQWtCLHNCQUFzQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFbkgsT0FBTyxFQUFFLHFCQUFxQixFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ25GLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2pDLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFbEQsT0FBTyxFQUFlLGVBQWUsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNyRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUNILFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLGlCQUFpQixFQUNqQixXQUFXLEVBR1gsWUFBWSxFQUNaLFlBQVksRUFDWixlQUFlLEVBRWYsVUFBVSxFQUNWLFdBQVcsRUFDWCxNQUFNLEVBSU4sZUFBZSxFQUVmLFNBQVMsRUFDVCxTQUFTLEVBRVosTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFrQyxpQ0FBaUMsRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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SUcsS0FBSztBQUNSLDJCQUlHLEtBQUs7QUFDUixnQ0FJRyxLQUFLO0FBQ1IsNEJBT0csS0FBSztBQUFLLHdCQUVWLEtBQUssU0FBQyxjQUFjO0FBQU8sd0JBRTNCLEtBQUs7QUFBSyw2QkFFVixLQUFLO0FBQUssdUNBRVYsV0FBVyxTQUFDLHlDQUF5QyxjQUNyRCxLQUFLO0FBQ1IsZ0NBRUcsTUFBTTtBQUFLLDhCQUVYLE1BQU07QUFBSyxtQ0FFWCxNQUFNO0FBQUsscUNBRVgsTUFBTTtBQUFLLHFDQUVYLE1BQU07QUFBSyxtQ0FFWCxNQUFNO0FBQUssNEJBRVgsTUFBTTtBQUFLLGtDQUVYLE1BQU07QUFBSyw0QkFFWCxZQUFZLFNBQUMsT0FBTyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUFPLHFDQUU3QyxlQUFlLFNBQUMsdUJBQXVCO0FBQ3ZDLDJCQVFBLFdBQVcsU0FBQyxpQkFBaUI7QUFBTTs7Ozs7aWZBeE5DLGtCQUNyQyxTQUFTLEVBQUUsc0JBQ1AsMEJBQ0ksT0FBTyxFQUFFLGlDQUFpQywwQkFDMUMsV0FBVyxFQUFFLGlCQUFpQixzQkFDakMsc0JBQ0Qsc0JBQXNCLGtCQUN6QixrQkFDRCxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSSxjQUN4Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkErTXlDO0FBMlgxQztBQUNBO0FBQ0EsR0FBRztBQUNILE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLGlCQUFpQixDQUFDO0FBQ2xEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29uc3RydWN0b3IsIE1peGluQmFzZSwgbWl4aW5VbnN1YnNjcmliZSwgVGh5VW5zdWJzY3JpYmUsIFVwZGF0ZUhvc3RDbGFzc1NlcnZpY2UgfSBmcm9tICduZ3gtdGV0aHlzL2NvcmUnO1xuaW1wb3J0IHsgRGljdGlvbmFyeSB9IGZyb20gJ25neC10ZXRoeXMvdHlwZXMnO1xuaW1wb3J0IHsgY29lcmNlQm9vbGVhblByb3BlcnR5LCBnZXQsIGlzU3RyaW5nLCBrZXlCeSwgc2V0IH0gZnJvbSAnbmd4LXRldGh5cy91dGlsJztcbmltcG9ydCB7IG1lcmdlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVsYXksIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgQ2RrRHJhZ0Ryb3AsIG1vdmVJdGVtSW5BcnJheSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgVmlld3BvcnRSdWxlciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7XG4gICAgQ29tcG9uZW50LFxuICAgIElucHV0LFxuICAgIE91dHB1dCxcbiAgICBWaWV3RW5jYXBzdWxhdGlvbixcbiAgICBUZW1wbGF0ZVJlZixcbiAgICBPbkluaXQsXG4gICAgT25DaGFuZ2VzLFxuICAgIEV2ZW50RW1pdHRlcixcbiAgICBDb250ZW50Q2hpbGQsXG4gICAgQ29udGVudENoaWxkcmVuLFxuICAgIERvQ2hlY2ssXG4gICAgRWxlbWVudFJlZixcbiAgICBIb3N0QmluZGluZyxcbiAgICBJbmplY3QsXG4gICAgSXRlcmFibGVDaGFuZ2VSZWNvcmQsXG4gICAgSXRlcmFibGVDaGFuZ2VzLFxuICAgIEl0ZXJhYmxlRGlmZmVyLFxuICAgIEl0ZXJhYmxlRGlmZmVycyxcbiAgICBPbkRlc3Ryb3ksXG4gICAgUXVlcnlMaXN0LFxuICAgIFZpZXdDaGlsZCxcbiAgICBTaW1wbGVDaGFuZ2VzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBJVGh5VGFibGVDb2x1bW5QYXJlbnRDb21wb25lbnQsIFRIWV9UQUJMRV9DT0xVTU5fUEFSRU5UX0NPTVBPTkVOVCwgVGh5VGFibGVDb2x1bW5Db21wb25lbnQgfSBmcm9tICcuL3RhYmxlLWNvbHVtbi5jb21wb25lbnQnO1xuaW1wb3J0IHtcbiAgICBQYWdlQ2hhbmdlZEV2ZW50LFxuICAgIFRoeVRhYmxlQ29sdW1uLFxuICAgIFRoeVRhYmxlRHJhZ2dhYmxlRXZlbnQsXG4gICAgVGh5VGFibGVFbXB0eU9wdGlvbnMsXG4gICAgVGh5VGFibGVFdmVudCxcbiAgICBUaHlUYWJsZVJvd0V2ZW50LFxuICAgIFRoeU11bHRpU2VsZWN0RXZlbnQsXG4gICAgVGh5UGFnZSxcbiAgICBUaHlSYWRpb1NlbGVjdEV2ZW50LFxuICAgIFRoeVN3aXRjaEV2ZW50XG59IGZyb20gJy4vdGFibGUuaW50ZXJmYWNlJztcblxuZXhwb3J0IHR5cGUgVGh5VGFibGVUaGVtZSA9ICdkZWZhdWx0JyB8ICdib3JkZXJlZCc7XG4vKipcbiAqIEBkZXByZWNhdGVkIFRoeUdyaWRUaGVtZSBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFRoeVRhYmxlVGhlbWVcbiAqL1xuZXhwb3J0IHR5cGUgVGh5R3JpZFRoZW1lID0gVGh5VGFibGVUaGVtZTtcblxuZXhwb3J0IHR5cGUgVGh5VGFibGVNb2RlID0gJ2xpc3QnIHwgJ2dyb3VwJyB8ICd0cmVlJztcbi8qKlxuICogQGRlcHJlY2F0ZWQgVGh5R3JpZE1vZGUgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBUaHlUYWJsZU1vZGVcbiAqL1xuZXhwb3J0IHR5cGUgVGh5R3JpZE1vZGUgPSBUaHlUYWJsZU1vZGU7XG5cbmV4cG9ydCB0eXBlIFRoeVRhYmxlU2l6ZSA9ICdkZWZhdWx0JyB8ICdzbSc7XG4vKipcbiAqIEBkZXByZWNhdGVkIFRoeUdyaWRTaXplIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgVGh5VGFibGVTaXplXG4gKi9cbmV4cG9ydCB0eXBlIFRoeUdyaWRTaXplID0gVGh5VGFibGVTaXplO1xuXG5pbnRlcmZhY2UgVGh5VGFibGVHcm91cDxUID0gdW5rbm93bj4ge1xuICAgIGlkPzogc3RyaW5nO1xuICAgIGV4cGFuZD86IGJvb2xlYW47XG4gICAgY2hpbGRyZW4/OiBvYmplY3RbXTtcbiAgICBvcmlnaW4/OiBUO1xufVxuXG5jb25zdCB0YWJsZVRoZW1lTWFwID0ge1xuICAgIGRlZmF1bHQ6ICd0YWJsZS1kZWZhdWx0JyxcbiAgICBib3JkZXJlZDogJ3RhYmxlLWJvcmRlcmVkJ1xufTtcblxuY29uc3QgdGFibGVTaXplTWFwID0ge1xuICAgIHNtOiAndGFibGUtc20nXG59O1xuXG5jb25zdCBjdXN0b21UeXBlID0ge1xuICAgIGluZGV4OiAnaW5kZXgnLFxuICAgIGNoZWNrYm94OiAnY2hlY2tib3gnLFxuICAgIHJhZGlvOiAncmFkaW8nLFxuICAgIHN3aXRjaDogJ3N3aXRjaCdcbn07XG5cbmNvbnN0IF9NaXhpbkJhc2U6IENvbnN0cnVjdG9yPFRoeVVuc3Vic2NyaWJlPiAmIHR5cGVvZiBNaXhpbkJhc2UgPSBtaXhpblVuc3Vic2NyaWJlKE1peGluQmFzZSk7XG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3RoeS1ncmlkLHRoeS10YWJsZScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RhYmxlLmNvbXBvbmVudC5odG1sJyxcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgcHJvdmlkZTogVEhZX1RBQkxFX0NPTFVNTl9QQVJFTlRfQ09NUE9ORU5ULFxuICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IFRoeVRhYmxlQ29tcG9uZW50XG4gICAgICAgIH0sXG4gICAgICAgIFVwZGF0ZUhvc3RDbGFzc1NlcnZpY2VcbiAgICBdLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgVGh5VGFibGVDb21wb25lbnQgZXh0ZW5kcyBfTWl4aW5CYXNlIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgRG9DaGVjaywgSVRoeVRhYmxlQ29sdW1uUGFyZW50Q29tcG9uZW50IHtcbiAgICBwdWJsaWMgY3VzdG9tVHlwZSA9IGN1c3RvbVR5cGU7XG5cbiAgICBwdWJsaWMgbW9kZWw6IG9iamVjdFtdID0gW107XG5cbiAgICBwdWJsaWMgZ3JvdXBzOiBUaHlUYWJsZUdyb3VwW10gPSBbXTtcblxuICAgIHB1YmxpYyByb3dLZXkgPSAnX2lkJztcblxuICAgIHB1YmxpYyBncm91cEJ5OiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgbW9kZTogVGh5VGFibGVNb2RlID0gJ2xpc3QnO1xuXG4gICAgcHVibGljIGNvbHVtbnM6IFRoeVRhYmxlQ29sdW1uW10gPSBbXTtcblxuICAgIHB1YmxpYyB0aGVtZTogVGh5VGFibGVUaGVtZSA9ICdkZWZhdWx0JztcblxuICAgIHB1YmxpYyBjbGFzc05hbWUgPSAnJztcblxuICAgIHB1YmxpYyBzaXplOiBUaHlUYWJsZVNpemUgPSAnZGVmYXVsdCc7XG5cbiAgICBwdWJsaWMgcm93Q2xhc3NOYW1lOiBzdHJpbmcgfCBGdW5jdGlvbjtcblxuICAgIHB1YmxpYyBsb2FkaW5nRG9uZSA9IHRydWU7XG5cbiAgICBwdWJsaWMgbG9hZGluZ1RleHQ6IHN0cmluZztcblxuICAgIHB1YmxpYyBlbXB0eU9wdGlvbnM6IFRoeVRhYmxlRW1wdHlPcHRpb25zID0ge307XG5cbiAgICBwdWJsaWMgZHJhZ2dhYmxlID0gZmFsc2U7XG5cbiAgICBwdWJsaWMgc2VsZWN0ZWRSYWRpb1JvdzogYW55ID0gbnVsbDtcblxuICAgIHB1YmxpYyBwYWdpbmF0aW9uOiBUaHlQYWdlID0geyBpbmRleDogMSwgc2l6ZTogMjAsIHRvdGFsOiAwIH07XG5cbiAgICBwdWJsaWMgdHJhY2tCeUZuOiBhbnk7XG5cbiAgICBwdWJsaWMgd2hvbGVSb3dTZWxlY3QgPSBmYWxzZTtcblxuICAgIHByaXZhdGUgX2ZpbHRlcjogYW55ID0gbnVsbDtcblxuICAgIHByaXZhdGUgX2RpZmY6IEl0ZXJhYmxlRGlmZmVyPGFueT47XG5cbiAgICBwcml2YXRlIF9kcmFnZ2FibGVNb2RlbDogYW55O1xuXG4gICAgcHJpdmF0ZSBfbGlzdE9mQ29sdW1uQ29tcG9uZW50czogUXVlcnlMaXN0PFRoeVRhYmxlQ29sdW1uQ29tcG9uZW50PjtcblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9vbGRUaHlDbGFzc05hbWUgPSAnJztcblxuICAgIEBDb250ZW50Q2hpbGQoJ2VtcHR5JykgZW1wdHlUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIEBWaWV3Q2hpbGQoJ3RhYmxlJywgeyBzdGF0aWM6IHRydWUgfSkgdGFibGVFbGVtZW50UmVmOiBFbGVtZW50UmVmPGFueT47XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlNb2RlKHZhbHVlOiBUaHlUYWJsZU1vZGUpIHtcbiAgICAgICAgdGhpcy5tb2RlID0gdmFsdWUgfHwgdGhpcy5tb2RlO1xuICAgIH1cblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IHRoeUdyb3VwQnkodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmdyb3VwQnkgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlSb3dLZXkodmFsdWU6IGFueSkge1xuICAgICAgICB0aGlzLnJvd0tleSA9IHZhbHVlIHx8IHRoaXMucm93S2V5O1xuICAgIH1cblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IHRoeUdyb3Vwcyh2YWx1ZTogYW55KSB7XG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdncm91cCcpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRHcm91cHModmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5TW9kZWwodmFsdWU6IGFueSkge1xuICAgICAgICB0aGlzLm1vZGVsID0gdmFsdWUgfHwgW107XG4gICAgICAgIHRoaXMuX2RpZmYgPSB0aGlzLl9kaWZmZXJzLmZpbmQodGhpcy5tb2RlbCkuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVEYXRhTW9kZWwoKTtcblxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkTW9kZWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IHRoeVRoZW1lKHZhbHVlOiBUaHlUYWJsZVRoZW1lKSB7XG4gICAgICAgIHRoaXMudGhlbWUgPSB2YWx1ZSB8fCB0aGlzLnRoZW1lO1xuICAgICAgICB0aGlzLl9zZXRDbGFzcygpO1xuICAgIH1cblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IHRoeVNpemUodmFsdWU6IFRoeVRhYmxlU2l6ZSkge1xuICAgICAgICB0aGlzLnNpemUgPSB2YWx1ZSB8fCB0aGlzLnNpemU7XG4gICAgICAgIHRoaXMuX3NldENsYXNzKCk7XG4gICAgfVxuICAgIEBJbnB1dCgpXG4gICAgc2V0IHRoeUNsYXNzTmFtZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLmNsYXNzTmFtZS5zcGxpdCgnICcpLmZpbHRlcihhID0+IGEudHJpbSgpKTtcbiAgICAgICAgY29uc3QgaW5kZXg6IG51bWJlciA9IGxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PT0gdGhpcy5fb2xkVGh5Q2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgbGlzdC5zcGxpY2UoaW5kZXgsIDEsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpc3QucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb2xkVGh5Q2xhc3NOYW1lID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY2xhc3NOYW1lID0gbGlzdC5qb2luKCcgJyk7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5Um93Q2xhc3NOYW1lKHZhbHVlOiBzdHJpbmcgfCBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLnJvd0NsYXNzTmFtZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IHRoeUxvYWRpbmdEb25lKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMubG9hZGluZ0RvbmUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlMb2FkaW5nVGV4dCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubG9hZGluZ1RleHQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlFbXB0eU9wdGlvbnModmFsdWU6IFRoeVRhYmxlRW1wdHlPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZW1wdHlPcHRpb25zID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5RHJhZ2dhYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZHJhZ2dhYmxlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ2xpc3QnICYmIHRoaXMuZHJhZ2dhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgbGlzdCBtb2RlIHNvcnRpbmcgaXMgc3VwcG9ydGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlGaWx0ZXIodmFsdWU6IGFueSkge1xuICAgICAgICB0aGlzLl9maWx0ZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlQYWdlSW5kZXgodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnBhZ2luYXRpb24uaW5kZXggPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCB0aHlQYWdlU2l6ZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucGFnaW5hdGlvbi5zaXplID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5UGFnZVRvdGFsKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uLnRvdGFsID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBzZXQgdGh5V2hvbGVSb3dTZWxlY3QodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSArPSAnIHRhYmxlLWhvdmVyJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndob2xlUm93U2VsZWN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQElucHV0KCkgdGh5U2hvd0hlYWRlciA9IHRydWU7XG5cbiAgICBASW5wdXQoJ3RoeVNob3dUb3RhbCcpIHNob3dUb3RhbCA9IGZhbHNlO1xuXG4gICAgQElucHV0KCkgdGh5SW5kZW50ID0gMjA7XG5cbiAgICBASW5wdXQoKSB0aHlDaGlsZHJlbktleSA9ICdjaGlsZHJlbic7XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLnRoeS10YWJsZS1ob3Zlci1kaXNwbGF5LW9wZXJhdGlvbicpXG4gICAgQElucHV0KClcbiAgICB0aHlIb3ZlckRpc3BsYXlPcGVyYXRpb246IGJvb2xlYW47XG5cbiAgICBAT3V0cHV0KCkgdGh5T25Td2l0Y2hDaGFuZ2U6IEV2ZW50RW1pdHRlcjxUaHlTd2l0Y2hFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFRoeVN3aXRjaEV2ZW50PigpO1xuXG4gICAgQE91dHB1dCgpIHRoeU9uUGFnZUNoYW5nZTogRXZlbnRFbWl0dGVyPFBhZ2VDaGFuZ2VkRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxQYWdlQ2hhbmdlZEV2ZW50PigpO1xuXG4gICAgQE91dHB1dCgpIHRoeU9uUGFnZUluZGV4Q2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuXG4gICAgQE91dHB1dCgpIHRoeU9uTXVsdGlTZWxlY3RDaGFuZ2U6IEV2ZW50RW1pdHRlcjxUaHlNdWx0aVNlbGVjdEV2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8VGh5TXVsdGlTZWxlY3RFdmVudD4oKTtcblxuICAgIEBPdXRwdXQoKSB0aHlPblJhZGlvU2VsZWN0Q2hhbmdlOiBFdmVudEVtaXR0ZXI8VGh5UmFkaW9TZWxlY3RFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFRoeVJhZGlvU2VsZWN0RXZlbnQ+KCk7XG5cbiAgICBAT3V0cHV0KCkgdGh5T25EcmFnZ2FibGVDaGFuZ2U6IEV2ZW50RW1pdHRlcjxUaHlUYWJsZURyYWdnYWJsZUV2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8VGh5VGFibGVEcmFnZ2FibGVFdmVudD4oKTtcblxuICAgIEBPdXRwdXQoKSB0aHlPblJvd0NsaWNrOiBFdmVudEVtaXR0ZXI8VGh5VGFibGVSb3dFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFRoeVRhYmxlUm93RXZlbnQ+KCk7XG5cbiAgICBAT3V0cHV0KCkgdGh5T25Sb3dDb250ZXh0TWVudTogRXZlbnRFbWl0dGVyPFRoeVRhYmxlRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxUaHlUYWJsZUV2ZW50PigpO1xuXG4gICAgQENvbnRlbnRDaGlsZCgnZ3JvdXAnLCB7IHN0YXRpYzogdHJ1ZSB9KSBncm91cFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gICAgQENvbnRlbnRDaGlsZHJlbihUaHlUYWJsZUNvbHVtbkNvbXBvbmVudClcbiAgICBzZXQgbGlzdE9mQ29sdW1uQ29tcG9uZW50cyhjb21wb25lbnRzOiBRdWVyeUxpc3Q8VGh5VGFibGVDb2x1bW5Db21wb25lbnQ+KSB7XG4gICAgICAgIGlmIChjb21wb25lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLl9saXN0T2ZDb2x1bW5Db21wb25lbnRzID0gY29tcG9uZW50cztcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVDb2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplRGF0YU1vZGVsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLnRoeS10YWJsZScpIGlzVGFibGVDbGFzcyA9IHRydWU7XG5cbiAgICAvLyDmlbDmja7nmoTmipjlj6DlsZXlvIDnirbmgIFcbiAgICBwdWJsaWMgZXhwYW5kU3RhdHVzTWFwOiBEaWN0aW9uYXJ5PGJvb2xlYW4+ID0ge307XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgICAgIHByaXZhdGUgX2RpZmZlcnM6IEl0ZXJhYmxlRGlmZmVycyxcbiAgICAgICAgcHJpdmF0ZSB2aWV3cG9ydFJ1bGVyOiBWaWV3cG9ydFJ1bGVyLFxuICAgICAgICBwcml2YXRlIHVwZGF0ZUhvc3RDbGFzc1NlcnZpY2U6IFVwZGF0ZUhvc3RDbGFzc1NlcnZpY2UsXG4gICAgICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueVxuICAgICkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9iaW5kVHJhY2tGbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFNlbGVjdGlvbktleXMoc2VsZWN0aW9uczogYW55KSB7XG4gICAgICAgIHJldHVybiBzZWxlY3Rpb25zLm1hcCgoaXRlbTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdudW1iZXInIHx8IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVt0aGlzLnJvd0tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2luaXRpYWxpemVDb2x1bW5zKCkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5fbGlzdE9mQ29sdW1uQ29tcG9uZW50cyA/IHRoaXMuX2xpc3RPZkNvbHVtbkNvbXBvbmVudHMudG9BcnJheSgpIDogW107XG4gICAgICAgIGNvbnN0IGhhc0V4cGFuZCA9IGNvbXBvbmVudHMuc29tZShpdGVtID0+IGl0ZW0uZXhwYW5kID09PSB0cnVlKTtcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gY29tcG9uZW50cy5tYXA8VGh5VGFibGVDb2x1bW4+KChjb21wb25lbnQsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbnMgPSB0aGlzLl9nZXRTZWxlY3Rpb25LZXlzKGNvbXBvbmVudC5zZWxlY3Rpb25zKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAga2V5OiBjb21wb25lbnQua2V5LFxuICAgICAgICAgICAgICAgIG1vZGVsOiBjb21wb25lbnQubW9kZWwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGNvbXBvbmVudC50aXRsZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBjb21wb25lbnQudHlwZSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zOiBzZWxlY3Rpb25zLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBjb21wb25lbnQud2lkdGgsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjb21wb25lbnQuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGhlYWRlckNsYXNzTmFtZTogY29tcG9uZW50LmhlYWRlckNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogY29tcG9uZW50LmRpc2FibGVkLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRUZXh0OiBjb21wb25lbnQuZGVmYXVsdFRleHQsXG4gICAgICAgICAgICAgICAgZXhwYW5kOiBoYXNFeHBhbmQgPyBjb21wb25lbnQuZXhwYW5kIDogaSA9PT0gMCxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogY29tcG9uZW50LmNlbGxUZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICBoZWFkZXJUZW1wbGF0ZVJlZjogY29tcG9uZW50LmhlYWRlclRlbXBsYXRlUmVmXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pbml0aWFsaXplRGF0YU1vZGVsKCkge1xuICAgICAgICB0aGlzLm1vZGVsLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGNvbHVtbiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdGlhbFNlbGVjdGlvbnMocm93LCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2luaXRpYWxDdXN0b21Nb2RlbFZhbHVlKHJvdywgY29sdW1uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pbml0aWFsU2VsZWN0aW9ucyhyb3c6IG9iamVjdCwgY29sdW1uOiBUaHlUYWJsZUNvbHVtbikge1xuICAgICAgICBpZiAoY29sdW1uLnNlbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgIHJvd1tjb2x1bW4ua2V5XSA9IGNvbHVtbi5zZWxlY3Rpb25zLmluY2x1ZGVzKHJvd1t0aGlzLnJvd0tleV0pO1xuICAgICAgICAgICAgICAgIHRoaXMub25Nb2RlbENoYW5nZShyb3csIGNvbHVtbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnNlbGVjdGlvbnMuaW5jbHVkZXMocm93W3RoaXMucm93S2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJhZGlvUm93ID0gcm93O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2luaXRpYWxDdXN0b21Nb2RlbFZhbHVlKHJvdzogb2JqZWN0LCBjb2x1bW46IFRoeVRhYmxlQ29sdW1uKSB7XG4gICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gY3VzdG9tVHlwZS5zd2l0Y2gpIHtcbiAgICAgICAgICAgIHJvd1tjb2x1bW4ua2V5XSA9IGdldChyb3csIGNvbHVtbi5tb2RlbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9yZWZyZXNoQ3VzdG9tTW9kZWxWYWx1ZShyb3c6IGFueSkge1xuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChjb2x1bW4gPT4ge1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbEN1c3RvbU1vZGVsVmFsdWUocm93LCBjb2x1bW4pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9hcHBseURpZmZDaGFuZ2VzKGNoYW5nZXM6IEl0ZXJhYmxlQ2hhbmdlczxhbnk+KSB7XG4gICAgICAgIGlmIChjaGFuZ2VzKSB7XG4gICAgICAgICAgICBjaGFuZ2VzLmZvckVhY2hBZGRlZEl0ZW0oKHJlY29yZDogSXRlcmFibGVDaGFuZ2VSZWNvcmQ8YW55PikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hDdXN0b21Nb2RlbFZhbHVlKHJlY29yZC5pdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfYmluZFRyYWNrRm4oKSB7XG4gICAgICAgIHRoaXMudHJhY2tCeUZuID0gZnVuY3Rpb24odGhpczogYW55LCBpbmRleDogbnVtYmVyLCByb3c6IGFueSk6IGFueSB7XG4gICAgICAgICAgICByZXR1cm4gcm93ICYmIHRoaXMucm93S2V5ID8gcm93W3RoaXMucm93S2V5XSA6IGluZGV4O1xuICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZGVzdHJveUludmFsaWRBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHRoaXMubW9kZWwuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcm93KSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5pbmNsdWRlcygnWyQkY29sdW1uXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb3dba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3NldENsYXNzKGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFmaXJzdCAmJiAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGlmICh0YWJsZVNpemVNYXBbdGhpcy5zaXplXSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lcy5wdXNoKHRhYmxlU2l6ZU1hcFt0aGlzLnNpemVdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFibGVUaGVtZU1hcFt0aGlzLnRoZW1lXSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lcy5wdXNoKHRhYmxlVGhlbWVNYXBbdGhpcy50aGVtZV0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWJsZVNpemVNYXBbdGhpcy5zaXplXSA9PT0gdGFibGVTaXplTWFwWydzbSddICYmIHRhYmxlVGhlbWVNYXBbdGhpcy50aGVtZV0gPT09IHRhYmxlVGhlbWVNYXBbJ2RlZmF1bHQnXSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lcy5wdXNoKCd0YWJsZS1kZWZhdWx0LXNtLWJvdHRvbS1wYWRkaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVIb3N0Q2xhc3NTZXJ2aWNlLnVwZGF0ZUNsYXNzKGNsYXNzTmFtZXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2ZpbHRlck1vZGVsKCkge1xuICAgICAgICBpZiAodGhpcy5tb2RlbCAmJiB0aGlzLm1vZGVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9maWx0ZXIpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVDb2x1bW5TZWxlY3Rpb25zKGtleTogc3RyaW5nLCBzZWxlY3Rpb25zOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29sdW1uID0gdGhpcy5jb2x1bW5zLmZpbmQoaXRlbSA9PiBpdGVtLmtleSA9PT0ga2V5KTtcbiAgICAgICAgY29sdW1uLnNlbGVjdGlvbnMgPSB0aGlzLl9nZXRTZWxlY3Rpb25LZXlzKHNlbGVjdGlvbnMpO1xuICAgICAgICB0aGlzLm1vZGVsLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxTZWxlY3Rpb25zKHJvdywgY29sdW1uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGlzVGVtcGxhdGVSZWYocmVmOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHJlZiBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNb2RlbFZhbHVlKHJvdzogYW55LCBwYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGdldChyb3csIHBhdGgpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXJSb3dDbGFzc05hbWUocm93OiBhbnksIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJvd0NsYXNzTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzU3RyaW5nKHRoaXMucm93Q2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93Q2xhc3NOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnJvd0NsYXNzTmFtZSBhcyBGdW5jdGlvbikocm93LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb25Nb2RlbENoYW5nZShyb3c6IGFueSwgY29sdW1uOiBUaHlUYWJsZUNvbHVtbikge1xuICAgICAgICBpZiAoY29sdW1uLm1vZGVsKSB7XG4gICAgICAgICAgICBzZXQocm93LCBjb2x1bW4ubW9kZWwsIHJvd1tjb2x1bW4ua2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb25TdG9wUHJvcGFnYXRpb24oZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLndob2xlUm93U2VsZWN0KSB7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvblBhZ2VDaGFuZ2UoZXZlbnQ6IFBhZ2VDaGFuZ2VkRXZlbnQpIHtcbiAgICAgICAgdGhpcy50aHlPblBhZ2VDaGFuZ2UuZW1pdChldmVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uUGFnZUluZGV4Q2hhbmdlKGV2ZW50OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy50aHlPblBhZ2VJbmRleENoYW5nZS5lbWl0KGV2ZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25DaGVja2JveENoYW5nZShyb3c6IGFueSwgY29sdW1uOiBUaHlUYWJsZUNvbHVtbikge1xuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2Uocm93LCBjb2x1bW4pO1xuICAgICAgICB0aGlzLm9uTXVsdGlTZWxlY3RDaGFuZ2UobnVsbCwgcm93LCBjb2x1bW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbk11bHRpU2VsZWN0Q2hhbmdlKGV2ZW50OiBFdmVudCwgcm93OiBhbnksIGNvbHVtbjogVGh5VGFibGVDb2x1bW4pIHtcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMubW9kZWwuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW1bY29sdW1uLmtleV07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBtdWx0aVNlbGVjdEV2ZW50OiBUaHlNdWx0aVNlbGVjdEV2ZW50ID0ge1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgcm93OiByb3csXG4gICAgICAgICAgICByb3dzOiByb3dzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGh5T25NdWx0aVNlbGVjdENoYW5nZS5lbWl0KG11bHRpU2VsZWN0RXZlbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblJhZGlvU2VsZWN0Q2hhbmdlKGV2ZW50OiBFdmVudCwgcm93OiBhbnkpIHtcbiAgICAgICAgY29uc3QgcmFkaW9TZWxlY3RFdmVudDogVGh5UmFkaW9TZWxlY3RFdmVudCA9IHtcbiAgICAgICAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgICAgICAgIHJvdzogcm93XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGh5T25SYWRpb1NlbGVjdENoYW5nZS5lbWl0KHJhZGlvU2VsZWN0RXZlbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblN3aXRjaENoYW5nZShldmVudDogRXZlbnQsIHJvdzogYW55LCBjb2x1bW46IGFueSkge1xuICAgICAgICBjb25zdCBzd2l0Y2hFdmVudDogVGh5U3dpdGNoRXZlbnQgPSB7XG4gICAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgICAgICByb3c6IHJvdyxcbiAgICAgICAgICAgIHJlZnJlc2g6ICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSB8fCByb3c7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlW2NvbHVtbi5rZXldID0gZ2V0KHZhbHVlLCBjb2x1bW4ubW9kZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRoeU9uU3dpdGNoQ2hhbmdlLmVtaXQoc3dpdGNoRXZlbnQpO1xuICAgIH1cblxuICAgIHNob3dFeHBhbmQocm93OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHJvd1t0aGlzLnRoeUNoaWxkcmVuS2V5XSAmJiByb3dbdGhpcy50aHlDaGlsZHJlbktleV0ubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICBpc0V4cGFuZGVkKHJvdzogYW55KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cGFuZFN0YXR1c01hcFtyb3dbdGhpcy5yb3dLZXldXTtcbiAgICB9XG5cbiAgICBpY29uSW5kZW50Q29tcHV0ZWQobGV2ZWw6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAndHJlZScpIHtcbiAgICAgICAgICAgIHJldHVybiBsZXZlbCAqIHRoaXMudGh5SW5kZW50IC0gMTA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0ZEluZGVudENvbXB1dGVkKGxldmVsOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IGAkeyhsZXZlbCArIDEpICogdGhpcy50aHlJbmRlbnQgLSAxMH1weGBcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBleHBhbmRDaGlsZHJlbihldmVudDogRXZlbnQsIHJvdzogYW55KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGVkKHJvdykpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kU3RhdHVzTWFwW3Jvd1t0aGlzLnJvd0tleV1dID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZFN0YXR1c01hcFtyb3dbdGhpcy5yb3dLZXldXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkRyYWdTdGFydGVkKCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpZXcgPSB0aGlzLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Nkay1kcmFnLXByZXZpZXcnKVswXTtcbiAgICAgICAgICAgIGlmIChwcmV2aWV3KSB7XG4gICAgICAgICAgICAgICAgcHJldmlldy5jbGFzc0xpc3QuYWRkKCd0aHktdGFibGUtZHJhZy1wcmV2aWV3Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uRHJhZ0Ryb3BwZWQoZXZlbnQ6IENka0RyYWdEcm9wPHVua25vd24+KSB7XG4gICAgICAgIGNvbnN0IGRyYWdFdmVudDogVGh5VGFibGVEcmFnZ2FibGVFdmVudCA9IHtcbiAgICAgICAgICAgIG1vZGVsOiBldmVudC5pdGVtLFxuICAgICAgICAgICAgbW9kZWxzOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgb2xkSW5kZXg6IGV2ZW50LnByZXZpb3VzSW5kZXgsXG4gICAgICAgICAgICBuZXdJbmRleDogZXZlbnQuY3VycmVudEluZGV4XG4gICAgICAgIH07XG4gICAgICAgIG1vdmVJdGVtSW5BcnJheSh0aGlzLm1vZGVsLCBldmVudC5wcmV2aW91c0luZGV4LCBldmVudC5jdXJyZW50SW5kZXgpO1xuICAgICAgICB0aGlzLnRoeU9uRHJhZ2dhYmxlQ2hhbmdlLmVtaXQoZHJhZ0V2ZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25Sb3dDbGljayhldmVudDogRXZlbnQsIHJvdzogYW55KSB7XG4gICAgICAgIGlmICh0aGlzLndob2xlUm93U2VsZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW4gPSB0aGlzLmNvbHVtbnMuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS50eXBlID09PSBjdXN0b21UeXBlLmNoZWNrYm94IHx8IGl0ZW0udHlwZSA9PT0gY3VzdG9tVHlwZS5yYWRpbztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFjb2x1bW4uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09IGN1c3RvbVR5cGUuY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93W2NvbHVtbi5rZXldID0gIXJvd1tjb2x1bW4ua2V5XTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHJvdywgY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk11bHRpU2VsZWN0Q2hhbmdlKGV2ZW50LCByb3csIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gY3VzdG9tVHlwZS5yYWRpbykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmFkaW9Sb3cgPSByb3c7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25SYWRpb1NlbGVjdENoYW5nZShldmVudCwgcm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm93RXZlbnQgPSB7XG4gICAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgICAgICByb3c6IHJvd1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRoeU9uUm93Q2xpY2suZW1pdChyb3dFdmVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uUm93Q29udGV4dE1lbnUoZXZlbnQ6IEV2ZW50LCByb3c6IGFueSkge1xuICAgICAgICBjb25zdCBjb250ZXh0TWVudUV2ZW50OiBUaHlUYWJsZUV2ZW50ID0ge1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgcm93OiByb3dcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50aHlPblJvd0NvbnRleHRNZW51LmVtaXQoY29udGV4dE1lbnVFdmVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIGRyYWdnYWJsZVN0b3BQcm9wYWdhdGlvbihldmVudDogRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRyYWdnYWJsZSkge1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9yZWZyZXNoQ29sdW1ucygpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHRoaXMuX2xpc3RPZkNvbHVtbkNvbXBvbmVudHMgPyB0aGlzLl9saXN0T2ZDb2x1bW5Db21wb25lbnRzLnRvQXJyYXkoKSA6IFtdO1xuICAgICAgICBjb25zdCBfY29sdW1ucyA9IGNvbXBvbmVudHMubWFwKGNvbXBvbmVudCA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBjb21wb25lbnQud2lkdGgsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjb21wb25lbnQuY2xhc3NOYW1lXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihuLCBfY29sdW1uc1tpXSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRHcm91cHMob3JpZ2luR3JvdXBzOiBhbnkpIHtcbiAgICAgICAgY29uc3QgY29sbGFwc2VkSWRzID0gdGhpcy5ncm91cHMuZmlsdGVyKGdyb3VwID0+ICFncm91cC5leHBhbmQpLm1hcChncm91cCA9PiBncm91cC5pZCk7XG4gICAgICAgIHRoaXMuZ3JvdXBzID0gW107XG4gICAgICAgIG9yaWdpbkdyb3Vwcy5mb3JFYWNoKChvcmlnaW46IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXA6IFRoeVRhYmxlR3JvdXAgPSB7IGlkOiBvcmlnaW5bdGhpcy5yb3dLZXldLCBjaGlsZHJlbjogW10sIG9yaWdpbiB9O1xuICAgICAgICAgICAgZ3JvdXAuZXhwYW5kID0gIWNvbGxhcHNlZElkcy5pbmNsdWRlcyhncm91cC5pZCk7XG4gICAgICAgICAgICB0aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZE1vZGVsKCkge1xuICAgICAgICBjb25zdCBncm91cHNNYXAgPSBrZXlCeSh0aGlzLmdyb3VwcywgJ2lkJyk7XG4gICAgICAgIHRoaXMubW9kZWwuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNNYXBbcm93W3RoaXMuZ3JvdXBCeV1dO1xuICAgICAgICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXAuY2hpbGRyZW4ucHVzaChyb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZXhwYW5kR3JvdXAoZ3JvdXA6IFRoeVRhYmxlR3JvdXApIHtcbiAgICAgICAgZ3JvdXAuZXhwYW5kID0gIWdyb3VwLmV4cGFuZDtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVIb3N0Q2xhc3NTZXJ2aWNlLmluaXRpYWxpemVFbGVtZW50KHRoaXMudGFibGVFbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICB0aGlzLl9zZXRDbGFzcyh0cnVlKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICAgICAgbWVyZ2UodGhpcy52aWV3cG9ydFJ1bGVyLmNoYW5nZSgyMDApLCBvZihudWxsKS5waXBlKGRlbGF5KDIwMCkpKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMubmdVbnN1YnNjcmliZSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVmcmVzaENvbHVtbnMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKHNpbXBsZUNoYW5nczogU2ltcGxlQ2hhbmdlcykge1xuICAgICAgICBjb25zdCBtb2RlQ2hhbmdlID0gc2ltcGxlQ2hhbmdzLnRoeU1vZGU7XG4gICAgICAgIGNvbnN0IHRoeUdyb3Vwc0NoYW5nZSA9IHNpbXBsZUNoYW5ncy50aHlHcm91cHM7XG4gICAgICAgIGNvbnN0IGlzR3JvdXBNb2RlID0gbW9kZUNoYW5nZSAmJiBtb2RlQ2hhbmdlLmN1cnJlbnRWYWx1ZSA9PT0gJ2dyb3VwJztcbiAgICAgICAgaWYgKGlzR3JvdXBNb2RlICYmIHRoeUdyb3Vwc0NoYW5nZSAmJiB0aHlHcm91cHNDaGFuZ2UuZmlyc3RDaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRHcm91cHModGh5R3JvdXBzQ2hhbmdlLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkTW9kZWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5nRG9DaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RpZmYpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLl9kaWZmLmRpZmYodGhpcy5tb2RlbCk7XG4gICAgICAgICAgICB0aGlzLl9hcHBseURpZmZDaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLm5nT25EZXN0cm95KCk7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lJbnZhbGlkQXR0cmlidXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFRoeUdyaWRDb21wb25lbnQgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBUaHlUYWJsZUNvbXBvbmVudFxuICovXG5leHBvcnQgY29uc3QgVGh5R3JpZENvbXBvbmVudCA9IFRoeVRhYmxlQ29tcG9uZW50O1xuIl19