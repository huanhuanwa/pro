{"version":3,"file":"ngx-tethys-back-top.umd.js","sources":["../../src/back-top/back-top.component.ts","../../src/back-top/back-top.module.ts","../../src/back-top/ngx-tethys-back-top.ts"],"names":["EventEmitter","Subject","fromEvent","throttleTime","takeUntil","Component","ChangeDetectionStrategy","ViewEncapsulation","fadeMotion","Inject","DOCUMENT","ThyScrollService","Platform","ChangeDetectorRef","NgZone","HostBinding","Input","Output","NgModule","CommonModule","ThyIconModule"],"mappings":"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","sourcesContent":["import {\n    Component,\n    OnInit,\n    ChangeDetectionStrategy,\n    ViewEncapsulation,\n    Input,\n    TemplateRef,\n    EventEmitter,\n    Output,\n    HostBinding,\n    NgZone,\n    ChangeDetectorRef,\n    OnDestroy,\n    OnChanges,\n    Inject\n} from '@angular/core';\nimport { Subject, fromEvent } from 'rxjs';\nimport { Platform } from '@angular/cdk/platform';\nimport { throttleTime, takeUntil } from 'rxjs/operators';\nimport { DOCUMENT } from '@angular/common';\nimport { fadeMotion, ThyScrollService } from 'ngx-tethys/core';\n\n@Component({\n    selector: 'thy-back-top,[thyBackTop]',\n    templateUrl: './back-top.component.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    animations: [fadeMotion]\n})\nexport class ThyBackTopComponent implements OnInit, OnDestroy, OnChanges {\n    @HostBinding('class.thy-back-top-container') classNames = true;\n\n    @Input() thyTemplate?: TemplateRef<void>;\n\n    @Input() thyVisibilityHeight = 400;\n\n    @Input() thyContainer?: string | HTMLElement;\n\n    @Output() readonly thyClick: EventEmitter<boolean> = new EventEmitter();\n\n    @Output() public visibleChange: EventEmitter<boolean> = new EventEmitter();\n\n    public visible = false;\n\n    private scrollListenerDestroy$ = new Subject();\n\n    private target: HTMLElement | null = null;\n\n    constructor(\n        @Inject(DOCUMENT) private doc: any,\n        private thyScrollService: ThyScrollService,\n        private platform: Platform,\n        private cdr: ChangeDetectorRef,\n        private zone: NgZone\n    ) {}\n\n    ngOnInit(): void {\n        this.registerScrollEvent();\n    }\n\n    clickBackTop(): void {\n        this.thyScrollService.scrollTo(this.getTarget(), 0);\n        this.thyClick.emit(true);\n    }\n\n    private getTarget(): HTMLElement | Window {\n        return this.target || window;\n    }\n\n    private handleScroll(): void {\n        if (this.visible === this.thyScrollService.getScroll(this.getTarget()) > this.thyVisibilityHeight) {\n            return;\n        }\n        this.visible = !this.visible;\n        this.cdr.detectChanges();\n        this.zone.run(() => {\n            this.visibleChange.emit(this.visible);\n        });\n    }\n\n    private registerScrollEvent(): void {\n        if (!this.platform.isBrowser) {\n            return;\n        }\n        this.scrollListenerDestroy$.next();\n        this.handleScroll();\n        this.zone.runOutsideAngular(() => {\n            fromEvent(this.getTarget(), 'scroll')\n                .pipe(throttleTime(50), takeUntil(this.scrollListenerDestroy$))\n                .subscribe(() => this.handleScroll());\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.scrollListenerDestroy$.next();\n        this.scrollListenerDestroy$.complete();\n    }\n\n    ngOnChanges(changes: any): void {\n        const { thyContainer } = changes;\n        if (thyContainer) {\n            this.target = typeof this.thyContainer === 'string' ? this.doc.querySelector(this.thyContainer) : this.thyContainer;\n            this.registerScrollEvent();\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThyIconModule } from 'ngx-tethys/icon';\nimport { ThyBackTopComponent } from './back-top.component';\n\n@NgModule({\n    declarations: [ThyBackTopComponent],\n    imports: [CommonModule, ThyIconModule],\n    exports: [ThyBackTopComponent]\n})\nexport class ThyBackTopModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}