{"version":3,"file":"ngx-tethys-anchor.umd.js","sources":["../../src/anchor/anchor.component.ts","../../src/anchor/anchor-link.component.ts","../../src/anchor/anchor.module.ts","../../src/anchor/ngx-tethys-anchor.ts"],"sourcesContent":["import { Platform } from '@angular/cdk/platform';\nimport {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Output,\n    Renderer2,\n    SimpleChanges,\n    ViewChild,\n    ViewEncapsulation\n} from '@angular/core';\nimport { fromEvent, Subject } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\n\nimport { ThyAnchorLinkComponent } from './anchor-link.component';\nimport { getOffset } from 'ngx-tethys/util';\nimport { ThyScrollService } from 'ngx-tethys/core';\nimport { DOCUMENT } from '@angular/common';\n\ninterface Section {\n    linkComponent: ThyAnchorLinkComponent;\n    top: number;\n}\n\nconst sharpMatcherRegx = /#([^#]+)$/;\n\n@Component({\n    selector: 'thy-anchor',\n    exportAs: 'thyAnchor',\n    preserveWhitespaces: false,\n    template: `\n        <thy-affix *ngIf=\"thyAffix; else content\" [thyOffsetTop]=\"thyOffsetTop\" [thyContainer]=\"container\">\n            <ng-template [ngTemplateOutlet]=\"content\"></ng-template>\n        </thy-affix>\n        <ng-template #content>\n            <div class=\"thy-anchor-wrapper\" [ngStyle]=\"wrapperStyle\">\n                <div class=\"thy-anchor\">\n                    <div class=\"thy-anchor-ink\">\n                        <div class=\"thy-anchor-ink-full\" #ink></div>\n                    </div>\n                    <ng-content></ng-content>\n                </div>\n            </div>\n        </ng-template>\n    `,\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ThyAnchorComponent implements OnDestroy, AfterViewInit, OnChanges {\n    @ViewChild('ink') private ink!: ElementRef;\n\n    @Input() thyAffix = true;\n\n    @Input()\n    thyBounds = 5;\n\n    @Input()\n    thyOffsetTop?: number = undefined;\n\n    @Input() thyContainer?: string | HTMLElement;\n    @Input() thyTarget: string | HTMLElement = '';\n\n    @Output() readonly thyClick = new EventEmitter<ThyAnchorLinkComponent>();\n    @Output() readonly thyScroll = new EventEmitter<ThyAnchorLinkComponent>();\n\n    visible = false;\n    wrapperStyle = { 'max-height': '100vh' };\n\n    container?: HTMLElement | Window;\n\n    private links: ThyAnchorLinkComponent[] = [];\n    private animating = false;\n    private destroy$ = new Subject();\n    private handleScrollTimeoutID = -1;\n\n    constructor(\n        @Inject(DOCUMENT) private document: any,\n        private cdr: ChangeDetectorRef,\n        private platform: Platform,\n        private zone: NgZone,\n        private renderer: Renderer2,\n        private scrollService: ThyScrollService\n    ) {}\n\n    registerLink(link: ThyAnchorLinkComponent): void {\n        this.links.push(link);\n    }\n\n    unregisterLink(link: ThyAnchorLinkComponent): void {\n        this.links.splice(this.links.indexOf(link), 1);\n    }\n\n    private getContainer(): HTMLElement | Window {\n        return this.container || window;\n    }\n\n    ngAfterViewInit(): void {\n        this.registerScrollEvent();\n    }\n\n    ngOnDestroy(): void {\n        clearTimeout(this.handleScrollTimeoutID);\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n\n    private registerScrollEvent(): void {\n        if (!this.platform.isBrowser) {\n            return;\n        }\n        this.destroy$.next();\n        this.zone.runOutsideAngular(() => {\n            fromEvent(this.getContainer(), 'scroll')\n                .pipe(throttleTime(50), takeUntil(this.destroy$))\n                .subscribe(() => this.handleScroll());\n        });\n        // Browser would maintain the scrolling position when refreshing.\n        // So we have to delay calculation in avoid of getting a incorrect result.\n        this.handleScrollTimeoutID = setTimeout(() => this.handleScroll());\n    }\n\n    handleScroll(): void {\n        if (typeof document === 'undefined' || this.animating) {\n            return;\n        }\n        const container: HTMLElement = this.container instanceof HTMLElement ? this.container : this.document;\n\n        const sections: Section[] = [];\n        const scope = (this.thyOffsetTop || 0) + this.thyBounds;\n        this.links.forEach(linkComponent => {\n            const sharpLinkMatch = sharpMatcherRegx.exec(linkComponent.thyHref.toString());\n            if (!sharpLinkMatch) {\n                return;\n            }\n            const target = container.querySelector(`#${sharpLinkMatch[1]}`) as HTMLElement;\n            if (target) {\n                const top = getOffset(target, this.getContainer()).top;\n                if (top < scope) {\n                    sections.push({\n                        top,\n                        linkComponent\n                    });\n                }\n            }\n        });\n\n        this.visible = !!sections.length;\n        if (!this.visible) {\n            this.clearActive();\n            this.cdr.detectChanges();\n        } else {\n            const maxSection = sections.reduce((prev, curr) => (curr.top > prev.top ? curr : prev));\n            this.handleActive(maxSection.linkComponent);\n        }\n        this.setVisible();\n    }\n\n    private clearActive(): void {\n        this.links.forEach(i => {\n            i.unsetActive();\n        });\n    }\n\n    private handleActive(linkComponent: ThyAnchorLinkComponent): void {\n        this.clearActive();\n        linkComponent.setActive();\n        const linkNode = linkComponent.getLinkTitleElement();\n\n        this.ink.nativeElement.style.top = `${linkNode.offsetTop}px`;\n        this.ink.nativeElement.style.height = `${linkNode.clientHeight}px`;\n        this.visible = true;\n        this.setVisible();\n        this.thyScroll.emit(linkComponent);\n    }\n\n    private setVisible(): void {\n        const visible = this.visible;\n        const visibleClassname = 'visible';\n        if (this.ink) {\n            if (visible) {\n                this.renderer.addClass(this.ink.nativeElement, visibleClassname);\n            } else {\n                this.renderer.removeClass(this.ink.nativeElement, visibleClassname);\n            }\n        }\n    }\n\n    handleScrollTo(linkComponent: ThyAnchorLinkComponent): void {\n        const container: HTMLElement = this.container instanceof HTMLElement ? this.container : this.document;\n        const linkElement: HTMLElement = container.querySelector(linkComponent.thyHref);\n        if (!linkElement) {\n            return;\n        }\n\n        this.animating = true;\n        const containerScrollTop = this.scrollService.getScroll(this.getContainer());\n        const elementOffsetTop = getOffset(linkElement, this.getContainer()).top;\n        const targetScrollTop = containerScrollTop + elementOffsetTop - (this.thyOffsetTop || 0);\n        this.scrollService.scrollTo(this.getContainer(), targetScrollTop, undefined, () => {\n            this.animating = false;\n        });\n        this.handleActive(linkComponent);\n        this.thyClick.emit(linkComponent);\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        const { thyOffsetTop, thyContainer } = changes;\n        if (thyOffsetTop) {\n            this.wrapperStyle = {\n                'max-height': `calc(100vh - ${this.thyOffsetTop}px)`\n            };\n        }\n        if (thyContainer && this.thyContainer) {\n            const container = this.thyContainer || this.thyTarget;\n            this.container = typeof container === 'string' ? this.document.querySelector(container) : container;\n            this.registerScrollEvent();\n        }\n    }\n}\n","import { Platform } from '@angular/cdk/platform';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    ElementRef,\n    Input,\n    OnDestroy,\n    OnInit,\n    Renderer2,\n    TemplateRef,\n    ViewChild,\n    ViewEncapsulation\n} from '@angular/core';\n\nimport { ThyAnchorComponent } from './anchor.component';\n\n@Component({\n    selector: 'thy-link',\n    exportAs: 'thyLink',\n    preserveWhitespaces: false,\n    template: `\n        <a #linkTitle (click)=\"goToClick($event)\" href=\"{{ thyHref }}\" class=\"thy-anchor-link-title\" title=\"{{ title }}\">\n            <span *ngIf=\"title; else titleTemplate || thyTemplate\">{{ title }}</span>\n        </a>\n        <ng-content></ng-content>\n    `,\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ThyAnchorLinkComponent implements OnInit, OnDestroy {\n    @Input() thyHref = '#';\n\n    title: string | null = '';\n    titleTemplate?: TemplateRef<any>;\n\n    @Input()\n    set thyTitle(value: string | TemplateRef<void>) {\n        if (value instanceof TemplateRef) {\n            this.title = null;\n            this.titleTemplate = value;\n        } else {\n            this.title = value;\n        }\n    }\n\n    @ContentChild('thyTemplate') thyTemplate!: TemplateRef<void>;\n    @ViewChild('linkTitle', { static: true }) linkTitle!: ElementRef<HTMLAnchorElement>;\n\n    constructor(\n        public elementRef: ElementRef,\n        private anchorComponent: ThyAnchorComponent,\n        private platform: Platform,\n        private renderer: Renderer2\n    ) {\n        this.renderer.addClass(elementRef.nativeElement, 'thy-anchor-link');\n    }\n\n    ngOnInit(): void {\n        this.anchorComponent.registerLink(this);\n    }\n\n    getLinkTitleElement(): HTMLAnchorElement {\n        return this.linkTitle.nativeElement;\n    }\n\n    setActive(): void {\n        this.renderer.addClass(this.elementRef.nativeElement, 'thy-anchor-link-active');\n    }\n\n    unsetActive(): void {\n        this.renderer.removeClass(this.elementRef.nativeElement, 'thy-anchor-link-active');\n    }\n\n    goToClick(e: Event): void {\n        e.preventDefault();\n        e.stopPropagation();\n        if (this.platform.isBrowser) {\n            this.anchorComponent.handleScrollTo(this);\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.anchorComponent.unregisterLink(this);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PlatformModule } from '@angular/cdk/platform';\nimport { ThyAnchorComponent } from './anchor.component';\nimport { ThyAnchorLinkComponent } from './anchor-link.component';\nimport { ThyAffixModule } from 'ngx-tethys/affix';\n\n@NgModule({\n    declarations: [ThyAnchorComponent, ThyAnchorLinkComponent],\n    exports: [ThyAnchorComponent, ThyAnchorLinkComponent],\n    imports: [CommonModule, PlatformModule, ThyAffixModule]\n})\nexport class ThyAnchorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["EventEmitter","Subject","fromEvent","throttleTime","takeUntil","getOffset","Component","ViewEncapsulation","ChangeDetectionStrategy","Inject","DOCUMENT","ChangeDetectorRef","Platform","NgZone","Renderer2","ThyScrollService","ViewChild","Input","Output","TemplateRef","ElementRef","ContentChild","NgModule","CommonModule","PlatformModule","ThyAffixModule"],"mappings":";;;;;;IAgCA,IAAM,gBAAgB,GAAG,WAAW,CAAC;;QAmDjC,4BAC8B,QAAa,EAC/B,GAAsB,EACtB,QAAkB,EAClB,IAAY,EACZ,QAAmB,EACnB,aAA+B;YALb,aAAQ,GAAR,QAAQ,CAAK;YAC/B,QAAG,GAAH,GAAG,CAAmB;YACtB,aAAQ,GAAR,QAAQ,CAAU;YAClB,SAAI,GAAJ,IAAI,CAAQ;YACZ,aAAQ,GAAR,QAAQ,CAAW;YACnB,kBAAa,GAAb,aAAa,CAAkB;YA9BlC,aAAQ,GAAG,IAAI,CAAC;YAGzB,cAAS,GAAG,CAAC,CAAC;YAGd,iBAAY,GAAY,SAAS,CAAC;YAGzB,cAAS,GAAyB,EAAE,CAAC;YAE3B,aAAQ,GAAG,IAAIA,iBAAY,EAA0B,CAAC;YACtD,cAAS,GAAG,IAAIA,iBAAY,EAA0B,CAAC;YAE1E,YAAO,GAAG,KAAK,CAAC;YAChB,iBAAY,GAAG,EAAE,YAAY,EAAE,OAAO,EAAE,CAAC;YAIjC,UAAK,GAA6B,EAAE,CAAC;YACrC,cAAS,GAAG,KAAK,CAAC;YAClB,aAAQ,GAAG,IAAIC,YAAO,EAAE,CAAC;YACzB,0BAAqB,GAAG,CAAC,CAAC,CAAC;SAS/B;QAEJ,yCAAY,GAAZ,UAAa,IAA4B;YACrC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACzB;QAED,2CAAc,GAAd,UAAe,IAA4B;YACvC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;SAClD;QAEO,yCAAY,GAAZ;YACJ,OAAO,IAAI,CAAC,SAAS,IAAI,MAAM,CAAC;SACnC;QAED,4CAAe,GAAf;YACI,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC9B;QAED,wCAAW,GAAX;YACI,YAAY,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;YACzC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACrB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;SAC5B;QAEO,gDAAmB,GAAnB;YAAA,iBAaP;YAZG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;gBAC1B,OAAO;aACV;YACD,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC;gBACxBC,cAAS,CAAC,KAAI,CAAC,YAAY,EAAE,EAAE,QAAQ,CAAC;qBACnC,IAAI,CAACC,sBAAY,CAAC,EAAE,CAAC,EAAEC,mBAAS,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;qBAChD,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,YAAY,EAAE,GAAA,CAAC,CAAC;aAC7C,CAAC,CAAC;;;YAGH,IAAI,CAAC,qBAAqB,GAAG,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,YAAY,EAAE,GAAA,CAAC,CAAC;SACtE;QAED,yCAAY,GAAZ;YAAA,iBAkCC;YAjCG,IAAI,OAAO,QAAQ,KAAK,WAAW,IAAI,IAAI,CAAC,SAAS,EAAE;gBACnD,OAAO;aACV;YACD,IAAM,SAAS,GAAgB,IAAI,CAAC,SAAS,YAAY,WAAW,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;YAEtG,IAAM,QAAQ,GAAc,EAAE,CAAC;YAC/B,IAAM,KAAK,GAAG,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;YACxD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,aAAa;gBAC5B,IAAM,cAAc,GAAG,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;gBAC/E,IAAI,CAAC,cAAc,EAAE;oBACjB,OAAO;iBACV;gBACD,IAAM,MAAM,GAAG,SAAS,CAAC,aAAa,CAAC,MAAI,cAAc,CAAC,CAAC,CAAG,CAAgB,CAAC;gBAC/E,IAAI,MAAM,EAAE;oBACR,IAAM,GAAG,GAAGC,cAAS,CAAC,MAAM,EAAE,KAAI,CAAC,YAAY,EAAE,CAAC,CAAC,GAAG,CAAC;oBACvD,IAAI,GAAG,GAAG,KAAK,EAAE;wBACb,QAAQ,CAAC,IAAI,CAAC;4BACV,GAAG,KAAA;4BACH,aAAa,eAAA;yBAChB,CAAC,CAAC;qBACN;iBACJ;aACJ,CAAC,CAAC;YAEH,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACf,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;aAC5B;iBAAM;gBACH,IAAM,UAAU,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,IAAI,IAAK,QAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,IAAI,IAAC,CAAC,CAAC;gBACxF,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;aAC/C;YACD,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;QAEO,wCAAW,GAAX;YACJ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;gBAChB,CAAC,CAAC,WAAW,EAAE,CAAC;aACnB,CAAC,CAAC;SACN;QAEO,yCAAY,GAAZ,UAAa,aAAqC;YACtD,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,aAAa,CAAC,SAAS,EAAE,CAAC;YAC1B,IAAM,QAAQ,GAAG,aAAa,CAAC,mBAAmB,EAAE,CAAC;YAErD,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,GAAM,QAAQ,CAAC,SAAS,OAAI,CAAC;YAC7D,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAM,QAAQ,CAAC,YAAY,OAAI,CAAC;YACnE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACtC;QAEO,uCAAU,GAAV;YACJ,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YAC7B,IAAM,gBAAgB,GAAG,SAAS,CAAC;YACnC,IAAI,IAAI,CAAC,GAAG,EAAE;gBACV,IAAI,OAAO,EAAE;oBACT,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;iBACpE;qBAAM;oBACH,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;iBACvE;aACJ;SACJ;QAED,2CAAc,GAAd,UAAe,aAAqC;YAApD,iBAgBC;YAfG,IAAM,SAAS,GAAgB,IAAI,CAAC,SAAS,YAAY,WAAW,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;YACtG,IAAM,WAAW,GAAgB,SAAS,CAAC,aAAa,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YAChF,IAAI,CAAC,WAAW,EAAE;gBACd,OAAO;aACV;YAED,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAM,kBAAkB,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;YAC7E,IAAM,gBAAgB,GAAGA,cAAS,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,GAAG,CAAC;YACzE,IAAM,eAAe,GAAG,kBAAkB,GAAG,gBAAgB,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC;YACzF,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,eAAe,EAAE,SAAS,EAAE;gBACzE,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;aAC1B,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;YACjC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACrC;QAED,wCAAW,GAAX,UAAY,OAAsB;YACtB,IAAA,YAAY,GAAmB,OAAO,aAA1B,EAAE,YAAY,GAAK,OAAO,aAAZ,CAAa;YAC/C,IAAI,YAAY,EAAE;gBACd,IAAI,CAAC,YAAY,GAAG;oBAChB,YAAY,EAAE,kBAAgB,IAAI,CAAC,YAAY,QAAK;iBACvD,CAAC;aACL;YACD,IAAI,YAAY,IAAI,IAAI,CAAC,YAAY,EAAE;gBACnC,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC;gBACtD,IAAI,CAAC,SAAS,GAAG,OAAO,SAAS,KAAK,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC;gBACpG,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC9B;SACJ;;;;gBA/LJC,cAAS,SAAC;oBACP,QAAQ,EAAE,YAAY;oBACtB,QAAQ,EAAE,WAAW;oBACrB,mBAAmB,EAAE,KAAK;oBAC1B,QAAQ,EAAE,2nBAcT;oBACD,aAAa,EAAEC,sBAAiB,CAAC,IAAI;oBACrC,eAAe,EAAEC,4BAAuB,CAAC,MAAM;iBAClD;;;gDA6BQC,WAAM,SAACC,eAAQ;gBAhFpBC,sBAAiB;gBAJZC,iBAAQ;gBAUbC,WAAM;gBAINC,cAAS;gBAUJC,uBAAgB;;;sBAiCpBC,cAAS,SAAC,KAAK;2BAEfC,UAAK;4BAELA,UAAK;+BAGLA,UAAK;+BAGLA,UAAK;4BACLA,UAAK;2BAELC,WAAM;4BACNA,WAAM;;;;QCtBP,gCACW,UAAsB,EACrB,eAAmC,EACnC,QAAkB,EAClB,QAAmB;YAHpB,eAAU,GAAV,UAAU,CAAY;YACrB,oBAAe,GAAf,eAAe,CAAoB;YACnC,aAAQ,GAAR,QAAQ,CAAU;YAClB,aAAQ,GAAR,QAAQ,CAAW;YAtBtB,YAAO,GAAG,GAAG,CAAC;YAEvB,UAAK,GAAkB,EAAE,CAAC;YAsBtB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,aAAa,EAAE,iBAAiB,CAAC,CAAC;SACvE;QApBD,sBACI,4CAAQ;iBADZ,UACa,KAAiC;gBAC1C,IAAI,KAAK,YAAYC,gBAAW,EAAE;oBAC9B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;oBAClB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;iBAC9B;qBAAM;oBACH,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;iBACtB;aACJ;;;WAAA;QAcD,yCAAQ,GAAR;YACI,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SAC3C;QAED,oDAAmB,GAAnB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC;SACvC;QAED,0CAAS,GAAT;YACI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,wBAAwB,CAAC,CAAC;SACnF;QAED,4CAAW,GAAX;YACI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,wBAAwB,CAAC,CAAC;SACtF;QAED,0CAAS,GAAT,UAAU,CAAQ;YACd,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;gBACzB,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;aAC7C;SACJ;QAED,4CAAW,GAAX;YACI,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;SAC7C;;;;gBAnEJb,cAAS,SAAC;oBACP,QAAQ,EAAE,UAAU;oBACpB,QAAQ,EAAE,SAAS;oBACnB,mBAAmB,EAAE,KAAK;oBAC1B,QAAQ,EAAE,qRAKT;oBACD,aAAa,EAAEC,sBAAiB,CAAC,IAAI;oBACrC,eAAe,EAAEC,4BAAuB,CAAC,MAAM;iBAClD;;;gBAxBGY,eAAU;gBAUL,kBAAkB;gBAflBR,iBAAQ;gBASbE,cAAS;;;0BAsBRG,UAAK;2BAKLA,UAAK;8BAULI,iBAAY,SAAC,aAAa;4BAC1BL,cAAS,SAAC,WAAW,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;;;;QCnC5C;;;;;gBALCM,aAAQ,SAAC;oBACN,YAAY,EAAE,CAAC,kBAAkB,EAAE,sBAAsB,CAAC;oBAC1D,OAAO,EAAE,CAAC,kBAAkB,EAAE,sBAAsB,CAAC;oBACrD,OAAO,EAAE,CAACC,mBAAY,EAAEC,uBAAc,EAAEC,oBAAc,CAAC;iBAC1D;;;ICXD;;;;;;;;;;;;;;"}