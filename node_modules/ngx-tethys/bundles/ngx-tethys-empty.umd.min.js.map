{"version":3,"sources":["../../src/empty/empty.config.ts","../../src/empty/empty.component.ts","../../src/empty/empty.module.ts"],"names":["this","noResultTranslateKey","noResultWithTargetTranslateKey","Injectable","sizeClassMap","lg","md","sm","sizeMap","height","offsetTop","defaultMarginTop","ThyEmptyComponent","thyTranslate","thyEmptyConfig","elementRef","renderer","ngZone","sizeClass","join","Object","defineProperty","prototype","value","classList","thyMessage","thyTranslationKey","instant","thyTranslationValues","thyEntityName","target","thyEntityNameTranslateKey","_calculatePosition","sizeOptions","thySize","marginTop","coerceBooleanProperty","thyTopAuto","containerElement","thyContainer","nativeElement","parentElement","emptyStateHeight","offsetHeight","thyMarginTop","setStyle","ngOnInit","ngAfterViewInit","_this","runOutsideAngular","setTimeout","Component","args","selector","template","ThyTranslate","ThyEmptyConfig","ElementRef","Renderer2","NgZone","HostBinding","Input","ContentChild","NgModule","declarations","imports","CommonModule","ThySharedModule","ThyIconModule","exports","providers"],"mappings":"gsBAEA,WAEIA,KAAAC,qBAAuB,wBACvBD,KAAAE,+BAAiC,oDAHpCC,EAAAA,aCgBD,IAAMC,EAAoB,CACtBC,GAAI,CAAC,kBAAmB,uBACxBC,GAAI,CAAC,mBACLC,GAAI,CAAC,kBAAmB,wBAEtBC,EAAe,CACjBH,GAAI,CACAI,OAAQ,IACRC,UAAW,GACXC,iBAAkB,KAEtBL,GAAI,CACAG,OAAQ,IACRC,UAAW,GACXC,iBAAkB,IAEtBJ,GAAI,CACAE,OAAQ,GACRC,UAAW,GACXC,iBAAkB,kBA8FtB,SAAAC,EACYC,EACAC,EACAC,EACAC,EACAC,GAJAjB,KAAAa,aAAAA,EACAb,KAAAc,eAAAA,EACAd,KAAAe,WAAAA,EACAf,KAAAgB,SAAAA,EACAhB,KAAAiB,OAAAA,EA1FUjB,KAAAkB,UAAYd,EAAiB,GAAEe,KAAK,YAkB1DC,OAAAC,eACIT,EAAAU,UAAA,UAAO,KADX,SACYC,GACR,IAAMC,EAAYpB,EAAamB,GAAS,MACpCC,IACAxB,KAAKkB,UAAYM,EAAUL,KAAK,uCAgBxCC,OAAAC,eAAIT,EAAAU,UAAA,cAAW,KAAf,WACI,OAAItB,KAAKyB,WACEzB,KAAKyB,WACLzB,KAAK0B,kBACL1B,KAAKa,aAAac,QAAQ3B,KAAK0B,kBAAmB1B,KAAK4B,sBACvD5B,KAAK6B,cACL7B,KAAKa,aAAac,QAAQ3B,KAAKc,eAAeZ,+BAAgC,CACjF4B,OAAQ9B,KAAK6B,gBAEV7B,KAAK+B,0BACL/B,KAAKa,aAAac,QAAQ3B,KAAKc,eAAeZ,+BAAgC,CACjF4B,OAAQ9B,KAAKa,aAAac,QAAQ3B,KAAK+B,6BAGpC/B,KAAKa,aAAac,QAAQ3B,KAAKc,eAAeb,uDAI7DW,EAAAU,UAAAU,mBAAA,WACI,IAAMC,EAAczB,EAAQR,KAAKkC,SAAW,MAExCC,EAAY,KAChB,GAFgBC,EAAAA,sBAAsBpC,KAAKqC,YAE9B,CAET,IAAMC,EAAmBtC,KAAKuC,aAAevC,KAAKuC,aAAaC,cAAgBxC,KAAKe,WAAWyB,cAAcC,cAEzGC,EAAmB1C,KAAKe,WAAWyB,cAAcG,aAEjDD,GAAoB,KACpBA,EAAmBT,EAAYxB,SAEnC0B,GAAaG,EAAiBK,aAAeD,GAAoB,EAAIT,EAAYvB,WAEjE,IACZyB,EAAY,QAIZA,EADAnC,KAAK4C,aACO5C,KAAK4C,aAEL,EAGhBT,GACAnC,KAAKgB,SAAS6B,SAAS7C,KAAKe,WAAWyB,cAAe,YAAaL,EAAY,OAWvFvB,EAAAU,UAAAwB,SAAA,aAEAlC,EAAAU,UAAAyB,gBAAA,WAAA,IAAAC,EAAAhD,KACIA,KAAKiB,OAAOgC,mBAAkB,WAC1BC,YAAW,WACPF,EAAKhB,uBACN,iCAxGdmB,EAAAA,UAASC,KAAA,CAAC,CACPC,SAAU,YACVC,SAAA,88IA3CKC,EAAAA,oBAgBAC,SATLC,EAAAA,kBAKAC,EAAAA,iBAFAC,EAAAA,6CAoCCC,EAAAA,YAAWR,KAAA,CAAC,6BAGZS,EAAAA,iCAGAA,EAAAA,oCAEAA,EAAAA,6BAGAA,EAAAA,yCAGAA,EAAAA,2BAEAA,EAAAA,uBAEAA,EAAAA,4BAQAA,EAAAA,0BAEAA,EAAAA,4BAEAA,EAAAA,2BAEAA,EAAAA,8BAEAA,EAAAA,gCAEAC,EAAAA,aAAYV,KAAA,CAAC,kBCnElB,iCANCW,EAAAA,SAAQX,KAAA,CAAC,CACNY,aAAc,CAACpD,GACfqD,QAAS,CAACC,EAAAA,aAAcC,EAAAA,gBAAiBC,EAAAA,eACzCC,QAAS,CAACzD,GACV0D,UAAW,CAACd","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class ThyEmptyConfig {\n    noResultTranslateKey = 'common.tips.NO_RESULT';\n    noResultWithTargetTranslateKey = 'common.tips.NO_RESULT_TARGET';\n}\n\n","import { ThyTranslate } from 'ngx-tethys/core';\nimport { coerceBooleanProperty } from 'ngx-tethys/util';\n\nimport {\n    AfterViewInit,\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    Input,\n    NgZone,\n    OnInit,\n    Renderer2,\n    TemplateRef\n} from '@angular/core';\n\nimport { ThyEmptyConfig } from './empty.config';\n\nconst sizeClassMap: any = {\n    lg: ['thy-empty-state', 'thy-empty-state--lg'],\n    md: ['thy-empty-state'],\n    sm: ['thy-empty-state', 'thy-empty-state--sm']\n};\nconst sizeMap: any = {\n    lg: {\n        height: 168, // 空提示的高度\n        offsetTop: 30, // 空提示图标和大小之间的空白距离，需要除去，否则会不居中\n        defaultMarginTop: 120 // 不自动计算默认的 top 距离\n    },\n    md: {\n        height: 118,\n        offsetTop: 20,\n        defaultMarginTop: 10\n    },\n    sm: {\n        height: 78,\n        offsetTop: 10,\n        defaultMarginTop: 10\n    }\n};\n\n@Component({\n    selector: 'thy-empty',\n    templateUrl: './empty.component.html'\n})\nexport class ThyEmptyComponent implements OnInit, AfterViewInit {\n    @HostBinding('class') sizeClass = sizeClassMap['md'].join(' ');\n\n    // 显示的文本，优先级 100 最高\n    @Input() thyMessage: string;\n\n    // 显示文本的多语言 Key 优先级 99\n    @Input() thyTranslationKey: string;\n\n    @Input() thyTranslationValues: any;\n\n    // 显示默认提示信息，替换目标名称\n    @Input() thyEntityName: string;\n\n    // 显示默认提示信息，替换目标名称的 translateKey\n    @Input() thyEntityNameTranslateKey: string;\n\n    @Input() thyIconName: string;\n\n    @Input()\n    set thySize(value: string) {\n        const classList = sizeClassMap[value || 'md'];\n        if (classList) {\n            this.sizeClass = classList.join(' ');\n        }\n    }\n\n    @Input() thyMarginTop: number | string;\n\n    @Input() thyTopAuto: boolean;\n\n    @Input() thyContainer: ElementRef;\n\n    @Input() thyImageUrl: string;\n\n    @Input() thyDescription: string;\n\n    @ContentChild('extra') extraTemplateRef: TemplateRef<any>;\n\n    get displayText() {\n        if (this.thyMessage) {\n            return this.thyMessage;\n        } else if (this.thyTranslationKey) {\n            return this.thyTranslate.instant(this.thyTranslationKey, this.thyTranslationValues);\n        } else if (this.thyEntityName) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyEntityName\n            });\n        } else if (this.thyEntityNameTranslateKey) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyTranslate.instant(this.thyEntityNameTranslateKey)\n            });\n        } else {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultTranslateKey);\n        }\n    }\n\n    _calculatePosition() {\n        const sizeOptions = sizeMap[this.thySize || 'md'];\n        const topAuto = coerceBooleanProperty(this.thyTopAuto);\n        let marginTop = null;\n        if (topAuto) {\n            // 选择参考父容器居中\n            const containerElement = this.thyContainer ? this.thyContainer.nativeElement : this.elementRef.nativeElement.parentElement;\n            // containerElement.height;\n            let emptyStateHeight = this.elementRef.nativeElement.offsetHeight;\n            // 高度没有自动计算出来使用默认值\n            if (emptyStateHeight <= 10) {\n                emptyStateHeight = sizeOptions.height;\n            }\n            marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2 - sizeOptions.offsetTop;\n            // marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2;\n            if (marginTop < 0) {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        } else {\n            if (this.thyMarginTop) {\n                marginTop = this.thyMarginTop;\n            } else {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        }\n        if (marginTop) {\n            this.renderer.setStyle(this.elementRef.nativeElement, 'marginTop', marginTop + 'px');\n        }\n    }\n    constructor(\n        private thyTranslate: ThyTranslate,\n        private thyEmptyConfig: ThyEmptyConfig,\n        private elementRef: ElementRef,\n        private renderer: Renderer2,\n        private ngZone: NgZone\n    ) {}\n\n    ngOnInit() {}\n\n    ngAfterViewInit() {\n        this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                this._calculatePosition();\n            }, 50);\n        });\n    }\n}\n","import { ThyIconModule } from 'ngx-tethys/icon';\nimport { ThySharedModule } from 'ngx-tethys/shared';\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { ThyEmptyComponent } from './empty.component';\nimport { ThyEmptyConfig } from './empty.config';\n\n@NgModule({\n    declarations: [ThyEmptyComponent],\n    imports: [CommonModule, ThySharedModule, ThyIconModule],\n    exports: [ThyEmptyComponent],\n    providers: [ThyEmptyConfig]\n})\nexport class ThyEmptyModule {}\n"]}