!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("ngx-tethys/shared"),require("ngx-tethys/icon"),require("date-fns"),require("ngx-tethys/util"),require("ngx-tethys/core"),require("ngx-tethys/date-picker"),require("ngx-tethys/select"),require("ngx-tethys/radio"),require("ngx-tethys/button"),require("ngx-tethys/date-range")):"function"==typeof define&&define.amd?define("ngx-tethys/calendar",["exports","@angular/core","@angular/common","@angular/forms","ngx-tethys/shared","ngx-tethys/icon","date-fns","ngx-tethys/util","ngx-tethys/core","ngx-tethys/date-picker","ngx-tethys/select","ngx-tethys/radio","ngx-tethys/button","ngx-tethys/date-range"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-tethys"]=e["ngx-tethys"]||{},e["ngx-tethys"].calendar={}),e.ng.core,e.ng.common,e.ng.forms,e["ngx-tethys"].shared,e["ngx-tethys"].icon,e.dateFns,e["ngx-tethys"].util,e["ngx-tethys"].core,e["ngx-tethys"]["date-picker"],e["ngx-tethys"].select,e["ngx-tethys"].radio,e["ngx-tethys"].button,e["ngx-tethys"]["date-range"])}(this,(function(e,t,n,a,r,o,i,h,s,l,c,u,y,d){"use strict";var g=function(){function e(e){this.cdr=e,this.className=!0,this.yearChange=new t.EventEmitter,this.monthChange=new t.EventEmitter,this.dateRangeChange=new t.EventEmitter,this.dateRanges=[{key:"month",text:i.getYear(new Date)+"年"+(i.getMonth(new Date)+1)+"月",begin:h.getUnixTime(h.startOfMonth(new Date)),end:h.getUnixTime(h.endOfMonth(new Date)),timestamp:{interval:1,unit:"month"}}]}return Object.defineProperty(e.prototype,"currentDate",{set:function(e){this.setDate(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.onChangeMonth=function(e){var t=i.fromUnixTime(e.begin).getMonth();this.monthChange.emit(t)},e.prototype.onChangeYear=function(e){var t=i.fromUnixTime(e.begin).getFullYear();this.yearChange.emit(t)},e.prototype.onChangeRange=function(e){this.isCurrentDate(this._currentDate),this.onChangeYear(e),this.onChangeMonth(e),this.dateRangeChange.emit(e)},e.prototype.backToday=function(){this._currentDate=new h.TinyDate,this.date=Object.assign({},this.dateRanges[0]),this.onChangeRange(this.date),this.cdr.detectChanges()},e.prototype.setDate=function(e){if(this.isCurrentDate(e),this.isCurrent){this._currentDate=e;var t=Object.assign(Object.assign({},this.dateRanges[0]),{key:"exception",text:i.getYear(this._currentDate.nativeDate)+"年"+(i.getMonth(this._currentDate.nativeDate)+1)+"月",begin:h.getUnixTime(h.startOfMonth(this._currentDate.nativeDate)),end:h.getUnixTime(h.endOfMonth(this._currentDate.nativeDate))});this.date=t}else this._currentDate=new h.TinyDate,this.date=Object.assign({},this.dateRanges[0])},e.prototype.isCurrentDate=function(e){this.isCurrent=e.getMonth()!==i.getMonth(new Date)||e.getYear()!==i.getYear(new Date)},e}();g.decorators=[{type:t.Component,args:[{selector:"thy-calendar-header",template:'<div class="thy-calendar-full-header-left">\n  <thy-date-range\n    class="select-date-range"\n    [ngModel]="date"\n    [thyHiddenMenu]="true"\n    [thyCustomKey]="\'exception\'"\n    [thyPickerFormat]="\'yyyy年MM月\'"\n    (ngModelChange)="onChangeRange($event)"\n  ></thy-date-range>\n  <button *ngIf="isCurrent" thyButton="outline-default-square" thySize="md" (click)="backToday()">\n    今天\n  </button>\n</div>\n<div class="thy-calendar-full-header-right">\n  <ng-container *ngTemplateOutlet="$any(operationRender); context: { $implicit: operationRender }">\n    <span>{{ operationRender | json }}</span>\n  </ng-container>\n</div>\n'}]}],g.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},g.propDecorators={className:[{type:t.HostBinding,args:["class.thy-calendar-full-header-container"]}],currentDate:[{type:t.Input}],operationRender:[{type:t.Input}],yearChange:[{type:t.Output}],monthChange:[{type:t.Output}],dateRangeChange:[{type:t.Output}]};Object.create;Object.create;var p=function(){};p.decorators=[{type:t.Directive,args:[{selector:"[thyDateCell]",exportAs:"thyDateCell"}]}];var f=function(){};f.decorators=[{type:t.Directive,args:[{selector:"[thyMonthCell]",exportAs:"thyMonthCell"}]}];var C=function(){};C.decorators=[{type:t.Directive,args:[{selector:"[thyDateFullCell]",exportAs:"thyDateFullCell"}]}];var D=function(){};D.decorators=[{type:t.Directive,args:[{selector:"[thyMonthFullCell]",exportAs:"thyMonthFullCell"}]}];var m=function(){};m.decorators=[{type:t.Directive,args:[{selector:"[thyCalendarHeaderOperation]",exportAs:"thyCalendarHeaderOperation"}]}];var v=function(){function e(e){this.cdr=e,this.className=!0,this.className1=!0,this.thyMode="month",this.thyModeChange=new t.EventEmitter,this.thyPanelChange=new t.EventEmitter,this.thySelectChange=new t.EventEmitter,this.thyValueChange=new t.EventEmitter,this.thyDateRangeChange=new t.EventEmitter,this.thyFullscreen=!0,this.currentDate=new h.TinyDate,this.prefixCls="thy-calendar-full",this.onChangeFn=function(){},this.onTouchFn=function(){}}return Object.defineProperty(e.prototype,"dateCell",{get:function(){return this.thyDateCell||this.thyDateCellChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerOperation",{get:function(){return this.thyCalendarHeaderOperation||this.thyCalendarHeaderOperationChild},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.onYearSelect=function(e){var t=this.currentDate.setYear(e);this.updateDate(t)},e.prototype.onMonthSelect=function(e){var t=this.currentDate.setMonth(e);this.updateDate(t)},e.prototype.onDateSelect=function(e){this.updateDate(e)},e.prototype.onDateRangeSelect=function(e){this.thyDateRangeChange.emit(e)},e.prototype.writeValue=function(e){this.updateDate(new h.TinyDate(e),!1),this.cdr.markForCheck()},e.prototype.registerOnChange=function(e){this.onChangeFn=e},e.prototype.registerOnTouched=function(e){this.onTouchFn=e},e.prototype.updateDate=function(e,t){void 0===t&&(t=!0),this.currentDate=e,t&&(this.onChangeFn(e.nativeDate),this.onTouchFn(),this.thySelectChange.emit(e.nativeDate),this.thyValueChange.emit(e.nativeDate))},e.prototype.ngOnChanges=function(e){e.thyValue&&this.updateDate(new h.TinyDate(this.thyValue),!1)},e}();v.decorators=[{type:t.Component,args:[{selector:"thy-calendar",template:'<thy-calendar-header\n  [operationRender]="headerOperation"\n  (monthChange)="onMonthSelect($event)"\n  (yearChange)="onYearSelect($event)"\n  (dateRangeChange)="onDateRangeSelect($event)"\n  [currentDate]="currentDate"\n></thy-calendar-header>\n\n<div class="thy-calendar-panel">\n  <div class="thy-calendar-{{ thyMode === \'month\' ? \'date\' : \'month\' }}-panel">\n    <div class="thy-calendar-body">\n      <ng-container *ngIf="thyMode === \'month\'; then monthModeTable; else yearModeTable"></ng-container>\n    </div>\n  </div>\n</div>\n<ng-template #monthModeTable>\n  <date-table\n    [prefixCls]="prefixCls"\n    [value]="currentDate"\n    [selectedValue]="currentDate"\n    [dateCellRender]="dateCell"\n    [disabledDate]="thyDisabledDate"\n    (valueChange)="onDateSelect($event)"\n  ></date-table>\n</ng-template>\n\n<ng-template #yearModeTable>\n  <month-table [value]="currentDate" (valueChange)="onDateSelect($event)"></month-table>\n</ng-template>\n',encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush,providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return v})),multi:!0}]}]}],v.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},v.propDecorators={className:[{type:t.HostBinding,args:["class.thy-calendar-container"]}],className1:[{type:t.HostBinding,args:["class.thy-calendar-full"]}],thyMode:[{type:t.Input}],thyValue:[{type:t.Input}],thyDisabledDate:[{type:t.Input}],thyModeChange:[{type:t.Output}],thyPanelChange:[{type:t.Output}],thySelectChange:[{type:t.Output}],thyValueChange:[{type:t.Output}],thyDateRangeChange:[{type:t.Output}],thyDateCell:[{type:t.Input}],thyDateCellChild:[{type:t.ContentChild,args:[p,{read:t.TemplateRef}]}],thyCalendarHeaderOperation:[{type:t.Input}],thyCalendarHeaderOperationChild:[{type:t.ContentChild,args:[m,{read:t.TemplateRef}]}],thyFullscreen:[{type:t.Input}]},function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var h=e.length-1;h>=0;h--)(r=e[h])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);o>3&&i&&Object.defineProperty(t,n,i)}([s.InputBoolean(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",Object)],v.prototype,"thyFullscreen",void 0);var x=function(){};x.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,a.FormsModule,r.ThySharedModule,o.ThyIconModule,l.LibPackerModule,c.ThySelectModule,u.ThyRadioModule,y.ThyButtonModule,d.ThyDateRangeModule],declarations:[g,v,p,C,f,D,m],exports:[g,v,p,C,f,D,m]}]}],e.ThyCalendarComponent=v,e.ThyCalendarHeaderComponent=g,e.ThyCalendarHeaderOperationDirective=m,e.ThyCalendarModule=x,e.ThyDateCellDirective=p,e.ThyDateFullCellDirective=C,e.ThyMonthCellDirective=f,e.ThyMonthFullCellDirective=D,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-calendar.umd.min.js.map