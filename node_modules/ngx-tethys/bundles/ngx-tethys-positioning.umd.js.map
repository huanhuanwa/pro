{"version":3,"file":"ngx-tethys-positioning.umd.js","sources":["../../src/positioning/positioning.service.ts","../../src/positioning/ngx-tethys-positioning.ts"],"names":["PlacementTypes","ElementRef","isNumber","Injectable","NgZone"],"mappings":"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","sourcesContent":["import { Injectable, ElementRef, NgZone } from '@angular/core';\nimport { isNumber } from 'ngx-tethys/util';\nimport { NewClientRect } from './client-rect';\n\nexport enum PlacementTypes {\n    left = 'left',\n    right = 'right',\n    center = 'center',\n    top = 'top',\n    bottom = 'bottom'\n}\n\nexport interface PositioningOptions {\n    /** The DOM element, ElementRef, or a selector string of an element which will be moved */\n    attach?: HTMLElement | ElementRef | string;\n\n    /** The DOM element, ElementRef, or a selector string of an element which the element will be attached to  */\n    target?: HTMLElement | ElementRef | string;\n\n    /**\n     * A string of the form 'vert-attachment horiz-attachment' or 'placement'\n     * - placement can be \"top\", \"bottom\", \"left\", \"right\"\n     * not yet supported:\n     * - vert-attachment can be any of 'top', 'middle', 'bottom'\n     * - horiz-attachment can be any of 'left', 'center', 'right'\n     */\n    placement?: string;\n\n    // 直接传入位置，不用根据 attachment target 计算，右击菜单使用\n    position?: {\n        top: number;\n        left: number;\n    };\n\n    /** A string of the form 'vert-offset horiz-offset'\n     * - vert-offset and horiz-offset can be of the form \"20px\" or \"55%\"\n     */\n    offset?: number;\n\n    /** If true component will be attached to body */\n    appendToBody?: boolean;\n\n    /** If true component auto adapt top or bottom */\n    autoAdapt?: boolean;\n}\n\nexport const defaultPositioningOptions: PositioningOptions = {\n    offset: 10,\n    appendToBody: true,\n    placement: 'bottom center'\n};\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ThyPositioningService {\n    constructor(private ngZone: NgZone) {}\n\n    static getHTMLElement(element: HTMLElement | ElementRef | string): HTMLElement {\n        // it means that we got a selector\n        if (typeof element === 'string') {\n            return document.querySelector(element) as HTMLElement;\n        }\n\n        if (element instanceof ElementRef) {\n            return element.nativeElement;\n        }\n\n        return element as HTMLElement;\n    }\n\n    private autoPosition(targetElPosition: ClientRect, hostElPosition: ClientRect, targetElement: HTMLElement, preferredPosition?: string) {\n        if (\n            (!preferredPosition || preferredPosition === 'right') &&\n            targetElPosition.left + hostElPosition.left - targetElement.offsetWidth < 0\n        ) {\n            return 'right';\n        } else if (\n            (!preferredPosition || preferredPosition === 'top') &&\n            targetElPosition.bottom + hostElPosition.bottom + targetElement.offsetHeight > window.innerHeight\n        ) {\n            return 'top';\n        } else if (\n            (!preferredPosition || preferredPosition === 'bottom') &&\n            targetElPosition.top + hostElPosition.top - targetElement.offsetHeight < 0\n        ) {\n            return 'bottom';\n        } else if (\n            (!preferredPosition || preferredPosition === 'left') &&\n            targetElPosition.right + hostElPosition.right + targetElement.offsetWidth > window.innerWidth\n        ) {\n            return 'left';\n        }\n        return null;\n    }\n\n    private getAllStyles(element: HTMLElement) {\n        return window.getComputedStyle(element);\n    }\n\n    private getStyle(element: HTMLElement, prop: string): string {\n        return (this.getAllStyles(element) as any)[prop];\n    }\n\n    private isStaticPositioned(element: HTMLElement): boolean {\n        return (this.getStyle(element, 'position') || 'static') === 'static';\n    }\n\n    private offsetParent(element: HTMLElement): HTMLElement {\n        let offsetParentEl = <HTMLElement>element.offsetParent || document.documentElement;\n\n        while (offsetParentEl && offsetParentEl !== document.documentElement && this.isStaticPositioned(offsetParentEl)) {\n            offsetParentEl = <HTMLElement>offsetParentEl.offsetParent;\n        }\n\n        return offsetParentEl || document.documentElement;\n    }\n\n    private calculateTopBottomPosition(\n        placementSecondary: string,\n        attachElPosition: ClientRect,\n        targetElPosition: ClientRect,\n        offset: number\n    ): ClientRect {\n        const documentClientHeight = document.documentElement.clientHeight;\n        if (placementSecondary === PlacementTypes.top) {\n            targetElPosition.top = attachElPosition.top;\n            targetElPosition.bottom = null;\n            // Top 对齐时，下面的内容超过了整个屏幕的高度, 为了可以看见全部内容，牺牲 Top 对齐\n            if (targetElPosition.top + targetElPosition.height > documentClientHeight) {\n                targetElPosition.top = documentClientHeight - targetElPosition.height;\n            }\n        } else if (placementSecondary === PlacementTypes.bottom) {\n            targetElPosition.bottom = documentClientHeight - attachElPosition.top - attachElPosition.height;\n            targetElPosition.top = null;\n            // Bottom 对齐时，上面的内容超过了整个屏幕的高度，为了可以看见全部内容，牺牲 Bottom 对齐\n            if (targetElPosition.bottom + targetElPosition.height > documentClientHeight) {\n                targetElPosition.bottom = documentClientHeight - targetElPosition.height;\n            }\n        } else {\n            targetElPosition.top = attachElPosition.top + attachElPosition.height / 2 - targetElPosition.height / 2;\n            // 顶部的内容被遮挡，牺牲居中，让顶部侧内容可见\n            if (targetElPosition.top < 0) {\n                targetElPosition.top = offset;\n            } else if (targetElPosition.top + targetElPosition.height > documentClientHeight) {\n                // 下面的内容被遮挡，牺牲居中，让下方的内容可见\n                targetElPosition.top = documentClientHeight - targetElPosition.height + offset;\n            }\n            targetElPosition.bottom = null;\n        }\n        return targetElPosition;\n    }\n\n    private calculateLeftRightPosition(\n        placementSecondary: string,\n        attachElPosition: ClientRect,\n        targetElPosition: ClientRect,\n        offset: number\n    ): ClientRect {\n        const documentClientWidth = document.documentElement.clientWidth;\n        if (placementSecondary === PlacementTypes.right) {\n            targetElPosition.right = document.documentElement.clientWidth - attachElPosition.left - attachElPosition.width;\n            targetElPosition.left = null;\n            // 右对齐时，左侧的内容超过了整个屏幕的宽度, 为了可以看见全部内容，牺牲右对齐\n            if (targetElPosition.right + targetElPosition.width > documentClientWidth) {\n                targetElPosition.right = documentClientWidth - targetElPosition.width - offset;\n            }\n        } else if (placementSecondary === PlacementTypes.left) {\n            targetElPosition.left = attachElPosition.left;\n            // 左对齐时，右侧的内容超过了整个屏幕的宽度, 为了可以看见全部内容，牺牲左对齐\n            if (targetElPosition.left + targetElPosition.width > documentClientWidth) {\n                targetElPosition.left = documentClientWidth - targetElPosition.width - offset;\n            }\n        } else {\n            targetElPosition.left = attachElPosition.left + attachElPosition.width / 2 - targetElPosition.width / 2;\n            // 左侧的内容被遮挡，牺牲居中，让左侧内容可见\n            if (targetElPosition.left < 0) {\n                targetElPosition.left = offset;\n            } else if (targetElPosition.left + targetElPosition.width > documentClientWidth) {\n                // 右侧的内容被遮挡，牺牲居中，让右侧内容可见\n                targetElPosition.left = documentClientWidth - targetElPosition.width - offset;\n            }\n        }\n        return targetElPosition;\n    }\n\n    private autoAdaptTopBottom(\n        placementPrimary: string,\n        hostElPosition: NewClientRect,\n        targetElPosition: NewClientRect,\n        offset: number,\n        autoAdapt = true\n    ) {\n        if (!autoAdapt) {\n            return;\n        }\n        const documentClientHeight = document.documentElement.clientHeight;\n        if (placementPrimary === 'top') {\n            // 如果 Top 空间不够，则自动适应 Bottom Top 和 Bottom 空间都不够，默认为可视区域Top\n            if (hostElPosition.originBottom - hostElPosition.height - targetElPosition.height < 0) {\n                if (documentClientHeight - hostElPosition.originBottom >= targetElPosition.height) {\n                    targetElPosition.bottom = targetElPosition.bottom - targetElPosition.height - hostElPosition.height - offset;\n                } else {\n                    targetElPosition.bottom = null;\n                    targetElPosition.top = hostElPosition.top - hostElPosition.originTop;\n                }\n            }\n        }\n        if (placementPrimary === 'bottom') {\n            // 如果 Bottom 空间不够，则自动适应 Top，如果 Bottom 和 Top 空间都不够，默认为可视区域Top\n            if (hostElPosition.originBottom + targetElPosition.height > documentClientHeight) {\n                const newTop = hostElPosition.top - targetElPosition.height - offset;\n                if (newTop > hostElPosition.top - hostElPosition.originTop) {\n                    targetElPosition.top = newTop;\n                } else {\n                    targetElPosition.top = hostElPosition.top - hostElPosition.originTop;\n                }\n            }\n        }\n    }\n\n    public position(element: HTMLElement, round = true): NewClientRect {\n        let elPosition: NewClientRect;\n        let parentOffset: NewClientRect = {\n            width: 0,\n            height: 0,\n            top: 0,\n            bottom: 0,\n            left: 0,\n            right: 0\n        };\n\n        if (this.getStyle(element, 'position') === 'fixed') {\n            const bcRect = element.getBoundingClientRect();\n            elPosition = {\n                width: bcRect.width,\n                height: bcRect.height,\n                top: bcRect.top,\n                bottom: bcRect.bottom,\n                left: bcRect.left,\n                right: bcRect.right,\n                originTop: bcRect.top,\n                originBottom: bcRect.bottom,\n                originLeft: bcRect.left,\n                originRight: bcRect.right\n            };\n        } else {\n            const offsetParentEl = this.offsetParent(element);\n\n            elPosition = this.offset(element, false);\n\n            if (offsetParentEl !== document.documentElement) {\n                parentOffset = this.offset(offsetParentEl, false);\n            }\n\n            parentOffset.top += offsetParentEl.clientTop;\n            parentOffset.left += offsetParentEl.clientLeft;\n        }\n\n        elPosition.top -= parentOffset.top;\n        elPosition.bottom -= parentOffset.top;\n        elPosition.left -= parentOffset.left;\n        elPosition.right -= parentOffset.left;\n\n        if (round) {\n            elPosition.top = Math.round(elPosition.top);\n            elPosition.bottom = Math.round(elPosition.bottom);\n            elPosition.left = Math.round(elPosition.left);\n            elPosition.right = Math.round(elPosition.right);\n        }\n\n        return elPosition;\n    }\n\n    public offset(element: HTMLElement, round = true): NewClientRect {\n        const elBcr = element.getBoundingClientRect();\n        const viewportOffset = {\n            top: window.pageYOffset - document.documentElement.clientTop,\n            left: window.pageXOffset - document.documentElement.clientLeft\n        };\n\n        const elOffset = {\n            height: elBcr.height || element.offsetHeight,\n            width: elBcr.width || element.offsetWidth,\n            top: elBcr.top + viewportOffset.top,\n            bottom: elBcr.bottom + viewportOffset.top,\n            left: elBcr.left + viewportOffset.left,\n            right: elBcr.right + viewportOffset.left,\n            originTop: elBcr.top,\n            originBottom: elBcr.bottom,\n            originLeft: elBcr.left,\n            originRight: elBcr.right\n        };\n\n        if (round) {\n            elOffset.height = Math.round(elOffset.height);\n            elOffset.width = Math.round(elOffset.width);\n            elOffset.top = Math.round(elOffset.top);\n            elOffset.bottom = Math.round(elOffset.bottom);\n            elOffset.left = Math.round(elOffset.left);\n            elOffset.right = Math.round(elOffset.right);\n        }\n\n        return elOffset;\n    }\n\n    /**\n     * 计算弹出层的位置\n     * @param hostElement 被追加的元素\n     * @param targetElement 弹出层内元素\n     * @param options 参数\n     */\n    public calculatePosition(hostElement: HTMLElement, targetElement: HTMLElement, options: PositioningOptions): ClientRect {\n        const { placement, appendToBody, offset, position, autoAdapt } = options;\n        let hostElPosition: NewClientRect = null;\n        // 外部传入已经算好的位置, 需要设置 hostElPosition 宽度和高度为 0，不计算位置，主要使用于右击弹出位置计算\n        if (position) {\n            hostElPosition = {\n                top: position.top || 0,\n                left: position.left || 0,\n                bottom: 0,\n                right: 0,\n                width: 0,\n                height: 0\n            };\n        } else {\n            hostElPosition = appendToBody ? this.offset(hostElement, false) : this.position(hostElement, false);\n        }\n\n        const targetElStyles = this.getAllStyles(targetElement);\n\n        const documentClientWidth = document.documentElement.clientWidth;\n        const documentClientHeight = document.documentElement.clientHeight;\n\n        let placementPrimary = placement.split(' ')[0] || 'top';\n        const placementSecondary = placement.split(' ')[1] || 'center';\n\n        const targetElBCR = targetElement.getBoundingClientRect();\n        const targetElPosition: NewClientRect = {\n            height: targetElBCR.height || targetElement.offsetHeight,\n            width: targetElBCR.width || targetElement.offsetWidth,\n            top: null,\n            bottom: null,\n            left: null,\n            right: null,\n            originTop: targetElBCR.top,\n            originBottom: targetElBCR.bottom,\n            originLeft: targetElBCR.left,\n            originRight: targetElBCR.right\n        };\n\n        if (placementPrimary === 'auto') {\n            let newPlacementPrimary = this.autoPosition(targetElPosition, hostElPosition, targetElement, placementSecondary);\n            if (!newPlacementPrimary) {\n                newPlacementPrimary = this.autoPosition(targetElPosition, hostElPosition, targetElement);\n            }\n            if (newPlacementPrimary) {\n                placementPrimary = newPlacementPrimary;\n            }\n            targetElement.classList.add(placementPrimary);\n        }\n\n        switch (placementPrimary) {\n            case 'top':\n                targetElPosition.bottom = documentClientHeight - hostElPosition.top + offset;\n                targetElPosition.top = null;\n                this.autoAdaptTopBottom(placementPrimary, hostElPosition, targetElPosition, offset, autoAdapt);\n                this.calculateLeftRightPosition(placementSecondary, hostElPosition, targetElPosition, offset);\n                break;\n            case 'bottom':\n                targetElPosition.top = hostElPosition.top + hostElPosition.height + offset;\n                this.autoAdaptTopBottom(placementPrimary, hostElPosition, targetElPosition, offset, autoAdapt);\n                this.calculateLeftRightPosition(placementSecondary, hostElPosition, targetElPosition, offset);\n                break;\n            case 'left':\n                targetElPosition.right = documentClientWidth - hostElPosition.left + offset;\n                targetElPosition.left = null;\n                this.calculateTopBottomPosition(placementSecondary, hostElPosition, targetElPosition, offset);\n                break;\n            case 'right':\n                targetElPosition.left = hostElPosition.left + hostElPosition.width + offset;\n                targetElPosition.right = null;\n                this.calculateTopBottomPosition(placementSecondary, hostElPosition, targetElPosition, offset);\n                break;\n        }\n\n        // targetElPosition.top = Math.round(targetElPosition.top);\n        // targetElPosition.bottom = Math.round(targetElPosition.bottom);\n        // targetElPosition.left = Math.round(targetElPosition.left);\n        // targetElPosition.right = Math.round(targetElPosition.right);\n\n        return targetElPosition;\n    }\n\n    setPosition(options: PositioningOptions): void {\n        const { attach, target } = options;\n        const attachElement = ThyPositioningService.getHTMLElement(attach);\n        const targetElement = ThyPositioningService.getHTMLElement(target);\n        setTimeout(() => {\n            this.ngZone.runOutsideAngular(() => {\n                const pos = this.calculatePosition(attachElement, targetElement, options);\n                if (isNumber(pos.top)) {\n                    targetElement.style.top = `${pos.top}px`;\n                } else if (isNumber(pos.bottom)) {\n                    targetElement.style.bottom = `${pos.bottom}px`;\n                }\n                if (isNumber(pos.left)) {\n                    targetElement.style.left = `${pos.left}px`;\n                } else if (isNumber(pos.right)) {\n                    targetElement.style.right = `${pos.right}px`;\n                }\n            });\n        });\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}