{"version":3,"sources":["../../src/util/date/functions.ts","../../node_modules/tslib/tslib.es6.js","../../src/util/date/tiny-date.ts","../../src/util/logger/logger.ts","../../src/util/helpers/helpers.ts","../../src/util/dom.ts","../../src/util/immutable.ts","../../src/util/references.ts"],"names":["differenceInCalendarDays","dateFns","differenceInCalendarMonths","differenceInCalendarYears","differenceInWeeks","differenceInHours","differenceInMinutes","differenceInSeconds","isSameDay","isSameHour","isSameMinute","isSameMonth","isSameSecond","isSameYear","isToday","isTomorrow","isValid","setYear","startOfMonth","startOfWeek","addMonths","addYears","setDay","setMonth","getUnixTime","startOfDay","endOfDay","fromUnixTime","isWeekend","getWeek","getDaysInMonth","addSeconds","addMinutes","addHours","addWeeks","addQuarters","startOfQuarter","startOfYear","endOfWeek","endOfMonth","endOfQuarter","endOfYear","format","getQuarter","addDays","Object","create","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","TinyDate","date","Date","this","nativeDate","Error","JSON","stringify","unixTime","prototype","getTime","getDate","getYear","getFullYear","getMonth","options","weekStartsOn","getDay","getHours","getMinutes","getSeconds","getMilliseconds","getDaysInQuarter","setDate","amount","setHms","hour","minute","second","setHours","year","month","day","isSame","grain","fn","toNativeDate","isBeforeYear","compare","isBeforeMonth","isBeforeWeek","isBeforeDay","isBeforeHour","isBeforeMinute","isBeforeSecond","isAfterYear","isAfterMonth","isAfterWeek","isAfterDay","isAfterHour","isAfterMinute","isAfterSecond","mat","calendarStart","clone","isBefore","record","PREFIX","notRecorded","args","_i","asRecord","reduce","acc","c","toString","consoleCommonBehavior","consoleFunc","isDevMode","apply","createWarnDeprecation","prefix","stack","arg","console","warn","warnDeprecation","inputValueToBoolean","isUndefined","undefined","isNull","isUndefinedOrNull","isArray","baseGetTag","isEmpty","isString","isObjectLike","objectProto","hasOwnProperty","symToStringTag","toStringTag","isOwn","tag","unmasked","result","isNumber","isObject","type","isFunction","isDate","coerceArray","Array","get","object","path","defaultValue","paths","split","shift","set","index","lastIndex","nested","key","isBoolean","fromArray","from","slice","htmlElementIsEmpty","element","childNodes","nodes","node","nodeType","Node","ELEMENT_NODE","outerHTML","trim","TEXT_NODE","textContent","COMMENT_NODE","hexToRgb","hexValue","alpha","hex","replace","g","b","rgb","exec","resultR","parseInt","resultG","resultB","formatDate","toFixed","clamp","min","max","Math","keyBy","array","forEach","item","keyValue","indexKeyBy","camelCase","values","word","toLowerCase","string","toUpperCase","generateRandomStr","random","substring","isTemplateRef","TemplateRef","isHTMLElement","HTMLElement","isElementRef","ElementRef","coerceBooleanProperty","coerceNumberValue","fallbackValue","_isNumberValue","Number","coerceCssPixelValue","coerceCssPixel","valueFunctionProp","prop","shallowEqual","objA","objB","keysA","keys","keysB","bHasOwnProperty","bind","idx","concatArray","items","originalItems","_originalItems","proto","Element","vendor","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","match","el","selector","parentNode","querySelectorAll","isDocument","HTMLDocument","DOCUMENT_NODE","isElement","getWindow","elem","window","defaultView","getElementOffset","docElem","win","rect","doc","getClientRects","getBoundingClientRect","width","height","ownerDocument","documentElement","top","pageYOffset","clientTop","left","pageXOffset","clientLeft","getOffset","container","containerRect","getElementOuterHeight","_element","clientHeight","computedStyle","getComputedStyle","marginTop","marginBottom","getHTMLElementBySelector","defaultElementRef","document","body","helpers.isString","querySelector","nativeElement","isInputOrTextarea","indexOf","nodeName","isWindow","getContainerRect","bottom","getStyleAsText","styles","map","val","join","isTouchEvent","event","startsWith","Producer","entities","idKey","add","entity","addOptions","_this","addEntities","afterId","prepend","findIndex","splice","update","idsOrFn","newStateOrFn","ids","oldEntity","newState","assign","remove","filter","ids_1","move","id","moveOptions","fromIndex","toIndex","newEntities","target","delta","getReferenceIdKey","referenceKey","idKeys","mergeReferences","originalReferences","references","reference","referenceIdKey_1","originalReference_1","originalReferenceIdIndexMap_1","itemId","buildReferencesKeyBy","referenceIdKey","originalReferenceIdMap","log","rangeValue","_a","start","end"],"mappings":"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","sourcesContent":["import * as dateFns from 'date-fns';\n\nexport const differenceInCalendarDays = dateFns.differenceInCalendarDays;\nexport const differenceInCalendarMonths = dateFns.differenceInCalendarMonths;\nexport const differenceInCalendarYears = dateFns.differenceInCalendarYears;\nexport const differenceInWeeks = dateFns.differenceInWeeks;\nexport const differenceInHours = dateFns.differenceInHours;\nexport const differenceInMinutes = dateFns.differenceInMinutes;\nexport const differenceInSeconds = dateFns.differenceInSeconds;\nexport const isSameDay = dateFns.isSameDay;\nexport const isSameHour = dateFns.isSameHour;\nexport const isSameMinute = dateFns.isSameMinute;\nexport const isSameMonth = dateFns.isSameMonth;\nexport const isSameSecond = dateFns.isSameSecond;\nexport const isSameYear = dateFns.isSameYear;\nexport const isToday = dateFns.isToday;\nexport const isTomorrow = dateFns.isTomorrow;\nexport const isValid = dateFns.isValid;\nexport const setYear = dateFns.setYear;\nexport const startOfMonth = dateFns.startOfMonth;\nexport const startOfWeek = dateFns.startOfWeek;\nexport const addMonths = dateFns.addMonths;\nexport const addYears = dateFns.addYears;\nexport const setDay = dateFns.setDay;\nexport const setMonth = dateFns.setMonth;\nexport const getUnixTime = dateFns.getUnixTime;\nexport const startOfDay = dateFns.startOfDay;\nexport const endOfDay = dateFns.endOfDay;\nexport const fromUnixTime = dateFns.fromUnixTime;\nexport const isWeekend = dateFns.isWeekend;\nexport const getWeek = dateFns.getWeek;\nexport const getDaysInMonth = dateFns.getDaysInMonth;\nexport const addSeconds = dateFns.addSeconds;\nexport const addMinutes = dateFns.addMinutes;\nexport const addHours = dateFns.addHours;\nexport const addWeeks = dateFns.addWeeks;\nexport const addQuarters = dateFns.addQuarters;\nexport const startOfQuarter = dateFns.startOfQuarter;\nexport const startOfYear = dateFns.startOfYear;\nexport const endOfWeek = dateFns.endOfWeek;\nexport const endOfMonth = dateFns.endOfMonth;\nexport const endOfQuarter = dateFns.endOfQuarter;\nexport const endOfYear = dateFns.endOfYear;\nexport const format = dateFns.format;\nexport const getQuarter = dateFns.getQuarter;\nexport const addDays = dateFns.addDays;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {\n    differenceInCalendarDays,\n    differenceInCalendarMonths,\n    differenceInCalendarYears,\n    differenceInWeeks,\n    differenceInHours,\n    differenceInMinutes,\n    differenceInSeconds,\n    isSameDay,\n    isSameHour,\n    isSameMinute,\n    isSameMonth,\n    isSameSecond,\n    isSameYear,\n    isToday,\n    isTomorrow,\n    isValid,\n    setYear,\n    startOfMonth,\n    startOfWeek,\n    addMonths,\n    addYears,\n    setDay,\n    setMonth,\n    getUnixTime,\n    startOfDay,\n    endOfDay,\n    fromUnixTime,\n    isWeekend,\n    getWeek,\n    getDaysInMonth,\n    addSeconds,\n    addMinutes,\n    addHours,\n    addWeeks,\n    addQuarters,\n    startOfQuarter,\n    startOfYear,\n    endOfWeek,\n    endOfMonth,\n    endOfQuarter,\n    endOfYear,\n    format,\n    getQuarter,\n    addDays\n} from './functions';\n\nimport { Locale } from 'date-fns';\n\nexport type TinyDateCompareGrain = 'year' | 'quarter' | 'month' | 'week' | 'day' | 'hour' | 'minute' | 'second';\n\nexport type WeekDayIndex = 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\nexport type TinyDateType = TinyDate | Date | null;\n\nexport function sortRangeValue(rangeValue: TinyDate[]): TinyDate[] {\n    if (Array.isArray(rangeValue)) {\n        const [start, end] = rangeValue;\n        return start && end && start.isAfterSecond(end) ? [end, start] : [start, end];\n    }\n    return rangeValue;\n}\n\nexport class TinyDate implements Record<string, any> {\n    nativeDate: Date;\n\n    constructor(date?: Date | string | number) {\n        if (date) {\n            if (date instanceof Date) {\n                this.nativeDate = date;\n            } else if (typeof date === 'string' || typeof date === 'number') {\n                this.nativeDate = new Date(date);\n            } else {\n                throw new Error(\n                    `The input date type is not supported expect Date | string | number | { date: number; with_time: 0 | 1}, actual ${JSON.stringify(\n                        date\n                    )}`\n                );\n            }\n        } else {\n            this.nativeDate = new Date();\n        }\n    }\n\n    static fromUnixTime(unixTime: number): TinyDate {\n        return new TinyDate(fromUnixTime(unixTime));\n    }\n\n    // get\n    getTime(): number {\n        return this.nativeDate.getTime();\n    }\n\n    getDate(): number {\n        return this.nativeDate.getDate();\n    }\n\n    getYear(): number {\n        return this.nativeDate.getFullYear();\n    }\n\n    getQuarter(): number {\n        return getQuarter(this.nativeDate);\n    }\n\n    getMonth(): number {\n        return this.nativeDate.getMonth();\n    }\n\n    getWeek(options: { locale?: Locale; weekStartsOn?: WeekDayIndex } = { weekStartsOn: 1 }): number {\n        return getWeek(this.nativeDate, options);\n    }\n\n    getDay(): number {\n        return this.nativeDate.getDay();\n    }\n\n    getHours(): number {\n        return this.nativeDate.getHours();\n    }\n\n    getMinutes(): number {\n        return this.nativeDate.getMinutes();\n    }\n\n    getSeconds(): number {\n        return this.nativeDate.getSeconds();\n    }\n\n    getMilliseconds(): number {\n        return this.nativeDate.getMilliseconds();\n    }\n\n    getDaysInMonth() {\n        return getDaysInMonth(this.nativeDate);\n    }\n\n    getDaysInQuarter() {\n        return differenceInCalendarDays(this.endOfQuarter().addSeconds(1).nativeDate, this.startOfQuarter().nativeDate);\n    }\n\n    // set\n    setDate(amount: number): TinyDate {\n        const date = new Date(this.nativeDate);\n        date.setDate(amount);\n        return new TinyDate(date);\n    }\n\n    setHms(hour: number, minute: number, second: number): TinyDate {\n        const date = new Date(this.nativeDate);\n        date.setHours(hour, minute, second);\n        return new TinyDate(date);\n    }\n\n    setYear(year: number): TinyDate {\n        return new TinyDate(setYear(this.nativeDate, year));\n    }\n\n    setMonth(month: number): TinyDate {\n        return new TinyDate(setMonth(this.nativeDate, month));\n    }\n\n    setDay(day: number, options?: { weekStartsOn: WeekDayIndex }): TinyDate {\n        return new TinyDate(setDay(this.nativeDate, day, options));\n    }\n\n    // add\n    addYears(amount: number): TinyDate {\n        return new TinyDate(addYears(this.nativeDate, amount));\n    }\n\n    addQuarters(amount: number): TinyDate {\n        return new TinyDate(addQuarters(this.nativeDate, amount));\n    }\n\n    addMonths(amount: number): TinyDate {\n        return new TinyDate(addMonths(this.nativeDate, amount));\n    }\n\n    addWeeks(amount: number): TinyDate {\n        return new TinyDate(addWeeks(this.nativeDate, amount));\n    }\n\n    addDays(amount: number): TinyDate {\n        return new TinyDate(addDays(this.nativeDate, amount));\n    }\n    addHours(amount: number): TinyDate {\n        return new TinyDate(addHours(this.nativeDate, amount));\n    }\n\n    addSeconds(amount: number): TinyDate {\n        return new TinyDate(addSeconds(this.nativeDate, amount));\n    }\n\n    addMinutes(amount: number): TinyDate {\n        return new TinyDate(addMinutes(this.nativeDate, amount));\n    }\n\n    // isSame\n\n    isSame(date: TinyDateType, grain: TinyDateCompareGrain = 'day'): boolean {\n        let fn;\n        switch (grain) {\n            case 'year':\n                fn = isSameYear;\n                break;\n            case 'month':\n                fn = isSameMonth;\n                break;\n            case 'day':\n                fn = isSameDay;\n                break;\n            case 'hour':\n                fn = isSameHour;\n                break;\n            case 'minute':\n                fn = isSameMinute;\n                break;\n            case 'second':\n                fn = isSameSecond;\n                break;\n            default:\n                fn = isSameDay;\n                break;\n        }\n        return fn(this.nativeDate, this.toNativeDate(date));\n    }\n\n    isSameYear(date: TinyDateType): boolean {\n        return this.isSame(date, 'year');\n    }\n\n    isSameMonth(date: TinyDateType): boolean {\n        return this.isSame(date, 'month');\n    }\n\n    isSameDay(date: TinyDateType): boolean {\n        return this.isSame(date, 'day');\n    }\n\n    isSameHour(date: TinyDateType): boolean {\n        return this.isSame(date, 'hour');\n    }\n\n    isSameMinute(date: TinyDateType): boolean {\n        return this.isSame(date, 'minute');\n    }\n\n    isSameSecond(date: TinyDateType): boolean {\n        return this.isSame(date, 'second');\n    }\n\n    // isBefore and isAfter\n    isBeforeYear(date: TinyDateType): boolean {\n        return this.compare(date, 'year');\n    }\n\n    isBeforeMonth(date: TinyDateType): boolean {\n        return this.compare(date, 'month');\n    }\n\n    isBeforeWeek(date: TinyDateType): boolean {\n        return this.compare(date, 'week');\n    }\n\n    isBeforeDay(date: TinyDateType): boolean {\n        return this.compare(date, 'day');\n    }\n\n    isBeforeHour(date: TinyDateType): boolean {\n        return this.compare(date, 'hour');\n    }\n\n    isBeforeMinute(date: TinyDateType): boolean {\n        return this.compare(date, 'minute');\n    }\n\n    isBeforeSecond(date: TinyDateType): boolean {\n        return this.compare(date, 'second');\n    }\n\n    isAfterYear(date: TinyDateType): boolean {\n        return this.compare(date, 'year', false);\n    }\n\n    isAfterMonth(date: TinyDateType): boolean {\n        return this.compare(date, 'month', false);\n    }\n\n    isAfterWeek(date: TinyDateType): boolean {\n        return this.compare(date, 'week', false);\n    }\n\n    isAfterDay(date: TinyDateType): boolean {\n        return this.compare(date, 'day', false);\n    }\n\n    isAfterHour(date: TinyDateType): boolean {\n        return this.compare(date, 'hour', false);\n    }\n\n    isAfterMinute(date: TinyDateType): boolean {\n        return this.compare(date, 'minute', false);\n    }\n\n    isAfterSecond(date: TinyDateType): boolean {\n        return this.compare(date, 'second', false);\n    }\n\n    // is\n    isWeekend() {\n        return isWeekend(this.nativeDate);\n    }\n\n    isToday(): boolean {\n        return isToday(this.nativeDate);\n    }\n\n    isTomorrow(): boolean {\n        return isTomorrow(this.nativeDate);\n    }\n\n    isValid(): boolean {\n        return isValid(this.nativeDate);\n    }\n\n    // startOf and endOf\n    startOfYear(): TinyDate {\n        return new TinyDate(startOfYear(this.nativeDate));\n    }\n\n    startOfQuarter(): TinyDate {\n        return new TinyDate(startOfQuarter(this.nativeDate));\n    }\n\n    startOfMonth(): TinyDate {\n        return new TinyDate(startOfMonth(this.nativeDate));\n    }\n\n    startOfWeek(options?: { locale?: Locale; weekStartsOn?: WeekDayIndex }): TinyDate {\n        return new TinyDate(startOfWeek(this.nativeDate, options));\n    }\n\n    startOfDay(): TinyDate {\n        return new TinyDate(startOfDay(this.nativeDate));\n    }\n\n    endOfYear(): TinyDate {\n        return new TinyDate(endOfYear(this.nativeDate));\n    }\n\n    endOfQuarter(): TinyDate {\n        return new TinyDate(endOfQuarter(this.nativeDate));\n    }\n\n    endOfMonth(): TinyDate {\n        return new TinyDate(endOfMonth(this.nativeDate));\n    }\n\n    endOfWeek(options?: { locale?: Locale; weekStartsOn?: WeekDayIndex }): TinyDate {\n        return new TinyDate(endOfWeek(this.nativeDate, options));\n    }\n\n    endOfDay(): TinyDate {\n        return new TinyDate(endOfDay(this.nativeDate));\n    }\n\n    // other\n    format(\n        mat: string,\n        options?: {\n            locale?: Locale;\n            weekStartsOn?: WeekDayIndex;\n            firstWeekContainsDate?: number;\n            useAdditionalWeekYearTokens?: boolean;\n            useAdditionalDayOfYearTokens?: boolean;\n        }\n    ) {\n        return format(this.nativeDate, mat, options);\n    }\n\n    calendarStart(options?: { weekStartsOn: WeekDayIndex | undefined }): TinyDate {\n        return new TinyDate(startOfWeek(startOfMonth(this.nativeDate), options));\n    }\n\n    clone(): TinyDate {\n        return new TinyDate(new Date(this.nativeDate));\n    }\n\n    getUnixTime(): number {\n        return getUnixTime(this.nativeDate);\n    }\n\n    compare(date: TinyDateType, grain: TinyDateCompareGrain = 'day', isBefore: boolean = true): boolean {\n        if (date === null) {\n            return false;\n        }\n        let fn;\n        switch (grain) {\n            case 'year':\n                fn = differenceInCalendarYears;\n                break;\n            case 'month':\n                fn = differenceInCalendarMonths;\n                break;\n            case 'day':\n                fn = differenceInCalendarDays;\n                break;\n            case 'week':\n                fn = differenceInWeeks;\n                break;\n            case 'hour':\n                fn = differenceInHours;\n                break;\n            case 'minute':\n                fn = differenceInMinutes;\n                break;\n            case 'second':\n                fn = differenceInSeconds;\n                break;\n            default:\n                fn = differenceInCalendarDays;\n                break;\n        }\n        return isBefore ? fn(this.nativeDate, this.toNativeDate(date)) < 0 : fn(this.nativeDate, this.toNativeDate(date)) > 0;\n    }\n\n    private toNativeDate(date: any): Date {\n        return date instanceof TinyDate ? date.nativeDate : date;\n    }\n}\n","import { isDevMode } from '@angular/core';\n\nconst record: Record<string, boolean> = {};\n\nexport const PREFIX = '[NGX-TETHYS]:';\n\nfunction notRecorded(...args: any[]): boolean {\n    const asRecord = args.reduce((acc, c) => acc + c.toString(), '');\n\n    if (record[asRecord]) {\n        return false;\n    } else {\n        record[asRecord] = true;\n        return true;\n    }\n}\n\nfunction consoleCommonBehavior(consoleFunc: (...args: any) => void, ...args: any[]): void {\n    if (isDevMode() && notRecorded(...args)) {\n        consoleFunc(...args);\n    }\n}\n\n// Warning should only be printed in dev mode and only once.\nexport const warn = (...args: any[]) => consoleCommonBehavior((...arg: any[]) => console.warn(PREFIX, ...arg), ...args);\n\nexport function createWarnDeprecation(prefix: string): (...args: any[]) => void {\n    return (...args: any[]) => {\n        const stack = new Error().stack;\n        return consoleCommonBehavior((...arg: any[]) => {\n            console.warn(prefix, 'deprecated:', ...arg, stack);\n        }, ...args);\n    };\n}\n\nexport const warnDeprecation = createWarnDeprecation(PREFIX);\n\n// Log should only be printed in dev mode.\nexport const log = (...args: any[]) => {\n    if (isDevMode()) {\n        console.log(PREFIX, ...args);\n    }\n};\n","import { TemplateRef, ElementRef } from '@angular/core';\nimport { coerceBooleanProperty as coerceBoolean, coerceCssPixelValue as coerceCssPixel, _isNumberValue } from '@angular/cdk/coercion';\nimport { warnDeprecation } from '../logger';\n\nexport function inputValueToBoolean(value: boolean | string): boolean {\n    warnDeprecation(`The method inputValueToBoolean will be deprecated, please use coerceBooleanProperty instead.`);\n    return value === '' || (value && value !== 'false');\n}\n\nexport function isUndefined(value: any): value is undefined {\n    return value === undefined;\n}\n\nexport function isNull(value: any): value is null {\n    return value === null;\n}\n\nexport function isUndefinedOrNull(value: any): value is undefined | null {\n    return isUndefined(value) || isNull(value);\n}\n\nexport function isArray<T = any>(value: any): value is Array<T> {\n    return value && baseGetTag(value) === '[object Array]';\n}\n\nexport function isEmpty(value: any): boolean {\n    return !(isArray(value) && value.length > 0);\n}\n\nexport function isString(value?: any): value is string {\n    return typeof value == 'string' || (!isArray(value) && isObjectLike(value) && baseGetTag(value) === '[object String]');\n}\n\nfunction isObjectLike(value: any): value is object {\n    return value !== null && typeof value === 'object';\n}\n\nfunction baseGetTag(value: any) {\n    const objectProto = Object.prototype;\n    const hasOwnProperty = objectProto.hasOwnProperty;\n    const toString = objectProto.toString;\n    const symToStringTag = typeof Symbol !== 'undefined' ? Symbol.toStringTag : undefined;\n\n    if (value == null) {\n        return value === undefined ? '[object Undefined]' : '[object Null]';\n    }\n    if (!(symToStringTag && symToStringTag in Object(value))) {\n        return toString.call(value);\n    }\n    const isOwn = hasOwnProperty.call(value, symToStringTag);\n    const tag = value[symToStringTag];\n    let unmasked = false;\n    try {\n        value[symToStringTag] = undefined;\n        unmasked = true;\n    } catch (e) {}\n\n    const result = toString.call(value);\n    if (unmasked) {\n        if (isOwn) {\n            value[symToStringTag] = tag;\n        } else {\n            delete value[symToStringTag];\n        }\n    }\n    return result;\n}\n\nexport function isNumber(value: any): value is number {\n    return typeof value === 'number' || (isObjectLike(value) && baseGetTag(value) === '[object Number]');\n}\n\nexport function isObject(value: any): value is object {\n    // Avoid a V8 JIT bug in Chrome 19-20.\n    // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n    const type = typeof value;\n    return !!value && (type === 'object' || type === 'function');\n}\n\nexport function isFunction(value: any): value is Function {\n    const type = typeof value;\n    return !!value && type === 'function';\n}\n\nexport function isDate(value: any): value is Date {\n    const type = typeof value;\n    return !!value && type === 'object' && !!value.getTime;\n}\n\nexport function coerceArray<T>(value: T | T[]): T[] {\n    return Array.isArray(value) ? value : [value];\n}\n\nexport function get(object: any, path: string, defaultValue?: any): any {\n    const paths = path.split('.');\n    let result = object[paths.shift()];\n    while (result && paths.length) {\n        result = result[paths.shift()];\n    }\n    return result === undefined ? defaultValue : result;\n}\n\nexport function set(object: any, path: string, value: any): void {\n    if (object == null) {\n        return object;\n    }\n    const paths = path.split('.');\n    let index = -1;\n    const length = paths.length;\n    const lastIndex = length - 1;\n    let nested = object;\n    while (nested !== null && ++index < length) {\n        const key = paths[index];\n        if (isObject(nested)) {\n            if (index === lastIndex) {\n                nested[key] = value;\n                nested = nested[key];\n                break;\n            } else {\n                if (nested[key] == null) {\n                    nested[key] = {};\n                }\n            }\n        }\n        nested = nested[key];\n    }\n    return object;\n}\n\nexport function isBoolean(value: any): value is boolean {\n    return value === true || value === false || (isObjectLike(value) && baseGetTag(value) === '[object Boolean]');\n}\n\nexport function fromArray(value: any): any[] {\n    if (Array.from && isFunction(Array.from)) {\n        return Array.from(value);\n    } else {\n        return Array.prototype.slice.call(value);\n    }\n}\n\nexport function htmlElementIsEmpty(element: HTMLElement) {\n    if (element && element.childNodes) {\n        const nodes = element.childNodes;\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (node.nodeType === Node.ELEMENT_NODE && (node as HTMLElement).outerHTML.toString().trim().length !== 0) {\n                return false;\n            } else if (node.nodeType === Node.TEXT_NODE && node.textContent.toString().trim().length !== 0) {\n                return false;\n            } else if (node.nodeType !== Node.COMMENT_NODE) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nexport function hexToRgb(hexValue: string, alpha?: number): string {\n    const rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    const hex = hexValue.replace(rgx, (m: any, r: any, g: any, b: any) => r + r + g + g + b + b);\n    const rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    const resultR = parseInt(rgb[1], 16);\n    const resultG = parseInt(rgb[2], 16);\n    const resultB = parseInt(rgb[3], 16);\n    if (alpha) {\n        return `rgba(${resultR}, ${resultG}, ${resultB}, ${alpha})`;\n    } else {\n        return `rgb(${resultR}, ${resultG}, ${resultB})`;\n    }\n}\n\nexport function formatDate(date: Date | number): number {\n    if (isNumber(date)) {\n        if (date.toString().length === 10) {\n            return date as number;\n        } else {\n            return parseInt(((date as number) / 1000).toFixed(0), 10);\n        }\n    } else {\n        return parseInt(((date as Date).getTime() / 1000).toFixed(0), 10);\n    }\n}\n\nexport function clamp(value: number, min = 0, max = 100) {\n    return Math.max(min, Math.min(max, value));\n}\n\nexport function keyBy<T>(array: T[], key: T extends object ? keyof T : never): { [key: string]: T } {\n    const result: { [key: string]: T } = {};\n    array.forEach(item => {\n        const keyValue = item[key];\n        (result as any)[keyValue] = item;\n    });\n    return result;\n}\n\nexport function indexKeyBy<T>(array: T[], key: T extends object ? keyof T : never): { [key: string]: number } {\n    const result: { [key: string]: number } = {};\n    array.forEach((item, index) => {\n        const keyValue = item[key];\n        (result as any)[keyValue] = index;\n    });\n    return result;\n}\n\nfunction upperFirst(string: string): string {\n    return string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nexport function camelCase(values: string[]): string {\n    if (isArray(values)) {\n        return values.reduce((result, word, index) => {\n            word = word.toLowerCase();\n            return result + (index ? upperFirst(word) : word);\n        }, '');\n    } else {\n        return;\n    }\n}\n\nexport function generateRandomStr() {\n    return Math.random()\n        .toString(36)\n        .substring(2);\n}\n\nexport function isTemplateRef<C = any>(value: any): value is TemplateRef<C> {\n    return value instanceof TemplateRef;\n}\n\nexport function isHTMLElement(value: any): value is HTMLElement {\n    return value instanceof HTMLElement;\n}\n\nexport function isElementRef(value: any): value is ElementRef {\n    return value instanceof ElementRef;\n}\n\nexport function coerceBooleanProperty(value: boolean | string | number): boolean {\n    if (value === '' || (value && value !== 'false')) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nexport type FunctionProp<T> = (...args: any[]) => T;\n\nexport function coerceNumberValue(value: number | string): number;\nexport function coerceNumberValue<D>(value: number | string, fallback: D): number | D;\nexport function coerceNumberValue(value: number | string, fallbackValue: number = 0): number {\n    return _isNumberValue(value) ? Number(value) : fallbackValue;\n}\n\nexport function coerceCssPixelValue(value: number | string): string {\n    return coerceCssPixel(value);\n}\n\nexport function valueFunctionProp<T>(prop: FunctionProp<T>, ...args: any[]): T {\n    return typeof prop === 'function' ? prop(...args) : prop;\n}\n\nexport function shallowEqual(objA?: Record<string, any>, objB?: Record<string, any>): boolean {\n    if (objA === objB) {\n        return true;\n    }\n\n    if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n        return false;\n    }\n\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n\n    const bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n    // tslint:disable-next-line:prefer-for-of\n    for (let idx = 0; idx < keysA.length; idx++) {\n        const key = keysA[idx];\n        if (!bHasOwnProperty(key)) {\n            return false;\n        }\n        if (objA[key] !== objB[key]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nexport function concatArray<TItem>(items: TItem | TItem[], originalItems: TItem | TItem[] = []): TItem[] {\n    let _originalItems: TItem[] = [];\n    if (!originalItems) {\n        _originalItems = [];\n    } else {\n        _originalItems = coerceArray(originalItems);\n    }\n    if (items) {\n        if (isArray(items)) {\n            return [..._originalItems, ...items];\n        } else {\n            return [..._originalItems, items];\n        }\n    } else {\n        return _originalItems;\n    }\n}\n","import { ElementRef } from '@angular/core';\nimport * as helpers from './helpers';\n\nconst proto = Element.prototype;\nconst vendor =\n    proto.matches ||\n    (proto as any).matchesSelector ||\n    proto.webkitMatchesSelector ||\n    (proto as any).mozMatchesSelector ||\n    (proto as any).msMatchesSelector ||\n    (proto as any).oMatchesSelector;\n\n/**\n * Match `el` to `selector`.\n */\nexport function match(el: any, selector: string) {\n    if (vendor) {\n        return vendor.call(el, selector);\n    }\n    const nodes = el.parentNode.querySelectorAll(selector);\n    for (let i = 0; i < nodes.length; i++) {\n        if (nodes[i] === el) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport function isDocument(element: any) {\n    return (\n        (typeof HTMLDocument !== 'undefined' && element instanceof HTMLDocument) ||\n        (element.nodeType && element.nodeType === element.DOCUMENT_NODE)\n    );\n}\n\nexport function isElement(element: any) {\n    return (\n        (typeof HTMLElement !== 'undefined' && element instanceof HTMLElement) ||\n        (element.nodeType && element.nodeType === element.ELEMENT_NODE)\n    );\n}\n\nexport function getWindow(elem: any) {\n    return elem != null && elem === elem.window ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\nexport function getElementOffset(elem: HTMLElement) {\n    let docElem, win, rect, doc;\n\n    if (!elem) {\n        return;\n    }\n    // Support: IE<=11+\n    // Running getBoundingClientRect on a\n    // disconnected node in IE throws an error\n    if (!elem.getClientRects().length) {\n        return { top: 0, left: 0 };\n    }\n    rect = elem.getBoundingClientRect();\n\n    // Make sure element is not hidden (display: none)\n    if (rect.width || rect.height) {\n        doc = elem.ownerDocument;\n        win = getWindow(doc);\n        docElem = doc.documentElement;\n\n        return {\n            top: rect.top + win.pageYOffset - docElem.clientTop,\n            left: rect.left + win.pageXOffset - docElem.clientLeft,\n            height: rect.height,\n            width: rect.width\n        };\n    }\n    return rect;\n}\n\nexport function getOffset(element: HTMLElement, container: HTMLElement | Window): { left: number; top: number } | null {\n    if (!element || !element.getClientRects().length) {\n        return null;\n    }\n    const rect = element.getBoundingClientRect();\n\n    if (rect.width || rect.height) {\n        if (container === window) {\n            const documentElement = element.ownerDocument!.documentElement!;\n            return {\n                top: rect.top - documentElement.clientTop,\n                left: rect.left - documentElement.clientLeft\n            };\n        }\n        const containerRect = (container as HTMLElement).getBoundingClientRect();\n        return {\n            top: rect.top - containerRect.top,\n            left: rect.left - containerRect.left\n        };\n    }\n\n    return rect;\n}\n\nexport function getElementOuterHeight(element: any) {\n    const _element = element.documentElement ? element.documentElement : element;\n    let height = _element.clientHeight;\n    const computedStyle = window.getComputedStyle(_element);\n    height += parseInt(computedStyle.marginTop, 10);\n    height += parseInt(computedStyle.marginBottom, 10);\n    return height;\n}\n\nexport type ElementSelector = HTMLElement | ElementRef | string;\n\nexport function getHTMLElementBySelector(selector: ElementSelector, defaultElementRef: ElementRef): HTMLElement {\n    if (!selector) {\n        return defaultElementRef.nativeElement;\n    } else if (selector === 'body') {\n        return document.body;\n    } else if (helpers.isString(selector)) {\n        return document.querySelector(selector as string);\n    } else if (selector instanceof ElementRef) {\n        return selector.nativeElement;\n    } else {\n        return selector as HTMLElement;\n    }\n}\n\nexport function isInputOrTextarea(element: HTMLElement) {\n    return ['INPUT', 'TEXTAREA'].indexOf(element.nodeName) >= 0;\n}\n\nexport function isWindow(container: Element | Window): container is Window {\n    return typeof window !== 'undefined' && container === window;\n}\n\nexport interface SimpleRect {\n    top: number;\n    left: number;\n    width?: number;\n    height?: number;\n    bottom?: number;\n}\n\nexport function getContainerRect(container: Element | Window): SimpleRect {\n    return !isWindow(container)\n        ? container.getBoundingClientRect()\n        : {\n              top: 0,\n              left: 0,\n              bottom: 0\n          };\n}\n\nexport function getStyleAsText(styles?: any): string {\n    if (!styles) {\n        return '';\n    }\n\n    return Object.keys(styles)\n        .map(key => {\n            const val = styles[key];\n            return `${key}:${typeof val === 'string' ? val : val + 'px'}`;\n        })\n        .join(';');\n}\n\nexport function isTouchEvent(event: MouseEvent | TouchEvent): event is TouchEvent {\n    return event.type.startsWith('touch');\n}\n","import { Id } from 'ngx-tethys/types';\nimport { coerceArray, isFunction, isUndefinedOrNull } from './helpers';\n\nexport interface EntityAddOptions {\n    prepend?: boolean;\n\n    afterId?: string;\n}\n\nexport interface EntityMoveOptions {\n    afterId?: string;\n\n    toIndex?: number;\n}\n\nexport interface ProducerOptions {\n    idKey?: string;\n}\n\nexport class Producer<TEntity> {\n    private idKey = '_id';\n\n    private entities: TEntity[];\n\n    constructor(entities: TEntity[], options?: ProducerOptions) {\n        this.entities = entities || [];\n        if (options && options.idKey) {\n            this.idKey = options.idKey;\n        }\n    }\n\n    /**\n     * Add an entity or entities.\n     *\n     * @example\n     * produce([users]).add(Entity);\n     * produce([users]).add([Entity, Entity]);\n     * produce([users]).add(Entity, { prepend: true });\n     * produce([users]).add(Entity, { afterId: '' });\n     */\n    add(entity: TEntity | TEntity[], addOptions?: EntityAddOptions): TEntity[] {\n        const addEntities = coerceArray(entity);\n        if (addEntities.length === 0) {\n            return this.entities;\n        }\n        if (addOptions && (addOptions.afterId || addOptions.prepend)) {\n            if (addOptions.afterId) {\n                const entities = [...this.entities];\n                const index =\n                    this.entities.findIndex(item => {\n                        return item[this.idKey] === addOptions.afterId;\n                    }) + 1;\n                entities.splice(index, 0, ...addEntities);\n                this.entities = [...entities];\n            } else if (addOptions.prepend) {\n                this.entities = [...addEntities, ...this.entities];\n            }\n        } else {\n            this.entities = [...this.entities, ...addEntities];\n        }\n        return this.entities;\n    }\n\n    /**\n     *\n     * Update an entity or entities.\n     *\n     * @example\n     * produce([users]).update(3, {\n     *   name: 'New Name'\n     * });\n     *\n     * produce([users]).update(3, entity => {\n     *    return {\n     *      ...entity,\n     *      name: 'New Name'\n     *    }\n     *  });\n     *\n     * produce([users]).update([1,2,3], {\n     *   name: 'New Name'\n     * });\n     */\n    update(id: Id | Id[] | null, newStateFn: (entity: Readonly<TEntity>) => Partial<TEntity>): TEntity[];\n    update(id: Id | Id[] | null, newState?: Partial<TEntity>): TEntity[];\n    update(\n        idsOrFn: Id | Id[] | null | Partial<TEntity> | ((entity: Readonly<TEntity>) => boolean),\n        newStateOrFn?: ((entity: Readonly<TEntity>) => Partial<TEntity>) | Partial<TEntity>\n    ): TEntity[] {\n        const ids = coerceArray(idsOrFn);\n\n        for (let i = 0; i < this.entities.length; i++) {\n            const oldEntity = this.entities[i];\n            if (ids.indexOf(oldEntity[this.idKey]) >= 0) {\n                const newState = isFunction(newStateOrFn) ? (newStateOrFn as any)(oldEntity) : newStateOrFn;\n                this.entities[i] = { ...(oldEntity as any), ...newState };\n            }\n        }\n        return [...this.entities];\n    }\n\n    /**\n     *\n     * Remove one or more entities:\n     *\n     * @example\n     * produce([users]).remove(5);\n     * produce([users]).remove([1,2,3]);\n     * produce([users]).remove(entity => entity.id === 1);\n     */\n    remove(id: Id | Id[]): TEntity[];\n    remove(predicate: (entity: Readonly<TEntity>) => boolean): TEntity[];\n    remove(idsOrFn?: Id | Id[] | ((entity: Readonly<TEntity>) => boolean)): TEntity[] {\n        if (isFunction(idsOrFn)) {\n            this.entities = this.entities.filter(entity => {\n                return !(idsOrFn as any)(entity);\n            });\n        } else {\n            const ids = coerceArray(idsOrFn);\n            this.entities = this.entities.filter(entity => {\n                return ids.indexOf(entity[this.idKey]) === -1;\n            });\n        }\n        return this.entities;\n    }\n\n    /**\n     *\n     * Move one or more entities:\n     *\n     * @example\n     * produce([users]).move(5, {afterId: 2});\n     * produce([users]).move(5, {toIndex: 0});\n     */\n    move(id: Id, moveOptions?: EntityMoveOptions): TEntity[] {\n        const fromIndex = this.entities.findIndex(item => item[this.idKey] === id);\n        let toIndex = 0;\n        const newEntities = [...this.entities];\n\n        if (!id || fromIndex < 0) {\n            return [...this.entities];\n        }\n\n        if (moveOptions) {\n            if (!isUndefinedOrNull(moveOptions.afterId)) {\n                toIndex = this.entities.findIndex(item => item[this.idKey] === moveOptions.afterId);\n            } else if (moveOptions.toIndex) {\n                toIndex = moveOptions.toIndex;\n            }\n        }\n        toIndex = Math.max(0, Math.min(this.entities.length - 1, toIndex));\n        if (toIndex === fromIndex) {\n            return [...this.entities];\n        } else {\n            const target = this.entities[fromIndex];\n            const delta = toIndex < fromIndex ? -1 : 1;\n\n            for (let i = fromIndex; i !== toIndex; i += delta) {\n                newEntities[i] = newEntities[i + delta];\n            }\n            newEntities[toIndex] = target;\n            return [...newEntities];\n        }\n    }\n}\n\nexport function produce<TEntity>(entities: TEntity[], options?: ProducerOptions) {\n    return new Producer(entities, options);\n}\n","import { keyBy, indexKeyBy } from './helpers';\n\n// 抽取数据中的Item类型，不是数组直接返回对象的类型\nexport type ArrayInferExtract<T> = T extends Array<infer P> ? P : T;\nexport type ArrayAlwaysExtract<T> = T extends Array<infer P> ? P : never;\n// 抽取 References 中 Object 类型, 如果是数组取数组 Item 类型\nexport type ReferenceObjectExtract<T> = {\n    [key in keyof T]: ArrayInferExtract<T[key]> extends object ? ArrayInferExtract<T[key]> : never\n};\n// 收取 References 中所有的属性 Names，如果ArrayInferExtract不是对象，返回 never\nexport type ReferenceExtractNames<T> = { [key in keyof T]: ArrayInferExtract<T[key]> extends object ? key : never };\nexport type ReferenceArrayExtractNames<T> = { [key in keyof T]: T[key] extends Array<object> ? key : never };\n// 排除 ReferenceExtractNames 抽取 Names 中的 never，只保留是对象的 Names\nexport type ReferenceExtractAllowNames<T> = {\n    [key in ReferenceExtractNames<T>[keyof T]]: ReferenceExtractNames<T>[key]\n};\nexport type ReferenceArrayExtractAllowNames<T> = {\n    [key in ReferenceArrayExtractNames<T>[keyof T]]: ReferenceExtractNames<T>[key]\n};\n\n/**\n * 根据 ReferenceExtractAllowKeys 抽取出的 Object Keys 组合新的对象\n * @example ReferenceExtractAllowKeys<{\n    users: { uid: string; name: string }[];\n    info: { id: number; name: string };\n    departments: { dept: number }[];\n    ids: string[];\n    id: string;\n  }> => {\n      users: \"uid\" | \"name\",\n      info: \"id\" | \"name\",\n      departments: \"dept\"\n\n  }\n */\nexport type ReferenceExtractAllowKeys<T> = {\n    [key in keyof ReferenceExtractAllowNames<T>]?: keyof ReferenceObjectExtract<T>[key]\n};\n// 只允许 reference 是 Array 的 Keys\nexport type ReferenceArrayExtractAllowKeys<T> = {\n    [key in keyof ReferenceArrayExtractAllowNames<T>]?: keyof ReferenceObjectExtract<T>[key]\n};\n\nfunction getReferenceIdKey<TReferences>(referenceKey: string, idKeys: ReferenceArrayExtractAllowKeys<TReferences>) {\n    if (idKeys && idKeys[referenceKey]) {\n        return idKeys[referenceKey];\n    } else {\n        return '_id';\n    }\n}\n\n/**\n * Append references to original references\n * @example\n * mergeReferences({departments: [{ _id: '1', name: 'name-1'}]}, {departments: [{ _id: '3', name: 'name-3'}]})\n * mergeReferences({users: [{ uid: '1', name: 'name-1'}]}, {users: [{ uid: '3', name: 'name-3'}]}, { users: \"uid\" })\n * @param originalReferences original references\n * @param references append references\n * @param idKeys references 's id key, default is '_id'\n *\n * @returns TReferences\n */\nexport function mergeReferences<TReferences>(\n    originalReferences: TReferences,\n    references: Partial<TReferences>,\n    idKeys?: ReferenceArrayExtractAllowKeys<TReferences>\n): TReferences {\n    for (const key in references) {\n        if (references.hasOwnProperty(key)) {\n            const reference = references[key];\n            const referenceIdKey = getReferenceIdKey<TReferences>(key, idKeys);\n            const originalReference = originalReferences[key];\n            if (!originalReference) {\n                throw new Error(`original reference must exist when append new reference: ${key}`);\n            }\n            if (originalReference instanceof Array) {\n                // original reference id index map\n                const originalReferenceIdIndexMap = indexKeyBy<ReferenceExtractAllowKeys<TReferences>>(\n                    originalReferences[key] as any,\n                    referenceIdKey\n                );\n                // append reference is array\n                if (reference instanceof Array) {\n                    reference.forEach((item: TReferences[Extract<keyof TReferences, string>]) => {\n                        const itemId = item[referenceIdKey];\n                        const index = originalReferenceIdIndexMap[itemId];\n                        if (index >= 0) {\n                            originalReference[index] = { ...originalReference[index], ...item };\n                        } else {\n                            (originalReferences as any)[key] = [...(originalReferences[key] as any), item];\n                        }\n                    });\n                } else {\n                    // append reference is not array, support append signal object to array reference\n                    const itemId = reference[referenceIdKey];\n                    const index = originalReferenceIdIndexMap[itemId];\n                    if (itemId >= 0) {\n                        originalReference[index] = { ...originalReference[index], ...reference };\n                    } else {\n                        (originalReferences as any)[key] = [...(originalReferences[key] as any), reference];\n                    }\n                }\n            } else {\n                originalReferences[key] = { ...originalReferences[key], ...reference };\n            }\n        }\n    }\n\n    return originalReferences;\n}\n\n/**\n * Build dictionary for references\n * @param references references\n * @param idKeys references 's id key, default is '_id'\n */\nexport function buildReferencesKeyBy<TReferences>(\n    references: Partial<TReferences>,\n    idKeys?: Partial<ReferenceArrayExtractAllowKeys<TReferences>>\n) {\n    const result: { [key in keyof TReferences]?: { [key: string]: ArrayInferExtract<TReferences[key]> } } = {};\n    for (const key in references) {\n        if (references.hasOwnProperty(key)) {\n            const referenceIdKey = getReferenceIdKey<TReferences>(key, idKeys);\n            const reference = references[key];\n            if (reference instanceof Array) {\n                const originalReferenceIdMap = keyBy<ArrayInferExtract<TReferences>>(reference, referenceIdKey);\n                (result as any)[key] = originalReferenceIdMap;\n            }\n        }\n    }\n    return result;\n}\n"]}