{"version":3,"file":"ngx-tethys-empty.umd.js","sources":["../../src/empty/empty.config.ts","../../src/empty/empty.component.ts","../../src/empty/empty.module.ts","../../src/empty/ngx-tethys-empty.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class ThyEmptyConfig {\n    noResultTranslateKey = 'common.tips.NO_RESULT';\n    noResultWithTargetTranslateKey = 'common.tips.NO_RESULT_TARGET';\n}\n\n","import { ThyTranslate } from 'ngx-tethys/core';\nimport { coerceBooleanProperty } from 'ngx-tethys/util';\n\nimport {\n    AfterViewInit,\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    Input,\n    NgZone,\n    OnInit,\n    Renderer2,\n    TemplateRef\n} from '@angular/core';\n\nimport { ThyEmptyConfig } from './empty.config';\n\nconst sizeClassMap: any = {\n    lg: ['thy-empty-state', 'thy-empty-state--lg'],\n    md: ['thy-empty-state'],\n    sm: ['thy-empty-state', 'thy-empty-state--sm']\n};\nconst sizeMap: any = {\n    lg: {\n        height: 168, // 空提示的高度\n        offsetTop: 30, // 空提示图标和大小之间的空白距离，需要除去，否则会不居中\n        defaultMarginTop: 120 // 不自动计算默认的 top 距离\n    },\n    md: {\n        height: 118,\n        offsetTop: 20,\n        defaultMarginTop: 10\n    },\n    sm: {\n        height: 78,\n        offsetTop: 10,\n        defaultMarginTop: 10\n    }\n};\n\n@Component({\n    selector: 'thy-empty',\n    templateUrl: './empty.component.html'\n})\nexport class ThyEmptyComponent implements OnInit, AfterViewInit {\n    @HostBinding('class') sizeClass = sizeClassMap['md'].join(' ');\n\n    // 显示的文本，优先级 100 最高\n    @Input() thyMessage: string;\n\n    // 显示文本的多语言 Key 优先级 99\n    @Input() thyTranslationKey: string;\n\n    @Input() thyTranslationValues: any;\n\n    // 显示默认提示信息，替换目标名称\n    @Input() thyEntityName: string;\n\n    // 显示默认提示信息，替换目标名称的 translateKey\n    @Input() thyEntityNameTranslateKey: string;\n\n    @Input() thyIconName: string;\n\n    @Input()\n    set thySize(value: string) {\n        const classList = sizeClassMap[value || 'md'];\n        if (classList) {\n            this.sizeClass = classList.join(' ');\n        }\n    }\n\n    @Input() thyMarginTop: number | string;\n\n    @Input() thyTopAuto: boolean;\n\n    @Input() thyContainer: ElementRef;\n\n    @Input() thyImageUrl: string;\n\n    @Input() thyDescription: string;\n\n    @ContentChild('extra') extraTemplateRef: TemplateRef<any>;\n\n    get displayText() {\n        if (this.thyMessage) {\n            return this.thyMessage;\n        } else if (this.thyTranslationKey) {\n            return this.thyTranslate.instant(this.thyTranslationKey, this.thyTranslationValues);\n        } else if (this.thyEntityName) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyEntityName\n            });\n        } else if (this.thyEntityNameTranslateKey) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyTranslate.instant(this.thyEntityNameTranslateKey)\n            });\n        } else {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultTranslateKey);\n        }\n    }\n\n    _calculatePosition() {\n        const sizeOptions = sizeMap[this.thySize || 'md'];\n        const topAuto = coerceBooleanProperty(this.thyTopAuto);\n        let marginTop = null;\n        if (topAuto) {\n            // 选择参考父容器居中\n            const containerElement = this.thyContainer ? this.thyContainer.nativeElement : this.elementRef.nativeElement.parentElement;\n            // containerElement.height;\n            let emptyStateHeight = this.elementRef.nativeElement.offsetHeight;\n            // 高度没有自动计算出来使用默认值\n            if (emptyStateHeight <= 10) {\n                emptyStateHeight = sizeOptions.height;\n            }\n            marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2 - sizeOptions.offsetTop;\n            // marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2;\n            if (marginTop < 0) {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        } else {\n            if (this.thyMarginTop) {\n                marginTop = this.thyMarginTop;\n            } else {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        }\n        if (marginTop) {\n            this.renderer.setStyle(this.elementRef.nativeElement, 'marginTop', marginTop + 'px');\n        }\n    }\n    constructor(\n        private thyTranslate: ThyTranslate,\n        private thyEmptyConfig: ThyEmptyConfig,\n        private elementRef: ElementRef,\n        private renderer: Renderer2,\n        private ngZone: NgZone\n    ) {}\n\n    ngOnInit() {}\n\n    ngAfterViewInit() {\n        this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                this._calculatePosition();\n            }, 50);\n        });\n    }\n}\n","import { ThyIconModule } from 'ngx-tethys/icon';\nimport { ThySharedModule } from 'ngx-tethys/shared';\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { ThyEmptyComponent } from './empty.component';\nimport { ThyEmptyConfig } from './empty.config';\n\n@NgModule({\n    declarations: [ThyEmptyComponent],\n    imports: [CommonModule, ThySharedModule, ThyIconModule],\n    exports: [ThyEmptyComponent],\n    providers: [ThyEmptyConfig]\n})\nexport class ThyEmptyModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Injectable","coerceBooleanProperty","Component","ThyTranslate","ElementRef","Renderer2","NgZone","HostBinding","Input","ContentChild","NgModule","CommonModule","ThySharedModule","ThyIconModule"],"mappings":"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"}