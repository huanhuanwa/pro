{"version":3,"file":"ngx-tethys-flexible-text.umd.js","sources":["../../src/flexible-text/flexible-text.component.ts","../../src/flexible-text/flexible-text.module.ts","../../src/flexible-text/ngx-tethys-flexible-text.ts"],"sourcesContent":["import { Component, Input, TemplateRef, ElementRef, OnInit, ViewContainerRef, OnDestroy, AfterContentInit } from '@angular/core';\nimport { timer, Subject, Subscription } from 'rxjs';\nimport { TooltipService } from 'ngx-tethys/tooltip';\nimport { UpdateHostClassService } from 'ngx-tethys/core';\nimport { ContentObserver } from '@angular/cdk/observers';\nimport { debounceTime } from 'rxjs/operators';\nimport { ThyPlacement } from 'ngx-tethys/core';\nimport { isUndefinedOrNull } from 'ngx-tethys/util';\n\n@Component({\n    selector: 'thy-flexible-text,[thyFlexibleText]',\n    exportAs: 'thyFlexibleText',\n    templateUrl: './flexible-text.component.html',\n    providers: [TooltipService, UpdateHostClassService]\n})\nexport class ThyFlexibleTextComponent implements OnInit, AfterContentInit, OnDestroy {\n    isOverflow = false;\n\n    content: string | TemplateRef<HTMLElement>;\n\n    placement: ThyPlacement;\n\n    containerClass: string;\n\n    subscription: Subscription | null = null;\n\n    @Input('thyTooltipTrigger') trigger: 'hover' | 'focus' | 'click';\n\n    @Input('thyContainerClass')\n    get thyContainerClass(): string {\n        return this.containerClass;\n    }\n\n    set thyContainerClass(value: string) {\n        this.containerClass = value;\n        this.updateContainerClass();\n    }\n\n    @Input('thyTooltipContent') set thyContent(value: string | TemplateRef<HTMLElement>) {\n        this.content = value;\n        if (this.tooltipService.thyTooltipDirective) {\n            this.tooltipService.thyTooltipDirective.content = this.content;\n        }\n    }\n\n    @Input('thyTooltipPlacement') set thyPlacement(value: ThyPlacement) {\n        this.placement = value;\n        if (this.tooltipService.thyTooltipDirective) {\n            this.tooltipService.thyTooltipDirective.placement = this.placement;\n        }\n    }\n\n    constructor(\n        private elementRef: ElementRef,\n        private viewContainerRef: ViewContainerRef,\n        public tooltipService: TooltipService,\n        private updateHostClassService: UpdateHostClassService,\n        private contentObserver: ContentObserver\n    ) {\n        this.updateHostClassService.initializeElement(this.elementRef);\n    }\n\n    ngOnInit() {\n        this.updateContainerClass();\n        this.tooltipService.attach(this.elementRef, this.viewContainerRef, this.trigger);\n        if (this.placement) {\n            this.tooltipService.thyTooltipDirective.placement = this.placement;\n        }\n        this.tooltipService.thyTooltipDirective.content = this.content;\n        this.tooltipService.thyTooltipDirective.thyTooltipDisabled = true;\n    }\n\n    ngAfterContentInit() {\n        this.applyOverflow();\n        this.subscription = this.contentObserver\n            .observe(this.elementRef)\n            .pipe(debounceTime(100))\n            .subscribe((value: MutationRecord[]) => {\n                this.applyOverflow();\n            });\n    }\n\n    ngOnDestroy() {\n        this.tooltipService.detach();\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n\n    applyOverflow() {\n        const nativeElement = this.elementRef.nativeElement;\n        if (nativeElement.clientWidth < nativeElement.scrollWidth) {\n            this.isOverflow = true;\n        } else {\n            this.isOverflow = false;\n        }\n        this.tooltipService.thyTooltipDirective.thyTooltipDisabled = !this.isOverflow;\n    }\n\n    updateContainerClass() {\n        const containerClass = isUndefinedOrNull(this.containerClass) ? 'flexible-text-container' : this.containerClass;\n        const flexibleTextClass = {\n            'text-truncate': true,\n            [containerClass]: containerClass !== ''\n        };\n        this.updateHostClassService.updateClassByMap(flexibleTextClass);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThyFlexibleTextComponent } from './flexible-text.component';\nimport { ThyTooltipModule } from 'ngx-tethys/tooltip';\nimport { ObserversModule } from '@angular/cdk/observers';\n\n@NgModule({\n    declarations: [ThyFlexibleTextComponent],\n    imports: [CommonModule, ThyTooltipModule, ObserversModule],\n    exports: [ThyFlexibleTextComponent]\n})\nexport class ThyFlexibleTextModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["debounceTime","isUndefinedOrNull","Component","TooltipService","UpdateHostClassService","ElementRef","ViewContainerRef","ContentObserver","Input","NgModule","CommonModule","ThyTooltipModule","ObserversModule"],"mappings":"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"}