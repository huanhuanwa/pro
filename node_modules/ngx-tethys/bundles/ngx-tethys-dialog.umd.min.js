!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("ngx-tethys/button"),require("ngx-tethys/form"),require("ngx-tethys/icon"),require("ngx-tethys/shared"),require("rxjs"),require("ngx-tethys/core"),require("@angular/animations"),require("@angular/cdk/a11y"),require("rxjs/operators"),require("@angular/cdk/bidi"),require("ngx-tethys/util")):"function"==typeof define&&define.amd?define("ngx-tethys/dialog",["exports","@angular/cdk/overlay","@angular/cdk/portal","@angular/common","@angular/core","@angular/forms","ngx-tethys/button","ngx-tethys/form","ngx-tethys/icon","ngx-tethys/shared","rxjs","ngx-tethys/core","@angular/animations","@angular/cdk/a11y","rxjs/operators","@angular/cdk/bidi","ngx-tethys/util"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-tethys"]=t["ngx-tethys"]||{},t["ngx-tethys"].dialog={}),t.ng.cdk.overlay,t.ng.cdk.portal,t.ng.common,t.ng.core,t.ng.forms,t["ngx-tethys"].button,t["ngx-tethys"].form,t["ngx-tethys"].icon,t["ngx-tethys"].shared,t.rxjs,t["ngx-tethys"].core,t.ng.animations,t.ng.cdk.a11y,t.rxjs.operators,t.ng.cdk.bidi,t["ngx-tethys"].util)}(this,(function(t,e,o,n,i,r,a,s,l,c,u,p,d,y,g,h,f){"use strict";function m(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:function(){return t[o]}})}})),e.default=t,Object.freeze(e)}var v=m(e),C=m(i),T=m(p),b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};function O(t,e){function o(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}Object.create;function D(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return a}function I(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(D(arguments[e]));return t}var x;Object.create;t.ThyDialogSizes=void 0,(x=t.ThyDialogSizes||(t.ThyDialogSizes={})).lg="lg",x.supperLg="supper-lg",x.maxLg="max-lg",x.md="md",x.sm="sm",x.full="full";var P=function(t){function e(){var e=t.apply(this,I(arguments))||this;return e.role="dialog",e}return O(e,t),e}(p.ThyAbstractOverlayConfig),j=new i.InjectionToken("thy-dialog-default-options"),k={role:"dialog",hasBackdrop:!0,backdropClass:"",panelClass:"",backdropClosable:!0,closeOnNavigation:!0,autoFocus:!0,restoreFocus:!0},S={provide:j,useValue:k},A=function(){},_=new i.InjectionToken("thy-dialog-layout-config"),R={footerAlign:"left",footerDivided:!1},L={provide:_,useValue:R},E=[d.state("void, exit",d.style({opacity:0,transform:"scale(0.1)"})),d.state("enter",d.style({transform:"none"})),d.transition("* => enter",d.animate("200ms cubic-bezier(0, 0, 0.57, 1)",d.style({transform:"none",opacity:1}))),d.transition("* => exit",d.animate("150ms cubic-bezier(0.24, 0.18, 0.96, 0.52)",d.style({transform:"scale(0.3)",opacity:0})))],F={dialogContainer:d.trigger("dialogContainer",E)},H={name:"dialog",animationEnabled:!0,disposeWhenClose:!0},B=function(t){function e(e,o,n,r,a,s){var l=t.call(this,H,r)||this;return l.elementRef=e,l.document=o,l.config=n,l.clickPositioner=a,l.focusTrapFactory=s,l.animationState="void",l.animationStateChanged=new i.EventEmitter,l.ariaLabelledBy=null,l.elementFocusedBeforeDialogWasOpened=null,l.animationOpeningDone=l.animationStateChanged.pipe(g.filter((function(t){return"done"===t.phaseName&&"void"===t.toState}))),l.animationClosingDone=l.animationStateChanged.pipe(g.filter((function(t){return"done"===t.phaseName&&"exit"===t.toState}))),l}return O(e,t),e.prototype.savePreviouslyFocusedElement=function(){var t=this;this.document&&(this.elementFocusedBeforeDialogWasOpened=this.document.activeElement,this.elementRef.nativeElement.focus&&Promise.resolve().then((function(){return t.elementRef.nativeElement.focus()})))},e.prototype.trapFocus=function(){var t=this.elementRef.nativeElement;if(this.focusTrap||(this.focusTrap=this.focusTrapFactory.create(t)),this.config.autoFocus)this.focusTrap.focusInitialElementWhenReady();else{var e=this.document.activeElement;e===t||t.contains(e)||t.focus()}},e.prototype.restoreFocus=function(){var t=this.elementFocusedBeforeDialogWasOpened;this.config.restoreFocus&&t&&"function"==typeof t.focus&&t.focus(),this.focusTrap&&this.focusTrap.destroy()},e.prototype.setTransformOrigin=function(){var t=this;this.clickPositioner.runTaskUseLastPosition((function(e){if(e){var o=t.elementRef.nativeElement,n=e.x-o.offsetLeft+"px "+(e.y-o.offsetTop)+"px 0px";o.style["transform-origin"]=n}t.animationState="enter"}))},e.prototype.beforeAttachPortal=function(){this.setTransformOrigin(),this.savePreviouslyFocusedElement()},e.prototype.onAnimationDone=function(t){"void"===t.toState?this.trapFocus():"exit"===t.toState&&this.restoreFocus(),this.animationStateChanged.emit(t)},e.prototype.onAnimationStart=function(t){this.animationStateChanged.emit(t)},e.prototype.ngOnDestroy=function(){t.prototype.destroy.call(this)},e}(p.ThyAbstractOverlayContainer);B.decorators=[{type:i.Component,args:[{selector:"thy-dialog-container",template:"\n        <ng-template cdkPortalOutlet></ng-template>\n    ",changeDetection:i.ChangeDetectionStrategy.Default,animations:[F.dialogContainer],host:{class:"thy-dialog-container",tabindex:"-1","aria-modal":"true","[attr.id]":"id","[attr.role]":"config.role","[attr.aria-labelledby]":"config.ariaLabel ? null : ariaLabelledBy","[attr.aria-label]":"config.ariaLabel","[attr.aria-describedby]":"config.ariaDescribedBy || null","[@dialogContainer]":"animationState","(@dialogContainer.start)":"onAnimationStart($event)","(@dialogContainer.done)":"onAnimationDone($event)"}}]}],B.ctorParameters=function(){return[{type:i.ElementRef},{type:void 0,decorators:[{type:i.Inject,args:[n.DOCUMENT]}]},{type:P},{type:i.ChangeDetectorRef},{type:p.ThyClickPositioner},{type:y.FocusTrapFactory}]},B.propDecorators={portalOutlet:[{type:i.ViewChild,args:[o.CdkPortalOutlet,{static:!0}]}],id:[{type:i.HostBinding,args:["attr.id"]}]};var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e}(p.ThyAbstractOverlayRef),w=function(t){function e(e,o,n){return t.call(this,H,e,o,n)||this}return O(e,t),e.prototype.updatePosition=function(t){return this.updateGlobalPosition(t),this},e.prototype.updateSizeAndPosition=function(t,e,o){return void 0===t&&(t=""),void 0===e&&(e=""),this.getPositionStrategy().width(t).height(e),this.updatePosition(o),this},e}(p.ThyAbstractInternalOverlayRef),M=new i.InjectionToken("thy-confirm-default-options"),q={title:"确认删除",okText:"确认",okType:"danger",cancelText:"取消",footerAlign:"left"},U={provide:M,useValue:q},z=function(){function t(t,e,o){this.dialogRef=t,this.changeDetectorRef=e,this.defaultConfig=o,this.defaultConfig=Object.assign(Object.assign({},q),this.defaultConfig)}return t.prototype.ngOnInit=function(){this.defaultConfig=Object.assign(Object.assign({},this.defaultConfig),this.options),this.title=this.defaultConfig.title,this.content=this.defaultConfig.content,this.okText=this.defaultConfig.okText,this.okType=this.defaultConfig.okType,this.cancelText=this.defaultConfig.cancelText,this.okLoadingText=this.defaultConfig.okLoadingText||this.okText,this.footerAlign=this.defaultConfig.footerAlign},t.prototype.confirm=function(){var t=this;this.loading=!0;var e=this.options.onOk();e&&e.subscribe?e.pipe(g.finalize((function(){t.loading=!1,t.changeDetectorRef.markForCheck()}))).subscribe((function(e){e&&t.close()})):this.close()},t.prototype.close=function(){this.dialogRef.close()},t.prototype.ngOnDestroy=function(){},t}();z.decorators=[{type:i.Component,args:[{selector:"thy-confirm-default",template:'<thy-dialog-header [thyTitle]="title || \'Install Angular\'" (thyOnClose)="close()"> </thy-dialog-header>\n<thy-dialog-body class="thy-form">\n  <form thyForm name="thyConfirm" thyLayout="vertical">\n    <div class="form-group">\n      <p [innerHTML]="content"></p>\n    </div>\n    <thy-form-group-footer [thyAlign]="footerAlign">\n      <div class="thy-confirm-footer" [ngClass]="\'thy-confirm-footer-\' + footerAlign">\n        <button [thyButton]="okType" (click)="confirm()" [thyLoading]="loading" [thyLoadingText]="okLoadingText">{{ okText }}</button>\n        <button thyButton="link-secondary" (click)="close()" class="thy-confirm-cancel">{{ cancelText }}</button>\n      </div>\n    </thy-form-group-footer>\n  </form>\n</thy-dialog-body>\n',changeDetection:i.ChangeDetectionStrategy.OnPush}]}],z.ctorParameters=function(){return[{type:N},{type:i.ChangeDetectorRef},{type:void 0,decorators:[{type:i.Inject,args:[M]}]}]},z.propDecorators={options:[{type:i.Input}]};var V=function(e){function n(t,o,n,i){var r=e.call(this,H,t,o,n)||this;return i.initialize(),r}return O(n,e),n.prototype.buildOverlayConfig=function(e){var o=e.size||t.ThyDialogSizes.md,n=this.buildBaseOverlayConfig(e,["dialog-"+o]);return n.positionStrategy=this.overlay.position().global(),n.scrollStrategy=e.scrollStrategy||this.overlay.scrollStrategies.block(),n},n.prototype.attachUpperOverlayContainer=function(t,e){var n=e&&e.viewContainerRef&&e.viewContainerRef.injector,r=i.Injector.create({parent:n||this.injector,providers:[{provide:P,useValue:e}]}),a=new o.ComponentPortal(B,e.viewContainerRef,r);return t.attach(a).instance},n.prototype.createUpperOverlayRef=function(t,e,o){return new w(t,e,o)},n.prototype.createInjector=function(t,e,o){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=[{provide:B,useValue:o},{provide:N,useValue:e}];return!t.direction||n&&n.get(h.Directionality,null)||r.push({provide:h.Directionality,useValue:{value:t.direction,change:u.of()}}),i.Injector.create({parent:n||this.injector,providers:r})},n.prototype.open=function(t,e){var o=this.openUpperOverlay(t,e);return o.updateSizeAndPosition(o.containerInstance.config.width,o.containerInstance.config.height,o.containerInstance.config.position),o},n.prototype.confirm=function(t){return this.open(z,{initialState:{options:t}})},n.prototype.getDialogById=function(t){return this.getUpperOverlayById(t)},n.prototype.getClosestDialog=function(t){for(var e=t.parentElement;e&&!e.classList.contains("thy-dialog-container");)e=e.parentElement;return e&&e.id?this.getDialogById(e.id):null},n.prototype.ngOnDestroy=function(){this.dispose()},n}(p.ThyAbstractOverlayService);V.ɵprov=C.ɵɵdefineInjectable({factory:function(){return new V(C.ɵɵinject(v.Overlay),C.ɵɵinject(C.INJECTOR),C.ɵɵinject(j,8),C.ɵɵinject(T.ThyClickPositioner))},token:V,providedIn:"root"}),V.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],V.ctorParameters=function(){return[{type:e.Overlay},{type:i.Injector},{type:P,decorators:[{type:i.Optional},{type:i.Inject,args:[j]}]},{type:p.ThyClickPositioner}]};var Y=function(){function t(t){this.dialog=t,this._isDialogBody=!0,this.thyClearPaddingClassName=!1}return Object.defineProperty(t.prototype,"thyClearPadding",{set:function(t){this.thyClearPaddingClassName=f.coerceBooleanProperty(t)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t}();Y.decorators=[{type:i.Component,args:[{selector:"thy-dialog-body",template:"<ng-content></ng-content>",exportAs:"thyDialogBody"}]}],Y.ctorParameters=function(){return[{type:V}]},Y.propDecorators={_isDialogBody:[{type:i.HostBinding,args:["class.dialog-body"]}],thyClearPaddingClassName:[{type:i.HostBinding,args:["class.dialog-body-clear-padding"]}],thyClearPadding:[{type:i.Input}]};var G=function(){function t(t,e,o){this.dialogLayoutConfig=t,this.updateHostClassService=e,this.elementRef=o,this.updateHostClassService.initializeElement(this.elementRef.nativeElement),this.divided=this.dialogLayoutConfig.footerDivided}return Object.defineProperty(t.prototype,"thyDivided",{set:function(t){this.divided=f.coerceBooleanProperty(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.thyAlign?this.thyAlign:this.dialogLayoutConfig.footerAlign},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t;this.updateHostClassService.updateClassByMap(((t={"dialog-footer":!0})["dialog-footer-actions-align-"+this.align]=!0,t["dialog-footer-border-top"]=this.divided,t))},t}();G.decorators=[{type:i.Component,args:[{selector:"thy-dialog-footer",template:'<div class="dialog-footer-actions btn-pair">\n  <ng-content></ng-content>\n</div>\n<div class="dialog-footer-description" *ngIf="description">\n  <ng-container [ngTemplateOutlet]="description"></ng-container>\n</div>\n',exportAs:"thyDialogFooter",providers:[p.UpdateHostClassService]}]}],G.ctorParameters=function(){return[{type:A,decorators:[{type:i.Inject,args:[_]}]},{type:p.UpdateHostClassService},{type:i.ElementRef}]},G.propDecorators={description:[{type:i.ContentChild,args:["description"]}],thyDivided:[{type:i.Input}],thyAlign:[{type:i.Input}]};var W=function(){function t(t,e,o,n){this.elementRef=t,this.dialog=e,this.translate=o,this.dialogContainer=n,this.isDialogHeader=!0,this.isDialogHeaderLg=!1,this.thyOnClose=new i.EventEmitter}return Object.defineProperty(t.prototype,"thySize",{set:function(t){this.isDialogHeaderLg="lg"===t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thyTitleTranslationKey",{set:function(t){t&&!this.thyTitle&&(this.thyTitle=this.translate.instant(t))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;if(!this.dialogContainer){var e=this.dialog.getClosestDialog(this.elementRef.nativeElement);this.dialogContainer=e?e.containerInstance:null}Promise.resolve().then((function(){t.dialogContainer&&(t.dialogContainer.ariaLabelledBy=t.thyTitle)}))},t.prototype.close=function(t){this.thyOnClose.observers.length>0?this.thyOnClose.emit(t):this.dialog.close()},t}();W.decorators=[{type:i.Component,args:[{selector:"thy-dialog-header",template:'<ng-container *ngIf="headerTemplate; else defaultHeader">\n  <template [ngTemplateOutlet]="headerTemplate"></template>\n</ng-container>\n<ng-template #defaultHeader>\n  <h3 class="dialog-title"><thy-icon [thyIconName]="thyIcon"></thy-icon>{{ thyTitle }}</h3>\n  <button type="button" class="close" (click)="close($event)">\n    <thy-icon thyIconName="close-bold"></thy-icon>\n  </button>\n</ng-template>\n',exportAs:"thyDialogHeader"}]}],W.ctorParameters=function(){return[{type:i.ElementRef},{type:V},{type:p.ThyTranslate},{type:B,decorators:[{type:i.Optional}]}]},W.propDecorators={isDialogHeader:[{type:i.HostBinding,args:["class.dialog-header"]}],isDialogHeaderLg:[{type:i.HostBinding,args:["class.dialog-header-lg"]}],headerTemplate:[{type:i.ContentChild,args:["dialogHeader"]}],thyTitle:[{type:i.Input}],thySize:[{type:i.Input}],thyTitleTranslationKey:[{type:i.Input}],thyIcon:[{type:i.Input}],thyOnClose:[{type:i.Output}]};var $=function(){};$.decorators=[{type:i.NgModule,args:[{declarations:[B,W,Y,G,z],imports:[n.CommonModule,c.ThySharedModule,o.PortalModule,e.OverlayModule,a.ThyButtonModule,l.ThyIconModule,s.ThyFormModule,r.FormsModule],providers:[V,S,U,L],entryComponents:[B,z],exports:[B,W,Y,G]}]}],t.DialogBodyComponent=Y,t.DialogFooterComponent=G,t.DialogHeaderComponent=W,t.THY_CONFIRM_DEFAULT_OPTIONS=M,t.THY_CONFIRM_DEFAULT_OPTIONS_PROVIDER=U,t.THY_CONFIRM_DEFAULT_OPTIONS_VALUE=q,t.THY_DIALOG_DEFAULT_OPTIONS=j,t.THY_DIALOG_DEFAULT_OPTIONS_PROVIDER=S,t.THY_DIALOG_LAYOUT_CONFIG=_,t.THY_DIALOG_LAYOUT_CONFIG_PROVIDER=L,t.ThyConfirmComponent$1=z,t.ThyDialog=V,t.ThyDialogConfig=P,t.ThyDialogContainerComponent=B,t.ThyDialogLayoutConfig=A,t.ThyDialogModule=$,t.ThyDialogRef=N,t.thyDialogAnimations=F,t.ɵ0=k,t.ɵ1=R,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-dialog.umd.min.js.map