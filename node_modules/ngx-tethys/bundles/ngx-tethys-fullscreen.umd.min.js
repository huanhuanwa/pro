!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("@angular/cdk/coercion"),require("rxjs/operators"),require("@angular/cdk/keycodes")):"function"==typeof define&&define.amd?define("ngx-tethys/fullscreen",["exports","@angular/core","@angular/common","rxjs","@angular/cdk/coercion","rxjs/operators","@angular/cdk/keycodes"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-tethys"]=e["ngx-tethys"]||{},e["ngx-tethys"].fullscreen={}),e.ng.core,e.ng.common,e.rxjs,e.ng.cdk.coercion,e.rxjs.operators,e.ng.cdk.keycodes)}(this,(function(e,t,n,r,s,l,c){"use strict";function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var u,o=i(t),a=i(n);e.ThyFullscreenMode=void 0,(u=e.ThyFullscreenMode||(e.ThyFullscreenMode={})).immersive="immersive",u.emulated="emulated";var h=function(){function t(e){this.document=e,this.isFullscreen=!1,this.ngUnsubscribe$=new r.Subject,this._afterLaunched=new r.Subject,this._afterExited=new r.Subject}return t.prototype.onFullscreenChange=function(){this.isImmersiveFullscreen()?this.launchNormalFullscreen():this.exitNormalFullscreen()},t.prototype.resetElement=function(e){return"string"===typeof e?this.document.querySelector("."+e):s.coerceElement(e)},t.prototype.isImmersiveFullscreen=function(){var e=this.document;return!!(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)},t.prototype.handleKeyDown=function(t){t.keyCode===c.ESCAPE&&this.isFullscreen&&this.fullscreenConfig.mode===e.ThyFullscreenMode.emulated&&this.exitNormalFullscreen()},t.prototype.launchNormalFullscreen=function(){var e=this.resetElement(this.fullscreenConfig.target),t=this.fullscreenConfig.targetLaunchededClasse,n=this.fullscreenConfig.emulatedContainer;if(n){var r=this.resetElement(n).getBoundingClientRect(),s=e.getBoundingClientRect(),l=r.left-s.left,c=r.top-s.top;e.style.transform="translate("+l+"px, "+c+"px)",e.style.width=r.width+"px",e.style.height=r.height+"px"}else e.classList.add("thy-fullscreen");e.classList.add("thy-fullscreen-active"),t&&t.length&&e.classList.add(t),this.isFullscreen=!0,this._afterLaunched.next()},t.prototype.exitNormalFullscreen=function(){var e=this.resetElement(this.fullscreenConfig.target),t=this.fullscreenConfig.targetLaunchededClasse;this.fullscreenConfig.emulatedContainer?(e.style.transform="",e.style.width="",e.style.height=""):e.classList.remove("thy-fullscreen"),e.classList.remove("thy-fullscreen-active"),t&&t.length&&e.classList.remove(t),this.isFullscreen=!1,this._afterExited.next(),this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()},t.prototype.launchImmersiveFullscreen=function(){var e=this.document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},t.prototype.exitImmersiveFullscreen=function(){var e=this.document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen()},t.prototype.launch=function(){var t=this;this.fullscreenConfig.mode===e.ThyFullscreenMode.immersive?(r.merge(r.fromEvent(this.document,"fullscreenchange"),r.fromEvent(this.document,"MSFullscreenChange"),r.fromEvent(this.document,"webkitfullscreenchange")).pipe(l.takeUntil(this.ngUnsubscribe$)).subscribe((function(){t.onFullscreenChange()})),this.launchImmersiveFullscreen()):(r.fromEvent(this.document,"keydown").pipe(l.takeUntil(this.ngUnsubscribe$)).subscribe((function(e){t.handleKeyDown(e)})),this.launchNormalFullscreen())},t.prototype.exit=function(){this.fullscreenConfig.mode===e.ThyFullscreenMode.immersive?this.exitImmersiveFullscreen():this.exitNormalFullscreen()},t.prototype.afterLaunched=function(){return this._afterLaunched.asObservable()},t.prototype.afterExited=function(){return this._afterExited.asObservable()},t}();h.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]};var f=function(){function t(e){this.document=e,this.fullscreenRefs=[]}return t.prototype.launch=function(t){var n=this;t.mode=t.mode||e.ThyFullscreenMode.immersive;var r=new h(this.document);return r.fullscreenConfig=t,r.launch(),this.fullscreenRefs.push(r),r.afterExited().subscribe((function(){var e=n.fullscreenRefs.indexOf(r);e>-1&&n.fullscreenRefs.splice(e,1)})),r},t.prototype.exit=function(){this.fullscreenRefs[this.fullscreenRefs.length-1].exit()},t}();f.ɵprov=o.ɵɵdefineInjectable({factory:function(){return new f(o.ɵɵinject(a.DOCUMENT))},token:f,providedIn:"root"}),f.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],f.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]};var m=function(){function n(n,s){var l=this;this.elementRef=n,this.service=s,this.thyMode=e.ThyFullscreenMode.immersive,this.thyFullscreenChange=new t.EventEmitter,this.ngUnsubscribe$=new r.Subject,this.handleFullscreen=function(){var e=l.elementRef.nativeElement.querySelector("[fullscreen-target]"),t=l.elementRef.nativeElement.querySelector("[fullscreen-container]");if(e.classList.contains("thy-fullscreen-active"))l.service.exit();else{var n=l.service.launch({mode:l.thyMode,target:e,targetLaunchededClasse:l.thyFullscreenClasses,emulatedContainer:t});l.thyFullscreenChange.emit(!0),n.afterExited().subscribe((function(){l.thyFullscreenChange.emit(!1)}))}}}return n.prototype.ngOnInit=function(){},n.prototype.ngAfterViewInit=function(){var e=this.elementRef.nativeElement.querySelector("[fullscreen-launch]");e&&e.addEventListener("click",this.handleFullscreen)},n.prototype.ngOnDestroy=function(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete();var e=this.elementRef.nativeElement.querySelector("[fullscreen-launch]");e&&e.removeEventListener("click",this.handleFullscreen)},n}();m.decorators=[{type:t.Component,args:[{selector:"thy-fullscreen, [thyFullscreen]",template:"<ng-content> </ng-content>\n"}]}],m.ctorParameters=function(){return[{type:t.ElementRef},{type:f}]},m.propDecorators={thyMode:[{type:t.Input}],thyFullscreenClasses:[{type:t.Input}],thyFullscreenChange:[{type:t.Output}]};var d=function(){};d.decorators=[{type:t.NgModule,args:[{declarations:[m],imports:[n.CommonModule],exports:[m]}]}],e.ThyFullscreen=f,e.ThyFullscreenComponent=m,e.ThyFullscreenModule=d,e.ThyFullscreenRef=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-fullscreen.umd.min.js.map