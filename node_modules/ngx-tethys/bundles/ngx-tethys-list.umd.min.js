!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ngx-tethys/core"),require("ngx-tethys/shared"),require("ngx-tethys/util"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/a11y"),require("@angular/cdk/collections"),require("@angular/forms"),require("ngx-tethys/avatar")):"function"==typeof define&&define.amd?define("ngx-tethys/list",["exports","@angular/core","@angular/common","ngx-tethys/core","ngx-tethys/shared","ngx-tethys/util","rxjs","rxjs/operators","@angular/cdk/a11y","@angular/cdk/collections","@angular/forms","ngx-tethys/avatar"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-tethys"]=e["ngx-tethys"]||{},e["ngx-tethys"].list={}),e.ng.core,e.ng.common,e["ngx-tethys"].core,e["ngx-tethys"].shared,e["ngx-tethys"].util,e.rxjs,e.rxjs.operators,e.ng.cdk.a11y,e.ng.cdk.collections,e.ng.forms,e["ngx-tethys"].avatar)}(this,(function(e,t,n,i,o,s,r,a,l,c,y,h){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create;Object.create;var u=function(){function e(){this._isDivided=!1,this._isList=!0}return Object.defineProperty(e.prototype,"thyDivided",{set:function(e){this._isDivided=e},enumerable:!1,configurable:!0}),e}();u.decorators=[{type:t.Component,args:[{selector:"thy-list",template:"<ng-content></ng-content>"}]}],u.ctorParameters=function(){return[]},u.propDecorators={thyDivided:[{type:t.Input}],_isDivided:[{type:t.HostBinding,args:["class.thy-list-divided"]}],_isList:[{type:t.HostBinding,args:["class.thy-list"]}]},function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);s>3&&r&&Object.defineProperty(t,n,r)}([i.InputBoolean(),p("design:type",Boolean),p("design:paramtypes",[Boolean])],u.prototype,"thyDivided",null);var d=function(){this._isListItem=!0};d.decorators=[{type:t.Component,args:[{selector:"thy-list-item,[thy-list-item]",template:"<ng-content></ng-content>"}]}],d.ctorParameters=function(){return[]},d.propDecorators={_isListItem:[{type:t.HostBinding,args:["class.thy-list-item"]}]};var g={sm:"thy-list-sm"},f=function(){function e(e,n,i,o){this.renderer=e,this.elementRef=n,this.ngZone=i,this.updateHostClassService=o,this._selectionChangesUnsubscribe$=r.Subscription.EMPTY,this.layout="list",this._isList=!0,this._isSelectionList=!0,this.multiple=!0,this.isLayoutGrid=!1,this.spaceEnabled=!0,this.thySelectionChange=new t.EventEmitter,this._onTouched=function(){},this._onChange=function(e){},this.updateHostClassService.initializeElement(n.nativeElement)}return Object.defineProperty(e.prototype,"thyMultiple",{set:function(e){var t=this.multiple;this.multiple=s.coerceBooleanProperty(e),t!==this.multiple&&this._instanceSelectionModel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thyLayout",{set:function(e){this.layout=e,this.isLayoutGrid="grid"===e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thyAutoActiveFirstItem",{set:function(e){this.autoActiveFirstItem=s.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thySize",{set:function(e){this._setListSize(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thySpaceKeyEnabled",{set:function(e){this.spaceEnabled=s.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),e.prototype._emitChangeEvent=function(e,t){this.thySelectionChange.emit({source:this,value:e.thyValue,option:e,event:t,selected:this.isSelected(e)})},e.prototype._emitModelValueChange=function(){var e=this;if(this.options){var t=this.selectionModel.selected;this.thyUniqueKey&&(t=t.map((function(t){var n=e.options.find((function(n){return n.thyValue[e.thyUniqueKey]===t}));return n?n.thyValue:e._modelValues.find((function(n){return n[e.thyUniqueKey]===t}))}))),this._modelValues=t;var n=t;!this.multiple&&t&&t.length>0&&(n=t[0]),this._onChange(n)}},e.prototype._toggleFocusedOption=function(e){var t=this;this._keyManager.activeItem&&this.ngZone.run((function(){t.toggleOption(t._keyManager.activeItem,e)}))},e.prototype._initializeFocusKeyManager=function(){this._keyManager=new l.ActiveDescendantKeyManager(this.options).withWrap().skipPredicate((function(){return!1}))},e.prototype._instanceSelectionModel=function(){this.selectionModel=new c.SelectionModel(this.multiple)},e.prototype._getElementBySelector=function(e){return s.dom.getHTMLElementBySelector(e,this.elementRef)},e.prototype._compareValue=function(e,t){return this.thyCompareWith?(0,this.thyCompareWith)(e,t):this.thyUniqueKey?e&&e[this.thyUniqueKey]===t&&t[this.thyUniqueKey]:e===t},e.prototype._getOptionSelectionValue=function(e){return e.thyValue?this.thyUniqueKey?e.thyValue[this.thyUniqueKey]:e.thyValue:e},e.prototype._setSelectionByValues=function(e){var t=this;this.selectionModel.clear(),e.forEach((function(e){t.thyUniqueKey?t.selectionModel.select(e[t.thyUniqueKey]):t.selectionModel.select(e)}))},e.prototype._setAllOptionsSelected=function(e){var t=this,n=!1;this.options.forEach((function(i){t.selectionModel.isSelected(i.thyValue)!==e&&(n=!0,t.selectionModel.toggle(i.thyValue))})),n&&this._emitModelValueChange()},e.prototype._getOptionByValue=function(e){var t=this;return this.options.find((function(n){return t._compareValue(n.thyValue,e)}))},e.prototype._getActiveOption=function(){return this._keyManager.activeItem?this._getOptionByValue(this._keyManager.activeItem.thyValue):null},e.prototype._setListSize=function(e){for(var t in g)g.hasOwnProperty(t)&&this.updateHostClassService.removeClass(g[t]);e&&this.updateHostClassService.addClass(g[e])},e.prototype.ngOnInit=function(){var e=this,t=this._getElementBySelector(this.thyBindKeyEventContainer);this.ngZone.runOutsideAngular((function(){e._bindKeyEventUnsubscribe=e.renderer.listen(t,"keydown",e.onKeydown.bind(e))})),this._instanceSelectionModel()},e.prototype.writeValue=function(e){if(e){if(this.multiple&&!s.helpers.isArray(e))throw new Error("multiple selection ngModel must be array.");if(!this.multiple&&s.helpers.isArray(e))throw new Error("single selection ngModel not be array.")}var t=s.helpers.isArray(e)?e:e?[e]:[];this._modelValues=t,this.options&&this._setSelectionByValues(t)},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.onKeydown=function(e){if(this.thyBeforeKeydown&&!this.thyBeforeKeydown(e))return;var t=e.keyCode||e.which,n=this._keyManager,i=n.activeItemIndex;switch(t){case s.keycodes.SPACE:case s.keycodes.ENTER:if(t===s.keycodes.SPACE&&!this.spaceEnabled)return;this._toggleFocusedOption(e),e.preventDefault();break;default:n.onKeydown(e)}t!==s.keycodes.UP_ARROW&&t!==s.keycodes.DOWN_ARROW||!e.shiftKey||n.activeItemIndex===i||this._toggleFocusedOption(e)},e.prototype.toggleOption=function(e,t){e&&!e.disabled&&(this.selectionModel.toggle(this._getOptionSelectionValue(e)),this._emitModelValueChange(),this._emitChangeEvent(e,t))},e.prototype.setActiveOption=function(e){this._keyManager.updateActiveItem(e)},e.prototype.scrollIntoView=function(e){var t=s.dom.getHTMLElementBySelector(this.thyScrollContainer,this.elementRef);i.ScrollToService.scrollToElement(e.element.nativeElement,t)},e.prototype.isSelected=function(e){return this.selectionModel.isSelected(this._getOptionSelectionValue(e))},e.prototype.clearActiveItem=function(){this._keyManager.activeItem&&this._keyManager.setActiveItem(-1)},e.prototype.determineClearActiveItem=function(){this._getActiveOption()||this.clearActiveItem()},e.prototype.selectAll=function(){this._setAllOptionsSelected(!0)},e.prototype.deselectAll=function(){this._setAllOptionsSelected(!1)},e.prototype.ngAfterContentInit=function(){var e=this;this._initializeFocusKeyManager(),this.options.changes.pipe(a.startWith(!0)).subscribe((function(){e.autoActiveFirstItem&&(!e._keyManager.activeItem||e.options.toArray().indexOf(e._keyManager.activeItem)<0)&&e._keyManager.setFirstItemActive()}))},e.prototype.ngOnDestroy=function(){this._selectionChangesUnsubscribe$.unsubscribe(),this._bindKeyEventUnsubscribe&&this._bindKeyEventUnsubscribe()},e}();f.decorators=[{type:t.Component,args:[{selector:"thy-selection-list,[thy-selection-list]",template:"<ng-content></ng-content>",providers:[i.UpdateHostClassService,{provide:o.THY_LIST_OPTION_PARENT_COMPONENT,useExisting:f},{provide:y.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return f})),multi:!0}],changeDetection:t.ChangeDetectionStrategy.OnPush}]}],f.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:t.NgZone},{type:i.UpdateHostClassService}]},f.propDecorators={_isList:[{type:t.HostBinding,args:["class.thy-list"]}],_isSelectionList:[{type:t.HostBinding,args:["class.thy-selection-list"]}],multiple:[{type:t.HostBinding,args:["class.thy-multiple-selection-list"]}],isLayoutGrid:[{type:t.HostBinding,args:["class.thy-grid-list"]}],options:[{type:t.ContentChildren,args:[o.ThyListOptionComponent]}],thyMultiple:[{type:t.Input}],thyBindKeyEventContainer:[{type:t.Input}],thyScrollContainer:[{type:t.Input}],thyBeforeKeydown:[{type:t.Input}],thyUniqueKey:[{type:t.Input}],thyCompareWith:[{type:t.Input}],thyLayout:[{type:t.Input}],thyAutoActiveFirstItem:[{type:t.Input}],thySize:[{type:t.Input}],thySpaceKeyEnabled:[{type:t.Input}],thySelectionChange:[{type:t.Output}]};var m=function(){this.className="thy-list-item-meta"};m.decorators=[{type:t.Component,args:[{selector:"thy-list-item-meta,[thy-list-item-meta]",template:'<div class="thy-list-item-meta-avatar">\n  <ng-container *ngIf="thyAvatar; else avatarTemplateRef">\n    <thy-avatar [thySrc]="thyAvatar"></thy-avatar>\n  </ng-container>\n</div>\n<div class="thy-list-item-meta-content">\n  <div class="thy-list-item-meta-title">\n    <ng-container *ngIf="thyTitle; else titleTemplateRef">{{ thyTitle }}</ng-container>\n  </div>\n  <div class="thy-list-item-meta-description">\n    <ng-container *ngIf="thyDescription; else descriptionTemplateRef">{{ thyDescription }}</ng-container>\n  </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush}]}],m.ctorParameters=function(){return[]},m.propDecorators={thyAvatar:[{type:t.Input}],thyTitle:[{type:t.Input}],thyDescription:[{type:t.Input}],avatarTemplateRef:[{type:t.ContentChild,args:["metaAvatar"]}],titleTemplateRef:[{type:t.ContentChild,args:["metaTitle"]}],descriptionTemplateRef:[{type:t.ContentChild,args:["metaDescription"]}],className:[{type:t.HostBinding,args:["class"]}]};var v=function(){};v.decorators=[{type:t.NgModule,args:[{declarations:[u,d,f,m],imports:[n.CommonModule,o.ThyOptionModule,h.ThyAvatarModule],exports:[u,d,f,m,o.ThyOptionModule]}]}],e.ThyListComponent=u,e.ThyListItemComponent=d,e.ThyListItemMetaComponent=m,e.ThyListModule=v,e.ThySelectionListComponent=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-list.umd.min.js.map