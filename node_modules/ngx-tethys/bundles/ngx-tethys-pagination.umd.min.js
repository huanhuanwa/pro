!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("ngx-tethys/core"),require("ngx-tethys/util"),require("@angular/common"),require("@angular/platform-browser"),require("ngx-tethys/shared"),require("ngx-tethys/icon")):"function"==typeof define&&define.amd?define("ngx-tethys/pagination",["exports","@angular/core","ngx-tethys/core","ngx-tethys/util","@angular/common","@angular/platform-browser","ngx-tethys/shared","ngx-tethys/icon"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-tethys"]=t["ngx-tethys"]||{},t["ngx-tethys"].pagination={}),t.ng.core,t["ngx-tethys"].core,t["ngx-tethys"].util,t.ng.common,t.ng.platformBrowser,t["ngx-tethys"].shared,t["ngx-tethys"].icon)}(this,(function(t,e,n,i,a,o,s,r){"use strict";var g={boundaryLinks:!1,directionLinks:!0,pageSize:20,maxCount:7,rangeCount:5,showQuickJumper:!0,firstText:"第一页",lastText:"最后一页",previousText:"",nextText:"",firstIcon:"",lastIcon:"",previousIcon:"angle-left",nextIcon:"angle-right",totalPagesFormat:"共{total}页"},c=new e.InjectionToken("THY_PAGINATION_CONFIG",{providedIn:"root",factory:function(){return{}}});Object.create;function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,a,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){a={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return s}Object.create;var l=function(){function t(t,n,a,o){this.paginationConfig=t,this.updateHostClassService=n,this.elementRef=a,this.cdr=o,this.isTemplateRef=i.isTemplateRef,this.config=Object.assign({},g,this.paginationConfig.main),this.disabled=!1,this.pageIndexChange=new e.EventEmitter,this.pageChanged=new e.EventEmitter,this.pages=[],this.pageIndex=1,this.range={from:0,to:0},this.firstIndex=1,this.isHideOnSinglePage=!1,this.initialized=!1,this.isPaginationClass=!0,this.showTotal=!1,this.updateHostClassService.initializeElement(this.elementRef.nativeElement)}return Object.defineProperty(t.prototype,"thyPageIndex",{set:function(t){this.pageIndex=t,this.initialized&&this.setPageIndex(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thyPageSize",{set:function(t){this.pageSize=t,this.initialized&&(this.calculatePageCount(),this.initializePages(this.pageIndex,this.pageCount),this.cdr.markForCheck())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thyTotal",{set:function(t){this.total=t,this.initialized&&(this.calculatePageCount(),this.initializePages(this.pageIndex,this.pageCount),this.cdr.markForCheck())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuickJumper",{set:function(t){this.config.showQuickJumper=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{set:function(t){this.updateHostClassService.addClass("thy-pagination-"+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCount",{set:function(t){this.config.maxCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thyRangeCount",{set:function(t){Number.isInteger(t)&&(this.config.rangeCount=t,this.initialized&&this.setMarginalCount(t))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.setMarginalCount(this.config.rangeCount),this.calculatePageCount(),this.setPageIndex(this.pageIndex),this.initialized=!0},t.prototype.setMarginalCount=function(t){this.marginalCount||(this.marginalCount=t<=5?1:2)},t.prototype.setPageIndex=function(t){this.pageIndex=t>this.pageCount?this.pageCount:t||1,this.range={from:(this.pageIndex-1)*this.pageSize+1,to:this.pageIndex*this.pageSize},this.initializePages(this.pageIndex,this.pageCount),this.cdr.markForCheck()},t.prototype.calculatePageCount=function(){var t=this.pageSize<1?1:Math.ceil(this.total/this.pageSize);this.pageCount=Math.max(t||0,1)},t.prototype.makePage=function(t,e,n){return{index:t,text:e,active:n}},t.prototype.initializePages=function(t,e){var n=this.marginalCount,i=this.config.rangeCount,a=[];if(e>this.config.maxCount){for(var o=[],s=[],r=1;r<=n;r++)o.push(this.makePage(r,r.toString(),r===t));t-Math.ceil(i/2)>this.firstIndex&&o.push(this.makePage(t-i,"...",null)),t+Math.ceil(i/2)<e&&s.push(this.makePage(t+i,"...",null));for(r=e-n+1;r<=e;r++)s.push(this.makePage(r,r.toString(),r===t));var g=Math.max(n+1,t-(i-1)/2),c=Math.min(t+(i-1)/2,e-n);t-1<=n&&(c=i),e-t<=n&&(g=e-i+1);for(r=g;r<=c;r++)a.push({index:r,text:r.toString(),active:r===+t});a=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}(o,a,s)}else for(r=1;r<=e;r++)a.push({index:r,text:r.toString(),active:r===+t});this.pages=a},t.prototype.pageChange=function(t){this.pageIndexChange.emit(t),this.pageChanged.emit({page:t})},t.prototype.selectPage=function(t){this.disabled||t===this.firstIndex-1||t===this.pageCount+1||(this.setPageIndex(t),this.pageChange(this.pageIndex))},t.prototype.jumpPage=function(t){var e=+t.value;Number.isInteger(e)&&this.selectPage(e),t.value=""},t}();l.decorators=[{type:e.Component,args:[{selector:"thy-pagination",template:'<ng-container *ngIf="(hideOnSinglePage && total > pageSize) || !hideOnSinglePage">\n  <div class="thy-pagination-total" *ngIf="showTotal">\n    <ng-container *ngIf="!isTemplateRef(showTotal); else totalTemplate">\n      <div class="mr-3">\n        第<span class="number"> {{ range.from }}-{{ range.to }} </span>条\n      </div>\n      <div>\n        共计<span class="number"> {{ total }} </span>条\n      </div>\n    </ng-container>\n    <ng-template #totalTemplate>\n      <ng-template\n        [ngTemplateOutlet]="showTotal"\n        [ngTemplateOutletContext]="{ $implicit: total, range: range }"\n      ></ng-template>\n    </ng-template>\n  </div>\n  <div class="thy-pagination-content">\n    <ul class="thy-pagination-pages">\n      <li\n        class="thy-page-item"\n        [class.disabled]="disabled || pageIndex === firstIndex"\n        *ngIf="config.boundaryLinks"\n        (click)="selectPage(firstIndex)"\n      >\n        <a class="thy-page-link thy-page-link-first" href="javascript:;">\n          <ng-container *ngIf="config.firstText">{{ config.firstText }}</ng-container>\n          <ng-container *ngIf="config.firstIcon">\n            <thy-icon [thyIconName]="config.firstIcon"></thy-icon>\n          </ng-container>\n        </a>\n      </li>\n      <li\n        class="thy-page-item"\n        [class.disabled]="disabled || pageIndex === firstIndex"\n        *ngIf="config.directionLinks"\n        (click)="selectPage(pageIndex - 1)"\n      >\n        <a class="thy-page-link  page-link-pre" href="javascript:;">\n          <ng-container *ngIf="config.previousText">{{ config.previousText }}</ng-container>\n          <ng-container *ngIf="config.previousIcon">\n            <thy-icon [thyIconName]="config.previousIcon"></thy-icon>\n          </ng-container>\n        </a>\n      </li>\n      <li\n        class="thy-page-item"\n        [class.active]="page.active"\n        [class.disabled]="disabled"\n        (click)="selectPage(page.index)"\n        *ngFor="let page of pages"\n      >\n        <a class="thy-page-link" href="javascript:;">{{ page.text }}</a>\n      </li>\n      <li\n        class="thy-page-item page-item-next"\n        [class.disabled]="disabled || pageIndex === pageCount"\n        *ngIf="config.directionLinks"\n        (click)="selectPage(pageIndex + 1)"\n      >\n        <a class="thy-page-link thy-page-link-next" href="javascript:;">\n          <ng-container *ngIf="config.nextText">{{ config.nextText }}</ng-container>\n          <ng-container *ngIf="config.nextIcon">\n            <thy-icon [thyIconName]="config.nextIcon"></thy-icon>\n          </ng-container>\n        </a>\n      </li>\n      <li\n        class="thy-page-item"\n        [class.disabled]="disabled || pageIndex === pageCount"\n        *ngIf="config.boundaryLinks"\n        (click)="selectPage(pageCount)"\n      >\n        <a class="thy-page-link thy-page-link-last" href="javascript:;">\n          <ng-container *ngIf="config.lastText">{{ config.lastText }}</ng-container>\n          <ng-container *ngIf="config.lastIcon">\n            <thy-icon [thyIconName]="config.lastIcon"></thy-icon>\n          </ng-container>\n        </a>\n      </li>\n    </ul>\n    <ng-container *ngIf="config.totalPagesFormat">\n      <div\n        class="thy-pagination-count"\n        [innerHTML]="pageCount | paginationTotalPagesFormat: config.totalPagesFormat"\n      ></div>\n    </ng-container>\n    <ng-container *ngIf="config.showQuickJumper">\n      <div class="thy-pagination-jumper">\n        <div class="thy-pagination-jumper-input">\n          到 <input type="text" [disabled]="disabled" #jumperInput (thyEnter)="jumpPage(jumperInput)" /> 页\n        </div>\n        <button type="button" (click)="jumpPage(jumperInput)" [disabled]="disabled">确定</button>\n      </div>\n    </ng-container>\n  </div>\n</ng-container>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[n.UpdateHostClassService]}]}],l.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[c]}]},{type:n.UpdateHostClassService},{type:e.ElementRef},{type:e.ChangeDetectorRef}]},l.propDecorators={thyPageIndex:[{type:e.Input}],thyPageSize:[{type:e.Input}],thyTotal:[{type:e.Input}],disabled:[{type:e.Input,args:["thyDisabled"]}],showQuickJumper:[{type:e.Input,args:["thyShowQuickJumper"]}],size:[{type:e.Input,args:["thySize"]}],maxCount:[{type:e.Input,args:["thyMaxCount"]}],marginalCount:[{type:e.Input,args:["thyMarginalCount"]}],thyRangeCount:[{type:e.Input}],hideOnSinglePage:[{type:e.Input,args:["thyHideOnSinglePage"]}],pageIndexChange:[{type:e.Output,args:["thyPageIndexChange"]}],pageChanged:[{type:e.Output,args:["thyPageChanged"]}],isPaginationClass:[{type:e.HostBinding,args:["class.thy-pagination"]}],showTotal:[{type:e.HostBinding,args:["class.thy-pagination-has-total"]},{type:e.Input,args:["thyShowTotal"]}]};var h=function(){function t(t){this.sanitizer=t}return t.prototype.transform=function(t,e){return t&&e?this.sanitizer.bypassSecurityTrustHtml(e.replace(/\{(.+?)\}/g,"<span>"+t+"</span>")):""},t}();h.decorators=[{type:e.Pipe,args:[{name:"paginationTotalPagesFormat"}]}],h.ctorParameters=function(){return[{type:o.DomSanitizer}]};var u=function(){};u.decorators=[{type:e.NgModule,args:[{imports:[a.CommonModule,s.ThySharedModule,r.ThyIconModule],exports:[l],declarations:[l,h]}]}],t.DEFAULT_RANGE_COUNT=5,t.PaginationDefaultConfig=g,t.PaginationTotalCountFormat=h,t.THY_PAGINATION_CONFIG=c,t.ThyPaginationComponent=l,t.ThyPaginationModule=u,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-pagination.umd.min.js.map