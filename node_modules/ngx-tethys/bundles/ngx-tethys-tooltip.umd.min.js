!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/overlay"),require("@angular/cdk/a11y"),require("@angular/common"),require("@angular/core"),require("@angular/cdk/platform"),require("rxjs/operators"),require("ngx-tethys/util"),require("@angular/cdk/portal"),require("rxjs"),require("@angular/animations"),require("ngx-tethys/core")):"function"==typeof define&&define.amd?define("ngx-tethys/tooltip",["exports","@angular/cdk/overlay","@angular/cdk/a11y","@angular/common","@angular/core","@angular/cdk/platform","rxjs/operators","ngx-tethys/util","@angular/cdk/portal","rxjs","@angular/animations","ngx-tethys/core"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-tethys"]=t["ngx-tethys"]||{},t["ngx-tethys"].tooltip={}),t.ng.cdk.overlay,t.ng.cdk.a11y,t.ng.common,t.ng.core,t.ng.cdk.platform,t.rxjs.operators,t["ngx-tethys"].util,t.ng.cdk.portal,t.rxjs,t.ng.animations,t["ngx-tethys"].core)}(this,(function(t,e,o,i,n,s,r,a,l,p,c,h){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};Object.create;Object.create;var u={showDelay:200,hideDelay:100,touchendHideDelay:1500},f="cubic-bezier(0.08, 0.82, 0.17, 1)",d={tooltipState:c.trigger("state",[c.state("initial, void, hidden",c.style({opacity:0,transform:"scale(0)"})),c.state("visible",c.style({transform:"scale(1)"})),c.transition("* => visible",c.animate("200ms "+f,c.keyframes([c.style({opacity:0,transform:"scale(0)",offset:0}),c.style({opacity:.5,transform:"scale(0.99)",offset:.5}),c.style({opacity:1,transform:"scale(1)",offset:1})]))),c.transition("* => hidden",c.animate("100ms "+f,c.style({opacity:0})))])},g=function(){function t(t,e,o){this.changeDetectorRef=t,this.updateHostClassService=e,this.addTooltipContainerClass=!0,this.onHide=new p.Subject,this.closeOnInteraction=!1,this.visibility="initial",this.tooltipClasses=[],this.isTemplateRef=!1,this.updateHostClassService.initializeElement(o)}return Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.isTemplateRef=t instanceof n.TemplateRef},enumerable:!1,configurable:!0}),t.prototype.updateClasses=function(){var t=[];this.tooltipClasses&&(t=t.concat(this.tooltipClasses)),this.updateHostClassService.updateClass(t)},t.prototype.ngOnInit=function(){},t.prototype.markForCheck=function(){this.changeDetectorRef.markForCheck()},t.prototype.isVisible=function(){return"visible"===this.visibility},t.prototype.show=function(t){var e=this;this.hideTimeoutId&&(clearTimeout(this.hideTimeoutId),this.hideTimeoutId=null),this.closeOnInteraction=!0,this.showTimeoutId=setTimeout((function(){e.visibility="visible",e.showTimeoutId=null,e.markForCheck()}),t)},t.prototype.hide=function(t){var e=this;this.showTimeoutId&&(clearTimeout(this.showTimeoutId),this.showTimeoutId=null),this.hideTimeoutId=setTimeout((function(){e.visibility="hidden",e.hideTimeoutId=null,e.markForCheck()}),t)},t.prototype.animationStart=function(){this.closeOnInteraction=!1},t.prototype.animationDone=function(t){var e=t.toState;"hidden"!==e||this.isVisible()||this.onHide.next(),"visible"!==e&&"hidden"!==e||(this.closeOnInteraction=!0)},t.prototype.afterHidden=function(){return this.onHide.asObservable()},t.prototype.setTooltipClass=function(t){this.tooltipClasses=a.coerceArray(t),this.updateClasses()},t}();g.decorators=[{type:n.Component,args:[{selector:"thy-tooltip",template:'<div class="thy-tooltip-arrow"></div>\n<div class="thy-tooltip-content">\n  <ng-container *ngIf="isTemplateRef; else text">\n    <ng-container *ngTemplateOutlet="content; context: { $implicit: data }"></ng-container>\n  </ng-container>\n  <ng-template #text>\n    {{ content }}\n  </ng-template>\n</div>\n',encapsulation:n.ViewEncapsulation.None,changeDetection:n.ChangeDetectionStrategy.OnPush,animations:[d.tooltipState],host:{"[@state]":"visibility","(@state.start)":"animationStart()","(@state.done)":"animationDone($event)"},providers:[h.UpdateHostClassService]}]}],g.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:h.UpdateHostClassService},{type:n.ElementRef}]},g.propDecorators={addTooltipContainerClass:[{type:n.HostBinding,args:["class.thy-tooltip"]}]};var T=function(){},m=new n.InjectionToken("thy-tooltip-default-config"),v={offset:4,tooltipPin:!1,scrollThrottleSeconds:20,tooltipPanelClass:"thy-tooltip-panel"},b={provide:m,useValue:v},C=function(t){function e(e,o,i,n,s,r,a,l){var p=t.call(this,o,r,a,s)||this;return p.overlay=e,p.scrollDispatcher=i,p.viewContainerRef=n,p.thyTooltipConfig=l,p.options=u,p.panelClassPrefix="thy-tooltip",p.touchendHideDelay=p.options.touchendHideDelay,p.placement="top",p.showDelay=p.options.showDelay,p.hideDelay=p.options.hideDelay,p._trigger="hover",p.tooltipPin=p.thyTooltipConfig.tooltipPin,p.options=u,p.scrollStrategy=e.scrollStrategies.reposition({scrollThrottle:p.thyTooltipConfig.scrollThrottleSeconds}),p}return function(t,e){function o(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t&&a.isString(t)?(""+t).trim():t,!this._content&&this.isTooltipVisible()?this.hide(0):this.updateTooltipContent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thyTooltipClass",{set:function(t){this.tooltipClass=t,this.tooltipInstance&&this.setTooltipClass(this.tooltipClass)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thyTooltipTrigger",{set:function(t){this.trigger=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thyTooltipDisabled",{set:function(t){this.disabled=a.coerceBooleanProperty(t),this.disabled&&this.hide(0)},enumerable:!1,configurable:!0}),e.prototype.detach=function(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach(),this.tooltipInstance=null},e.prototype.createOverlay=function(){var t=this;if(this.overlayRef)return this.overlayRef;var e=this.scrollDispatcher.getAncestorScrollContainers(this.elementRef),o=this.overlay.position().flexibleConnectedTo(this.elementRef).withTransformOriginOn(".thy-tooltip-content").withFlexibleDimensions(!1).withViewportMargin(8);return o.withScrollableContainers(e),o.positionChanges.pipe(r.takeUntil(this.ngUnsubscribe$)).subscribe((function(e){t.tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&t.tooltipInstance.isVisible()&&t.ngZone.run((function(){return t.hide(0)}))})),this.overlayRef=this.overlay.create({positionStrategy:o,panelClass:this.thyTooltipConfig.tooltipPanelClass,scrollStrategy:this.scrollStrategy,hasBackdrop:"click"===this.trigger,backdropClass:"thy-tooltip-backdrop"}),this.updatePosition(),this.overlayRef.detachments().pipe(r.takeUntil(this.ngUnsubscribe$)).subscribe((function(){return t.detach()})),this.overlayRef.backdropClick().subscribe((function(){t.overlayRef.detachBackdrop(),t.hide()})),this.overlayRef},e.prototype.updateTooltipContent=function(){var t=this;this.tooltipInstance&&(this.tooltipInstance.content=this.content,this.tooltipInstance.data=this.data,this.tooltipInstance.markForCheck(),this.ngZone.onMicrotaskEmpty.asObservable().pipe(r.take(1),r.takeUntil(this.ngUnsubscribe$)).subscribe((function(){t.tooltipInstance&&t.overlayRef.updatePosition()})))},e.prototype.isTooltipVisible=function(){return!!this.tooltipInstance&&this.tooltipInstance.isVisible()},e.prototype.updatePosition=function(){var t=this.overlayRef.getConfig().positionStrategy,e=h.getFlexiblePositions(this.placement,this.tooltipOffset||this.thyTooltipConfig.offset,this.panelClassPrefix);t.withPositions(e)},e.prototype.setTooltipClass=function(t){this.tooltipInstance&&this.tooltipInstance.setTooltipClass(t)},e.prototype.ngOnInit=function(){this.initialize()},e.prototype.show=function(t){var e=this;if(void 0===t&&(t=this.showDelay),!this.disabled&&this.content&&(!this.isTooltipVisible()||this.tooltipInstance.showTimeoutId||this.tooltipInstance.hideTimeoutId)){var o=this.createOverlay();this.detach(),this.portal=this.portal||new l.ComponentPortal(g,this.viewContainerRef),this.tooltipInstance=o.attach(this.portal).instance,this.tooltipInstance.afterHidden().pipe(r.takeUntil(this.ngUnsubscribe$)).subscribe((function(){return e.detach()})),this.setTooltipClass(this.tooltipClass),this.updateTooltipContent(),this.tooltipInstance.show(t)}},e.prototype.hide=function(t){void 0===t&&(t=this.hideDelay),this.tooltipInstance&&this.tooltipInstance.hide(t)},e.prototype.ngOnDestroy=function(){this.hide(0),this.dispose(),this.overlayRef&&(this.tooltipInstance=null)},e}(h.ThyOverlayDirectiveBase);C.decorators=[{type:n.Directive,args:[{selector:"[thyTooltip],[thy-tooltip]",exportAs:"thyTooltip"}]}],C.ctorParameters=function(){return[{type:e.Overlay},{type:n.ElementRef},{type:e.ScrollDispatcher},{type:n.ViewContainerRef},{type:n.NgZone},{type:s.Platform},{type:o.FocusMonitor},{type:T,decorators:[{type:n.Inject,args:[m]}]}]},C.propDecorators={content:[{type:n.Input,args:["thyTooltip"]}],placement:[{type:n.Input,args:["thyTooltipPlacement"]}],thyTooltipClass:[{type:n.Input,args:["thyTooltipClass"]}],showDelay:[{type:n.Input,args:["thyTooltipShowDelay"]}],hideDelay:[{type:n.Input,args:["thyTooltipHideDelay"]}],thyTooltipTrigger:[{type:n.Input,args:["thyTooltipTrigger"]}],thyTooltipDisabled:[{type:n.Input,args:["thyTooltipDisabled"]}],data:[{type:n.Input,args:["thyTooltipTemplateContext"]}],tooltipOffset:[{type:n.Input,args:["thyTooltipOffset"]}],tooltipPin:[{type:n.Input,args:["thyTooltipPin"]}]};var I=function(){};I.decorators=[{type:n.NgModule,args:[{imports:[o.A11yModule,i.CommonModule,e.OverlayModule],exports:[C],declarations:[C,g],entryComponents:[g],providers:[b]}]}];var O=function(){function t(t,e,o,i,n,s){this.overlay=t,this.scrollDispatcher=e,this.ngZone=o,this.platform=i,this.focusMonitor=n,this.thyTooltipConfig=s}return t.prototype.attach=function(t,e,o){this.thyTooltipDirective=new C(this.overlay,t,this.scrollDispatcher,e,this.ngZone,this.platform,this.focusMonitor,this.thyTooltipConfig),o&&(this.thyTooltipDirective.trigger=o),this.thyTooltipDirective.ngOnInit()},t.prototype.detach=function(){this.thyTooltipDirective.ngOnDestroy()},t}();O.decorators=[{type:n.Injectable}],O.ctorParameters=function(){return[{type:e.Overlay},{type:e.ScrollDispatcher},{type:n.NgZone},{type:s.Platform},{type:o.FocusMonitor},{type:T,decorators:[{type:n.Inject,args:[m]}]}]},t.DEFAULT_TOOLTIP_OPTIONS=u,t.THY_TOOLTIP_DEFAULT_CONFIG_PROVIDER=b,t.THY_TOOLTIP_DEFAULT_CONFIG_TOKEN=m,t.ThyTooltipComponent=g,t.ThyTooltipConfig=T,t.ThyTooltipDirective=C,t.ThyTooltipModule=I,t.TooltipService=O,t.thyTooltipAnimations=d,t.thyTooltipDefaultConfig=v,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-tooltip.umd.min.js.map