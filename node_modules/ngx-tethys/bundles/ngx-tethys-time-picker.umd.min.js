!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/forms"),require("ngx-tethys/util"),require("ngx-tethys/store"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-tethys/time-picker",["exports","@angular/core","@angular/forms","ngx-tethys/util","ngx-tethys/store","@angular/common"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-tethys"]=e["ngx-tethys"]||{},e["ngx-tethys"]["time-picker"]={}),e.ng.core,e.ng.forms,e["ngx-tethys"].util,e["ngx-tethys"].store,e.ng.common)}(this,(function(e,n,t,i,s,o){"use strict";function r(e){return!!e&&(!(e instanceof Date&&isNaN(e.getHours()))&&("string"!=typeof e||r(new Date(e))))}function a(e,n){return!(e.min&&n<e.min)&&!(e.max&&n>e.max)}function c(e,n){void 0===n&&(n=!1);var t=i.coerceNumberValue(e);return isNaN(t)||t<0||t>(n?12:24)?NaN:t}function u(e){var n=i.coerceNumberValue(e);return isNaN(n)||n<0||n>60?NaN:n}function d(e){var n=i.coerceNumberValue(e);return isNaN(n)||n<0||n>60?NaN:n}function h(e){return"string"==typeof e?new Date(e):e}function p(e,n){if(!e)return p(m(new Date,0,0,0),n);var t=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return n.hour&&(t=(t+i.coerceNumberValue(n.hour))%24)<0&&(t+=24),n.minute&&(s+=i.coerceNumberValue(n.minute)),n.seconds&&(o+=i.coerceNumberValue(n.seconds)),m(e,t,s,o)}function l(e,n){var t=c(n.hour),i=u(n.minute),s=d(n.seconds)||0;return n.isPM&&12!==t&&(t+=12),e?isNaN(t)||isNaN(i)?e:m(e,t,i,s):isNaN(t)||isNaN(i)?e:m(new Date,t,i,s)}function m(e,n,t,i){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),n,t,i,e.getMilliseconds())}function f(e){var n=e.toString();return n.length>1?n:"0"+n}function g(e,n){return!isNaN(c(e,n))}function y(e){return!isNaN(u(e))}function v(e){return!isNaN(d(e))}function b(e,n,t){var i=l(new Date,e);return!(n&&i>n)&&!(t&&i<t)}function w(e,n,t,i){return void 0===n&&(n="0"),void 0===t&&(t="0"),g(e,i)&&y(n)&&v(t)}function S(e,n){if(e.readonlyInput||e.disabled)return!1;if(n){if("wheel"===n.source&&!e.mousewheel)return!1;if("key"===n.source&&!e.arrowKeys)return!1}return!0}function M(e){return{hourStep:e.hourStep,minuteStep:e.minuteStep,secondsStep:e.secondsStep,readonlyInput:e.readonlyInput,disabled:e.disabled,mousewheel:e.mousewheel,arrowKeys:e.arrowKeys,showSpinners:e.showSpinners,showMeridian:e.showMeridian,showSeconds:e.showSeconds,meridians:e.meridians,min:e.min,max:e.max}}var x=function(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowKeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS"};x.decorators=[{type:n.Injectable}];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var I=function(e,n){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)};function D(e,n,t,i){var s,o=arguments.length,r=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,n,t,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(n,t,r):s(n,t))||r);return o>3&&r&&Object.defineProperty(n,t,r),r}function k(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}Object.create;Object.create;var H={value:null,config:new x,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}},N=function(e){function n(){return e.call(this,H)||this}return function(e,n){function t(){this.constructor=e}I(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),n.prototype.writeValue=function(e){this.setState({value:e})},n.prototype.changeHours=function(e){var n=this.snapshot;if(!S(n.config,e)||!function(e,n){return!(!e.step||e.step>0&&!n.canIncrementHours||e.step<0&&!n.canDecrementHours)}(e,n.controls))return n;var t=p(n.value,{hour:e.step});if((n.config.max||n.config.min)&&!a(n.config,t))return n;this.setState({value:t})},n.prototype.changeMinutes=function(e){var n=this.snapshot;if(!S(n.config,e)||!function(e,n){return!(!e.step||e.step>0&&!n.canIncrementMinutes||e.step<0&&!n.canDecrementMinutes)}(e,n.controls))return n;var t=p(n.value,{minute:e.step});if((n.config.max||n.config.min)&&!a(n.config,t))return n;this.setState({value:t})},n.prototype.changeSeconds=function(e){var n=this.snapshot;if(!S(n.config,e)||!function(e,n){return!(!e.step||e.step>0&&!n.canIncrementSeconds||e.step<0&&!n.canDecrementSeconds)}(e,n.controls))return n;var t=p(n.value,{seconds:e.step});if((n.config.max||n.config.min)&&!a(n.config,t))return n;this.setState({value:t})},n.prototype.setTime=function(e){var n=this.snapshot;if(!S(n.config))return n;var t=l(n.value,e);this.setState({value:t})},n.prototype.updateControls=function(e){var n=this.snapshot,t=function(e,n){var t=n.min,i=n.max,s=n.hourStep,o=n.minuteStep,r=n.secondsStep,a=n.showSeconds,c={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!e)return c;if(i){var u=p(e,{hour:s});if(c.canIncrementHours=i>u,!c.canIncrementHours){var d=p(e,{minute:o});c.canIncrementMinutes=a?i>d:i>=d}if(!c.canIncrementMinutes){var h=p(e,{seconds:r});c.canIncrementSeconds=i>=h}e.getHours()<12&&(c.canToggleMeridian=p(e,{hour:12})<i)}t&&(u=p(e,{hour:-s}),c.canDecrementHours=t<u,c.canDecrementHours||(d=p(e,{minute:-o}),c.canDecrementMinutes=a?t<d:t<=d),c.canDecrementMinutes||(h=p(e,{seconds:-r}),c.canDecrementSeconds=t<=h),e.getHours()>=12&&(c.canToggleMeridian=p(e,{hour:-12})>t));return c}(n.value,e),i={value:n.value,config:e,controls:t};n.config.showMeridian!==i.config.showMeridian&&n.value&&(i.value=new Date(n.value)),this.setState(i)},n}(s.Store);N.decorators=[{type:n.Injectable}],N.ctorParameters=function(){return[]},D([s.Action(),k("design:type",Function),k("design:paramtypes",[Date]),k("design:returntype",void 0)],N.prototype,"writeValue",null),D([s.Action(),k("design:type",Function),k("design:paramtypes",[Object]),k("design:returntype",void 0)],N.prototype,"changeHours",null),D([s.Action(),k("design:type",Function),k("design:paramtypes",[Object]),k("design:returntype",void 0)],N.prototype,"changeMinutes",null),D([s.Action(),k("design:type",Function),k("design:paramtypes",[Object]),k("design:returntype",void 0)],N.prototype,"changeSeconds",null),D([s.Action(),k("design:type",Function),k("design:paramtypes",[Object]),k("design:returntype",void 0)],N.prototype,"setTime",null),D([s.Action(),k("design:type",Function),k("design:paramtypes",[Object]),k("design:returntype",void 0)],N.prototype,"updateControls",null);var V={provide:t.NG_VALUE_ACCESSOR,useExisting:n.forwardRef((function(){return P})),multi:!0},P=function(){function e(e,t,i){var s=this;this._cd=t,this._store=i,this.isValid=new n.EventEmitter,this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype,Object.assign(this,e),this.timePickerSub=i.select((function(e){return e.value})).subscribe((function(e){s._renderTime(e),s.onChange(e),s._store.updateControls(M(s))})),i.select((function(e){return e.controls})).subscribe((function(e){s.isValid.emit(w(s.hours,s.minutes,s.seconds,s.isPM())),Object.assign(s,e),t.markForCheck()}))}return Object.defineProperty(e.prototype,"isEditable",{get:function(){return!(this.readonlyInput||this.disabled)},enumerable:!1,configurable:!0}),e.prototype.resetValidation=function(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1},e.prototype.isPM=function(){return this.showMeridian&&this.meridian===this.meridians[1]},e.prototype.prevDef=function(e){e.preventDefault()},e.prototype.wheelSign=function(e){return-1*Math.sign(e.deltaY)},e.prototype.ngOnChanges=function(e){this._store.updateControls(M(this))},e.prototype.changeHours=function(e,n){void 0===n&&(n=""),this.resetValidation(),this._store.changeHours({step:e,source:n})},e.prototype.changeMinutes=function(e,n){void 0===n&&(n=""),this.resetValidation(),this._store.changeMinutes({step:e,source:n})},e.prototype.changeSeconds=function(e,n){void 0===n&&(n=""),this.resetValidation(),this._store.changeSeconds({step:e,source:n})},e.prototype.updateHours=function(e){if(this.resetValidation(),this.hours=e,!(g(this.hours,this.isPM())&&this.isValidLimit()))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()},e.prototype.updateMinutes=function(e){if(this.resetValidation(),this.minutes=e,!(y(this.minutes)&&this.isValidLimit()))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()},e.prototype.updateSeconds=function(e){if(this.resetValidation(),this.seconds=e,!(v(this.seconds)&&this.isValidLimit()))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()},e.prototype.isValidLimit=function(){return b({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)},e.prototype._updateTime=function(){var e=this.showSeconds?this.seconds:void 0,n=this.showMinutes?this.minutes:void 0;if(!w(this.hours,n,e,this.isPM()))return this.isValid.emit(!1),void this.onChange(null);this._store.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()})},e.prototype.toggleMeridian=function(){if(this.showMeridian&&this.isEditable){this._store.changeHours({step:12,source:""})}},e.prototype.writeValue=function(e){r(e)?this._store.writeValue(h(e)):null==e&&this._store.writeValue(null)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e,this._cd.markForCheck()},e.prototype.ngOnDestroy=function(){this.timePickerSub.unsubscribe()},e.prototype._renderTime=function(e){if(!r(e))return this.hours="",this.minutes="",this.seconds="",void(this.meridian=this.meridians[0]);var n=h(e),t=n.getHours();this.showMeridian&&(this.meridian=this.meridians[t>=12?1:0],0===(t%=12)&&(t=12)),this.hours=f(t),this.minutes=f(n.getMinutes()),this.seconds=f(n.getUTCSeconds())},e}();P.decorators=[{type:n.Component,args:[{selector:"thy-time-picker",changeDetection:n.ChangeDetectionStrategy.OnPush,providers:[V,N],template:'<table>\n  <tbody>\n    <tr class="text-center" [hidden]="!showSpinners">\n      \x3c!-- increment hours button--\x3e\n      <td>\n        <a class="btn btn-link" [class.disabled]="!canIncrementHours || !isEditable" (click)="changeHours(hourStep)"\n          ><span class="thy-chevron thy-chevron-up"></span\n        ></a>\n      </td>\n      \x3c!-- divider --\x3e\n      <td *ngIf="showMinutes">&nbsp;&nbsp;&nbsp;</td>\n      \x3c!-- increment minutes button --\x3e\n      <td *ngIf="showMinutes">\n        <a\n          class="btn btn-link"\n          [class.disabled]="!canIncrementMinutes || !isEditable"\n          (click)="changeMinutes(minuteStep)"\n          ><span class="thy-chevron thy-chevron-up"></span\n        ></a>\n      </td>\n      \x3c!-- divider --\x3e\n      <td *ngIf="showSeconds">&nbsp;</td>\n      \x3c!-- increment seconds button --\x3e\n      <td *ngIf="showSeconds">\n        <a\n          class="btn btn-link"\n          [class.disabled]="!canIncrementSeconds || !isEditable"\n          (click)="changeSeconds(secondsStep)"\n        >\n          <span class="thy-chevron thy-chevron-up"></span>\n        </a>\n      </td>\n      \x3c!-- space between --\x3e\n      <td *ngIf="showMeridian">&nbsp;&nbsp;&nbsp;</td>\n      \x3c!-- meridian placeholder--\x3e\n      <td *ngIf="showMeridian"></td>\n    </tr>\n    <tr>\n      \x3c!-- hours --\x3e\n      <td class="form-group" [class.has-error]="invalidHours">\n        <input\n          type="text"\n          [class.is-invalid]="invalidHours"\n          class="form-control text-center thy-time-picker-field"\n          [placeholder]="hoursPlaceholder"\n          maxlength="2"\n          [readonly]="readonlyInput"\n          [disabled]="disabled"\n          [value]="hours"\n          (wheel)="prevDef($event); changeHours(hourStep * wheelSign($event), \'wheel\')"\n          (keydown.ArrowUp)="changeHours(hourStep, \'key\')"\n          (keydown.ArrowDown)="changeHours(-hourStep, \'key\')"\n          (change)="updateHours($event.target.value)"\n        />\n      </td>\n\n      \x3c!-- divider --\x3e\n      <td *ngIf="showMinutes">&nbsp;:&nbsp;</td>\n      \x3c!-- minutes --\x3e\n      <td class="form-group" *ngIf="showMinutes" [class.has-error]="invalidMinutes">\n        <input\n          type="text"\n          [class.is-invalid]="invalidMinutes"\n          class="form-control text-center thy-time-picker-field"\n          [placeholder]="minutesPlaceholder"\n          maxlength="2"\n          [readonly]="readonlyInput"\n          [disabled]="disabled"\n          [value]="minutes"\n          (wheel)="prevDef($event); changeMinutes(minuteStep * wheelSign($event), \'wheel\')"\n          (keydown.ArrowUp)="changeMinutes(minuteStep, \'key\')"\n          (keydown.ArrowDown)="changeMinutes(-minuteStep, \'key\')"\n          (change)="updateMinutes($event.target.value)"\n        />\n      </td>\n      \x3c!-- divider --\x3e\n      <td *ngIf="showSeconds">&nbsp;:&nbsp;</td>\n      \x3c!-- seconds --\x3e\n      <td class="form-group" *ngIf="showSeconds" [class.has-error]="invalidSeconds">\n        <input\n          type="text"\n          [class.is-invalid]="invalidSeconds"\n          class="form-control text-center thy-time-picker-field"\n          [placeholder]="secondsPlaceholder"\n          maxlength="2"\n          [readonly]="readonlyInput"\n          [disabled]="disabled"\n          [value]="seconds"\n          (wheel)="prevDef($event); changeSeconds(secondsStep * wheelSign($event), \'wheel\')"\n          (keydown.ArrowUp)="changeSeconds(secondsStep, \'key\')"\n          (keydown.ArrowDown)="changeSeconds(-secondsStep, \'key\')"\n          (change)="updateSeconds($event.target.value)"\n        />\n      </td>\n      \x3c!-- space between --\x3e\n      <td *ngIf="showMeridian">&nbsp;&nbsp;&nbsp;</td>\n      \x3c!-- meridian --\x3e\n      <td *ngIf="showMeridian">\n        <button\n          type="button"\n          class="btn btn-default text-center"\n          [disabled]="!isEditable || !canToggleMeridian"\n          [class.disabled]="!isEditable || !canToggleMeridian"\n          (click)="toggleMeridian()"\n        >\n          {{ meridian }}\n        </button>\n      </td>\n    </tr>\n    <tr class="text-center" [hidden]="!showSpinners">\n      \x3c!-- decrement hours button--\x3e\n      <td>\n        <a class="btn btn-link" [class.disabled]="!canDecrementHours || !isEditable" (click)="changeHours(-hourStep)">\n          <span class="thy-chevron thy-chevron-down"></span>\n        </a>\n      </td>\n      \x3c!-- divider --\x3e\n      <td *ngIf="showMinutes">&nbsp;&nbsp;&nbsp;</td>\n      \x3c!-- decrement minutes button--\x3e\n      <td *ngIf="showMinutes">\n        <a\n          class="btn btn-link"\n          [class.disabled]="!canDecrementMinutes || !isEditable"\n          (click)="changeMinutes(-minuteStep)"\n        >\n          <span class="thy-chevron thy-chevron-down"></span>\n        </a>\n      </td>\n      \x3c!-- divider --\x3e\n      <td *ngIf="showSeconds">&nbsp;</td>\n      \x3c!-- decrement seconds button--\x3e\n      <td *ngIf="showSeconds">\n        <a\n          class="btn btn-link"\n          [class.disabled]="!canDecrementSeconds || !isEditable"\n          (click)="changeSeconds(-secondsStep)"\n        >\n          <span class="thy-chevron thy-chevron-down"></span>\n        </a>\n      </td>\n      \x3c!-- space between --\x3e\n      <td *ngIf="showMeridian">&nbsp;&nbsp;&nbsp;</td>\n      \x3c!-- meridian placeholder--\x3e\n      <td *ngIf="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n'}]}],P.ctorParameters=function(){return[{type:x},{type:n.ChangeDetectorRef},{type:N}]},P.propDecorators={hourStep:[{type:n.Input}],minuteStep:[{type:n.Input}],secondsStep:[{type:n.Input}],readonlyInput:[{type:n.Input}],disabled:[{type:n.Input}],mousewheel:[{type:n.Input}],arrowKeys:[{type:n.Input}],showSpinners:[{type:n.Input}],showMeridian:[{type:n.Input}],showMinutes:[{type:n.Input}],showSeconds:[{type:n.Input}],meridians:[{type:n.Input}],min:[{type:n.Input}],max:[{type:n.Input}],hoursPlaceholder:[{type:n.Input}],minutesPlaceholder:[{type:n.Input}],secondsPlaceholder:[{type:n.Input}],isValid:[{type:n.Output}]};var T=function(){};T.decorators=[{type:n.NgModule,args:[{imports:[o.CommonModule],declarations:[P],exports:[P],providers:[x,N]}]}],e.TIMEPICKER_CONTROL_VALUE_ACCESSOR=V,e.ThyTimePickerComponent=P,e.ThyTimePickerModule=T,e.ThyTimePickerStore=N,e.TimePickerConfig=x,e.changeTime=p,e.createDate=m,e.initialState=H,e.isHourInputValid=g,e.isInputLimitValid=b,e.isInputValid=w,e.isMinuteInputValid=y,e.isSecondInputValid=v,e.isValidDate=r,e.isValidLimit=a,e.padNumber=f,e.parseHours=c,e.parseMinutes=u,e.parseSeconds=d,e.parseTime=h,e.setTime=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-time-picker.umd.min.js.map