{"version":3,"file":"ngx-tethys-switch.umd.js","sources":["../../src/switch/switch.component.ts","../../src/switch/switch.module.ts","../../src/switch/ngx-tethys-switch.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit, forwardRef, ElementRef, ViewChild, OnChanges, SimpleChanges } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { helpers } from 'ngx-tethys/util';\n\n@Component({\n    selector: 'thy-switch',\n    templateUrl: './switch.component.html',\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => ThySwitchComponent),\n            multi: true\n        }\n    ]\n})\nexport class ThySwitchComponent implements OnInit, ControlValueAccessor, OnChanges {\n    public model: boolean;\n\n    public type?: String = 'primary';\n\n    public size?: String = '';\n\n    public disabled?: Boolean = false;\n\n    public classNames: string[];\n\n    public typeArray: string[] = ['primary', 'info', 'warning', 'danger'];\n\n    public sizeArray: string[] = ['lg', '', 'sm'];\n\n    private initialized = false;\n\n    @ViewChild('switch', { static: true }) switchElementRef: ElementRef;\n\n    @Input()\n    set thyType(value: string) {\n        if (!this.typeArray.includes(value)) {\n            value = 'primary';\n        }\n        this.type = value;\n        if (this.initialized) {\n            this.setClassNames();\n        }\n    }\n\n    @Input()\n    set thySize(value: string) {\n        if (!this.sizeArray.includes(value)) {\n            value = '';\n        }\n        this.size = value;\n        if (this.initialized) {\n            this.setClassNames();\n        }\n    }\n\n    @Input() thyDisabled: boolean;\n\n    @Output() thyChange: EventEmitter<Event> = new EventEmitter<Event>();\n\n    constructor() {}\n\n    ngOnInit() {\n        this.setClassNames();\n        this.initialized = true;\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // 兼容降级后的Switch，使用onChanges\n        if (changes.thyDisabled) {\n            const value = changes.thyDisabled.currentValue;\n            this.disabled = helpers.isBoolean(value) ? Boolean(value) : value === 'true' || value === '1';\n            this.setClassNames();\n        }\n    }\n\n    public onModelChange: Function = () => {};\n\n    public onModelTouched: Function = () => {};\n\n    writeValue(value: boolean) {\n        this.model = value;\n        // this.setClassNames();\n    }\n\n    registerOnChange(fn: Function): void {\n        this.onModelChange = fn;\n    }\n\n    registerOnTouched(fn: Function): void {\n        this.onModelTouched = fn;\n    }\n\n    setDisabledState(isDisabled: Boolean) {\n        this.disabled = isDisabled;\n        this.setClassNames();\n    }\n\n    toggle(event: Event) {\n        this.model = !this.model;\n        this.onModelChange(this.model);\n        this.thyChange.emit(event);\n    }\n\n    setClassNames() {\n        this.classNames = [`thy-switch-${this.type}`];\n        if (this.size) {\n            this.classNames.push(`thy-switch-${this.size}`);\n        }\n        if (this.disabled) {\n            this.classNames.push(`thy-switch-disabled`);\n            if (this.model) {\n                this.classNames.push(`thy-switch-disabled-true`);\n            }\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ThySwitchComponent } from './switch.component';\n\n@NgModule({\n    declarations: [\n        ThySwitchComponent\n    ],\n    entryComponents: [\n        ThySwitchComponent\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        ThySwitchComponent\n    ]\n})\nexport class ThySwitchModule {\n\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["EventEmitter","helpers","Component","NG_VALUE_ACCESSOR","forwardRef","ViewChild","Input","Output","NgModule","CommonModule"],"mappings":"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"}