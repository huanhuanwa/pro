!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("ngx-tethys/core"),require("ngx-tethys/util"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/bidi"),require("@angular/cdk/coercion"),require("@angular/cdk/overlay"),require("@angular/cdk/platform"),require("@angular/cdk/portal"),require("@angular/common"),require("@angular/animations"),require("@angular/cdk/scrolling"),require("ngx-tethys/icon"),require("@angular/cdk/a11y")):"function"==typeof define&&define.amd?define("ngx-tethys/popover",["exports","@angular/core","ngx-tethys/core","ngx-tethys/util","rxjs","rxjs/operators","@angular/cdk/bidi","@angular/cdk/coercion","@angular/cdk/overlay","@angular/cdk/platform","@angular/cdk/portal","@angular/common","@angular/animations","@angular/cdk/scrolling","ngx-tethys/icon","@angular/cdk/a11y"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-tethys"]=e["ngx-tethys"]||{},e["ngx-tethys"].popover={}),e.ng.core,e["ngx-tethys"].core,e["ngx-tethys"].util,e.rxjs,e.rxjs.operators,e.ng.cdk.bidi,e.ng.cdk.coercion,e.ng.cdk.overlay,e.ng.cdk.platform,e.ng.cdk.portal,e.ng.common,e.ng.animations,e.ng.cdk.scrolling,e["ngx-tethys"].icon,e.ng.cdk.a11y)}(this,(function(e,t,o,n,r,i,a,s,c,p,l,u,y,h,d,f){"use strict";function v(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var g=v(t),m=v(c),C=v(p),b=v(u),O=v(h),T=function(){this.isPopoverBody=!0};T.decorators=[{type:t.Component,args:[{selector:"thy-popover-body",template:"<ng-content></ng-content>",exportAs:"thyPopoverBody"}]}],T.propDecorators={isPopoverBody:[{type:t.HostBinding,args:["class.thy-popover-body"]}]};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var P=function(e,t){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};function R(e,t){function o(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}Object.create;function k(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,i=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a}function I(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(k(arguments[t]));return e}Object.create;var j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),t}(o.ThyAbstractOverlayConfig),w=new t.InjectionToken("thy-popover-default-config"),E={hasBackdrop:!0,backdropClass:"thy-popover-backdrop",panelClass:"",offset:4,backdropClosable:!0,closeOnNavigation:!0,placement:"bottom",insideClosable:!1,manualClosure:!1,originActiveClass:"thy-popover-origin-active"},_={provide:w,useValue:E},A=new t.InjectionToken("thy-popover-scroll-strategy"),D=function(e){return function(){return e.scrollStrategies.block()}},S={provide:A,deps:[c.Overlay],useFactory:D},x=[y.state("void, exit",y.style({opacity:0,transform:"scale(0.1)"})),y.state("enter",y.style({transform:"none"}))],V={popoverContainer:y.trigger("popoverContainer",x)},M={name:"popover",animationEnabled:!0,disposeWhenClose:!0},N=function(e){function o(o,n,r,a,s,c){var p=e.call(this,M,a)||this;return p.elementRef=o,p.document=n,p.config=r,p.thyClickDispatcher=s,p.ngZone=c,p.animationState="enter",p.animationStateChanged=new t.EventEmitter,p.insideClicked=new t.EventEmitter,p.outsideClicked=new t.EventEmitter,p.animationOpeningDone=p.animationStateChanged.pipe(i.filter((function(e){return"done"===e.phaseName&&"enter"===e.toState}))),p.animationClosingDone=p.animationStateChanged.pipe(i.filter((function(e){return"done"===e.phaseName&&"exit"===e.toState}))),p}return R(o,e),o.prototype.beforeAttachPortal=function(){},o.prototype.ngAfterViewInit=function(){var e=this;this.config.outsideClosable&&!this.config.hasBackdrop&&r.timer().subscribe((function(){e.thyClickDispatcher.clicked().pipe(i.takeUntil(e.animationClosingDone)).subscribe((function(t){e.elementRef.nativeElement.contains(t.target)||e.ngZone.run((function(){e.outsideClicked.emit()}))}))}))},o.prototype.onAnimationDone=function(e){this.animationStateChanged.emit(e)},o.prototype.onAnimationStart=function(e){this.animationStateChanged.emit(e)},o.prototype.startExitAnimation=function(){this.animationState="exit",this.changeDetectorRef.markForCheck()},o.prototype.onInsideClick=function(){this.config.insideClosable&&this.insideClicked.emit()},o.prototype.ngOnDestroy=function(){e.prototype.destroy.call(this)},o}(o.ThyAbstractOverlayContainer);N.decorators=[{type:t.Component,args:[{selector:"thy-popover-container",template:"<ng-template cdkPortalOutlet></ng-template>\n",animations:[V.popoverContainer],host:{class:"thy-popover-container",tabindex:"-1","[attr.role]":"'popover'","[@popoverContainer]":"animationState","(@popoverContainer.start)":"onAnimationStart($event)","(@popoverContainer.done)":"onAnimationDone($event)"}}]}],N.ctorParameters=function(){return[{type:t.ElementRef},{type:void 0,decorators:[{type:t.Inject,args:[u.DOCUMENT]}]},{type:j},{type:t.ChangeDetectorRef},{type:o.ThyClickDispatcher},{type:t.NgZone}]},N.propDecorators={portalOutlet:[{type:t.ViewChild,args:[l.CdkPortalOutlet,{static:!0}]}],onInsideClick:[{type:t.HostListener,args:["click",[]]}]};var q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),t}(o.ThyAbstractOverlayRef),U=function(e){function t(t,o,n){var r=e.call(this,M,t,o,n)||this;return o.insideClicked.subscribe((function(){r.close()})),o.outsideClicked.subscribe((function(){r.close()})),r}return R(t,e),t.prototype.updatePosition=function(){return this.overlayRef.updatePosition(),this},t}(o.ThyAbstractInternalOverlayRef),F=function(e){function p(t,o,n,i,a,s,c,p,l){var u=e.call(this,M,t,o,Object.assign(Object.assign({},E),n),i)||this;return u.ngZone=a,u._viewportRuler=s,u._document=c,u._platform=p,u._overlayContainer=l,u.ngUnsubscribe$=new r.Subject,u.originInstancesMap=new Map,u}return R(p,e),p.prototype.buildPositionStrategy=function(e){var t=this,n=e.originPosition?e.originPosition:e.origin,r=new c.FlexibleConnectedPositionStrategy(n,this._viewportRuler,this._document,this._platform,this._overlayContainer),a=o.getFlexiblePositions(e.placement,e.offset,"thy-popover");return r.withPositions(a),r.withGrowAfterOpen(!0),r.positionChanges.pipe(i.takeUntil(this.ngUnsubscribe$)).subscribe((function(e){e.scrollableViewProperties.isOverlayClipped&&t.ngZone.run((function(){return t.close()}))})),r},p.prototype.buildScrollStrategy=function(e){return e.scrollStrategy?e.scrollStrategy:this.scrollStrategy&&n.isFunction(this.scrollStrategy)?this.scrollStrategy():void this.overlay.scrollStrategies.block()},p.prototype.buildOverlayConfig=function(e){var t=this.buildPositionStrategy(e),o=this.buildBaseOverlayConfig(e);return o.positionStrategy=t,o.scrollStrategy=this.buildScrollStrategy(e),o},p.prototype.attachUpperOverlayContainer=function(e,o){var n=o&&o.viewContainerRef&&o.viewContainerRef.injector,r=t.Injector.create({parent:n||this.injector,providers:[{provide:j,useValue:o}]}),i=new l.ComponentPortal(N,o.viewContainerRef,r);return e.attach(i).instance},p.prototype.createUpperOverlayRef=function(e,t,o){return new U(e,t,o)},p.prototype.createInjector=function(e,o,n){var i=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=[{provide:N,useValue:n},{provide:q,useValue:o}];return!e.direction||i&&i.get(a.Directionality,null)||s.push({provide:a.Directionality,useValue:{value:e.direction,change:r.of()}}),t.Injector.create({parent:i||this.injector,providers:s})},p.prototype.originElementAddActiveClass=function(e){var t;e.originActiveClass&&(t=s.coerceElement(e.origin).classList).add.apply(t,I(s.coerceArray(e.originActiveClass)))},p.prototype.originElementRemoveActiveClass=function(e){var t;e.originActiveClass&&(t=s.coerceElement(e.origin).classList).remove.apply(t,I(s.coerceArray(e.originActiveClass)))},p.prototype.ensureCloseClosest=function(e){var t=!1;return this.originInstancesMap.forEach((function(o,n){o.config.manualClosure?n===e&&(o.popoverRef.close(),t=!0):(n===e&&(t=!0),o.popoverRef.close())})),t},p.prototype.open=function(e,t){var o=this,n=s.coerceElement(t.origin);if(!this.ensureCloseClosest(n)){var r=this.openUpperOverlay(e,t);return t=r.containerInstance.config,r.afterClosed().subscribe((function(){o.originElementRemoveActiveClass(t),o.originInstancesMap.delete(n)})),this.originElementAddActiveClass(t),this.originInstancesMap.set(n,{config:t,popoverRef:r}),r}},p.prototype.ngOnDestroy=function(){this.dispose()},p}(o.ThyAbstractOverlayService);F.ɵprov=g.ɵɵdefineInjectable({factory:function(){return new F(g.ɵɵinject(m.Overlay),g.ɵɵinject(g.INJECTOR),g.ɵɵinject(w,8),g.ɵɵinject(A),g.ɵɵinject(g.NgZone),g.ɵɵinject(O.ViewportRuler),g.ɵɵinject(b.DOCUMENT,8),g.ɵɵinject(C.Platform),g.ɵɵinject(m.OverlayContainer))},token:F,providedIn:"root"}),F.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],F.ctorParameters=function(){return[{type:c.Overlay},{type:t.Injector},{type:j,decorators:[{type:t.Optional},{type:t.Inject,args:[w]}]},{type:void 0,decorators:[{type:t.Inject,args:[A]}]},{type:t.NgZone},{type:c.ViewportRuler},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u.DOCUMENT]}]},{type:p.Platform},{type:c.OverlayContainer}]};var L=function(){function e(e,o){this.translate=e,this.thyPopover=o,this.thyClosed=new t.EventEmitter}return Object.defineProperty(e.prototype,"thyTitleTranslationKey",{set:function(e){e&&!this.thyTitle&&(this.thyTitle=this.translate.instant(e))},enumerable:!1,configurable:!0}),e.prototype.close=function(e){this.thyClosed.emit(e),this.thyPopover.close()},e}();L.decorators=[{type:t.Component,args:[{selector:"thy-popover-header",template:'<div class="thy-popover-header">\n  <h5 class="thy-popover-title">{{ thyTitle }}</h5>\n  <button type="button" class="close" (click)="close($event)">\n    <thy-icon thyIconName="close-bold"></thy-icon>\n  </button>\n</div>\n',exportAs:"thyPopoverHeader"}]}],L.ctorParameters=function(){return[{type:o.ThyTranslate},{type:F}]},L.propDecorators={thyTitle:[{type:t.Input}],thyTitleTranslationKey:[{type:t.Input}],thyClosed:[{type:t.Output}]};var H=function(e){function t(t,o,n,r,i,a){var s=e.call(this,t,o,n,r)||this;return s.popover=i,s.viewContainerRef=a,s.popoverOpened=!1,s.showDelay=0,s.hideDelay=0,s.tooltipPin=!0,s}return R(t,e),Object.defineProperty(t.prototype,"thyTrigger",{set:function(e){this.trigger=e},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.initialize()},t.prototype.createOverlay=function(){var e=this,t=Object.assign({origin:this.elementRef.nativeElement,hasBackdrop:"click"===this.trigger||"focus"===this.trigger,viewContainerRef:this.viewContainerRef,placement:this.thyPlacement,offset:this.thyOffset},this.thyConfig);return this.popoverRef=this.popover.open(this.content,t),this.popoverRef.afterClosed().subscribe((function(){e.popoverOpened=!1})),this.popoverRef.getOverlayRef()},t.prototype.show=function(e){var t=this;void 0===e&&(e=this.showDelay),this.hideTimeoutId&&(clearTimeout(this.hideTimeoutId),this.hideTimeoutId=null),this.disabled||this.overlayRef&&this.overlayRef.hasAttached()||("hover"!==this.trigger&&(e=0),this.showTimeoutId=setTimeout((function(){var e=t.createOverlay();t.overlayRef=e,t.popoverOpened=!0,t.showTimeoutId=null}),e))},t.prototype.hide=function(e){var t=this;void 0===e&&(e=this.hideDelay),this.showTimeoutId&&(clearTimeout(this.showTimeoutId),this.showTimeoutId=null),this.hideTimeoutId=setTimeout((function(){t.popoverRef&&t.popoverRef.close(),t.hideTimeoutId=null}),e)},t.prototype.ngOnDestroy=function(){this.dispose()},t}(o.ThyOverlayDirectiveBase);H.decorators=[{type:t.Directive,args:[{selector:"[thyPopover]"}]}],H.ctorParameters=function(){return[{type:t.ElementRef},{type:p.Platform},{type:f.FocusMonitor},{type:t.NgZone},{type:F},{type:t.ViewContainerRef}]},H.propDecorators={popoverOpened:[{type:t.HostBinding,args:["class.thy-popover-opened"]}],content:[{type:t.Input,args:["thyPopover"]}],thyTrigger:[{type:t.Input}],thyPlacement:[{type:t.Input}],thyOffset:[{type:t.Input}],thyConfig:[{type:t.Input}],showDelay:[{type:t.Input,args:["thyShowDelay"]}],hideDelay:[{type:t.Input,args:["thyHideDelay"]}]};var B=function(){};B.decorators=[{type:t.NgModule,args:[{declarations:[N,H,L,T],entryComponents:[N],imports:[u.CommonModule,c.OverlayModule,l.PortalModule,d.ThyIconModule],exports:[H,L,T],providers:[_,S]}]}],e.THY_POPOVER_DEFAULT_CONFIG=w,e.THY_POPOVER_DEFAULT_CONFIG_PROVIDER=_,e.THY_POPOVER_DEFAULT_CONFIG_VALUE=E,e.THY_POPOVER_SCROLL_STRATEGY=A,e.THY_POPOVER_SCROLL_STRATEGY_FACTORY=D,e.THY_POPOVER_SCROLL_STRATEGY_PROVIDER=S,e.ThyInternalPopoverRef=U,e.ThyPopover=F,e.ThyPopoverBodyComponent=T,e.ThyPopoverConfig=j,e.ThyPopoverContainerComponent=N,e.ThyPopoverDirective=H,e.ThyPopoverHeaderComponent=L,e.ThyPopoverModule=B,e.ThyPopoverRef=q,e.thyPopoverAnimations=V,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tethys-popover.umd.min.js.map